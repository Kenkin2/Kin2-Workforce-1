import{c as ee,u as ae,g as te,r as $,i as T,l as se,j as e,d,W as re,I as u,C as s,e as i,f as l,a as r,J as de,K as ie,N as y,O as j,m,b as M,L as g,R as D,q as le}from"./index-aBzEQGYq.js";import{A as ne}from"./app-layout-DNSppN_P.js";import{D as ce,a as oe,b as xe,c as me,d as ge}from"./dialog-23jdk0P0.js";import{T as he}from"./textarea-BY0bzfyA.js";import{U as pe}from"./user-plus-BtYbw1uG.js";import{U as be}from"./users-DQHjr_4E.js";import{P as ue}from"./percent-BAOcBIGB.js";import{H as R}from"./handshake-DxRR1pa7.js";import{E as A}from"./external-link-28zrZwzD.js";import{T as B}from"./target-kE2L6cy0.js";import{P as F}from"./plus-BIW1JAb4.js";import{R as K,a as E,X as O,Y as I,T as V,L as U,B as v}from"./generateCategoricalChart-CE2-CpqZ.js";import{B as Y}from"./BarChart-DkFQbd_9.js";import"./avatar-B73pXDWb.js";import"./calendar-B5qd1N74.js";import"./clock-Dcf5yqqC.js";import"./building-DW2XR0jT.js";import"./credit-card-CxGwdsfA.js";import"./calculator-Ch1wpyY6.js";import"./crown-J1RsCPzy.js";import"./map-pin-D49hIz5W.js";import"./pound-sterling-DvDjXgI4.js";import"./trending-up-EJ-1Wo56.js";import"./message-square-CV5BlX6z.js";import"./file-text-DGolt20j.js";import"./shield-check-DrJu6eCf.js";import"./Combination-D-0K7YMg.js";import"./index-oqkmxxPa.js";import"./scroll-area-Dsz05QRK.js";import"./alert-dialog-CGu9Do5w.js";import"./index-r-q9YERm.js";import"./send-DOYPj-_D.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=ee("Megaphone",[["path",{d:"m3 11 18-5v12L3 14v-3z",key:"n962bs"}],["path",{d:"M11.6 16.8a3 3 0 1 1-5.8-1.6",key:"1yl0tm"}]]),w=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4","#f97316","#ec4899"],J=({active:n,payload:o,label:h})=>!n||!o?null:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-3 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-900 dark:text-white mb-2",children:h}),o.map((N,p)=>e.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:[e.jsxs("span",{className:"font-medium",children:[N.name,":"]})," ",N.value]},p))]});function _e(){const{toast:n}=ae(),{isAuthenticated:o,isLoading:h}=te(),[N,p]=$.useState(!1);$.useEffect(()=>{if(!h&&!o){n({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}},[o,h,n]);const{data:b=[],isLoading:Q}=T({queryKey:["/api/marketing/campaigns"]}),{data:C=[],isLoading:W}=T({queryKey:["/api/marketing/lead-sources"]}),{data:k=[],isLoading:_}=T({queryKey:["/api/business-development/partnerships"]}),[t,c]=$.useState({company:"",contact:"",email:"",phone:"",value:"",notes:""}),L=se({mutationFn:async a=>{const x=await fetch("/api/crm/leads",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({companyName:a.company,contactPerson:a.contact,email:a.email,phone:a.phone,estimatedValue:a.value,notes:a.notes,status:"new",source:"manual"}),credentials:"include"});if(!x.ok)throw new Error("Failed to create lead");return await x.json()},onSuccess:()=>{le.invalidateQueries({queryKey:["/api/crm/leads"]}),n({title:"Success",description:"Lead added successfully!"}),p(!1),c({company:"",contact:"",email:"",phone:"",value:"",notes:""})},onError:a=>{n({title:"Note",description:a.message||"Lead creation endpoint not yet implemented. This is a UI demonstration.",variant:"default"}),p(!1)}});if(h||!o)return e.jsx("div",{className:"h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full","data-testid":"loading-crm"})});const X=[{id:"1",name:"TechStartup Inc",contact:"John Smith",value:"£25,000",status:"hot",source:"Website"},{id:"2",name:"RetailCorp",contact:"Sarah Wilson",value:"£15,000",status:"warm",source:"Referral"},{id:"3",name:"ManufacturingLtd",contact:"Mike Johnson",value:"£50,000",status:"cold",source:"Cold Call"}],G=b.filter(a=>a.status==="active"||a.status==="scheduled"),S=C.filter(a=>a.isActive),f=C.reduce((a,x)=>a+x.totalLeads,0),P=C.reduce((a,x)=>a+x.qualifiedLeads,0),Z=f>0?(P/f*100).toFixed(1):"0.0",q=S.map(a=>({name:a.name,total:a.totalLeads,qualified:a.qualifiedLeads,conversion:a.conversionRate?parseFloat(a.conversionRate):0})),z=b.slice(0,6).map(a=>({name:a.name.substring(0,15),budget:parseFloat(a.budget||"0"),spend:parseFloat(a.actualSpend||"0"),efficiency:a.actualSpend?((parseFloat(a.budget)-parseFloat(a.actualSpend))/parseFloat(a.budget)*100).toFixed(1):100}));return e.jsx(ne,{title:"CRM Management",breadcrumbs:[{label:"Operations",href:"/operations-management"},{label:"CRM Management"}],children:e.jsxs("div",{className:"space-y-6 bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 min-h-screen p-4 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:"Customer Relationship Management"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Integrated lead generation, sales pipeline, and customer success with marketing & partnerships"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(d,{variant:"outline","data-testid":"button-crm-reports",onClick:()=>n({title:"CRM Reports",description:"Sales analytics and reporting coming soon!"}),children:[e.jsx(re,{className:"mr-2 h-4 w-4"}),"Sales Reports"]}),e.jsxs(ce,{open:N,onOpenChange:p,children:[e.jsx(oe,{asChild:!0,children:e.jsxs(d,{className:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600","data-testid":"button-add-lead",children:[e.jsx(pe,{className:"mr-2 h-4 w-4"}),"Add Lead"]})}),e.jsxs(xe,{className:"bg-white dark:bg-gray-800",children:[e.jsx(me,{children:e.jsx(ge,{className:"text-gray-900 dark:text-white",children:"Add New Lead"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(u,{placeholder:"Company name...",value:t.company,onChange:a=>c({...t,company:a.target.value}),"data-testid":"input-lead-company",className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white"}),e.jsx(u,{placeholder:"Contact person...",value:t.contact,onChange:a=>c({...t,contact:a.target.value}),"data-testid":"input-lead-contact",className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white"}),e.jsx(u,{placeholder:"Email...",type:"email",value:t.email,onChange:a=>c({...t,email:a.target.value}),"data-testid":"input-lead-email",className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white"}),e.jsx(u,{placeholder:"Phone...",type:"tel",value:t.phone,onChange:a=>c({...t,phone:a.target.value}),"data-testid":"input-lead-phone",className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white"}),e.jsx(u,{placeholder:"Estimated value...",value:t.value,onChange:a=>c({...t,value:a.target.value}),"data-testid":"input-lead-value",className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white"}),e.jsx(he,{placeholder:"Notes...",value:t.notes,onChange:a=>c({...t,notes:a.target.value}),"data-testid":"textarea-lead-notes",className:"bg-white dark:bg-gray-900 border-gray-200 dark:border-gray-700 text-gray-900 dark:text-white"}),e.jsx(d,{onClick:()=>L.mutate(t),disabled:L.isPending||!t.company||!t.contact,className:"w-full bg-blue-600 hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"button-submit-lead",children:L.isPending?"Creating...":"Add Lead"})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(s,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700","data-testid":"card-total-leads",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Total Leads"}),e.jsx(be,{className:"h-4 w-4 text-blue-600 dark:text-blue-400"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white","data-testid":"text-total-leads",children:f}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1","data-testid":"text-qualified-leads",children:[P," qualified"]})]})]}),e.jsxs(s,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700","data-testid":"card-conversion-rate",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Conversion Rate"}),e.jsx(ue,{className:"h-4 w-4 text-green-600 dark:text-green-400"})]}),e.jsxs(r,{children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900 dark:text-white","data-testid":"text-conversion-rate",children:[Z,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:f>0?"Based on lead sources":"No leads yet"})]})]}),e.jsxs(s,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700","data-testid":"card-active-campaigns",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Active Campaigns"}),e.jsx(H,{className:"h-4 w-4 text-purple-600 dark:text-purple-400"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white","data-testid":"text-active-campaigns",children:G.length}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1","data-testid":"text-total-campaigns",children:[b.length," total campaigns"]})]})]}),e.jsxs(s,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700","data-testid":"card-partnerships",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium text-gray-900 dark:text-white",children:"Partnerships"}),e.jsx(R,{className:"h-4 w-4 text-orange-600 dark:text-orange-400"})]}),e.jsxs(r,{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900 dark:text-white","data-testid":"text-partnerships-count",children:k.length}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1","data-testid":"text-active-partnerships",children:[k.filter(a=>a.status==="active").length," active"]})]})]})]}),e.jsxs(de,{defaultValue:"leads",className:"w-full",children:[e.jsxs(ie,{className:"bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 grid w-full grid-cols-5",children:[e.jsx(y,{value:"leads","data-testid":"tab-leads",children:"Leads"}),e.jsx(y,{value:"campaigns","data-testid":"tab-campaigns",children:"Campaigns"}),e.jsx(y,{value:"lead-sources","data-testid":"tab-lead-sources",children:"Lead Sources"}),e.jsx(y,{value:"partnerships","data-testid":"tab-partnerships",children:"Partnerships"}),e.jsx(y,{value:"analytics","data-testid":"tab-analytics",children:"Analytics"})]}),e.jsx(j,{value:"leads",className:"space-y-4",children:e.jsxs(s,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:[e.jsxs(i,{children:[e.jsx(l,{className:"text-gray-900 dark:text-white",children:"Lead Management"}),e.jsx(m,{className:"text-gray-600 dark:text-gray-400",children:"Track and convert leads into customers"})]}),e.jsx(r,{children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:X.map(a=>e.jsxs("div",{className:"p-4 border border-gray-200 dark:border-gray-700 rounded-lg bg-gray-50 dark:bg-gray-900","data-testid":`card-lead-${a.id}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white","data-testid":`lead-name-${a.id}`,children:a.name}),e.jsx(M,{className:`${a.status==="hot"?"bg-red-500 dark:bg-red-600":a.status==="warm"?"bg-yellow-500 dark:bg-yellow-600":"bg-blue-500 dark:bg-blue-600"} text-white`,"data-testid":`lead-status-${a.id}`,children:a.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Contact:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white","data-testid":`lead-contact-${a.id}`,children:a.contact})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Value:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white","data-testid":`lead-value-${a.id}`,children:a.value})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Source:"}),e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white","data-testid":`lead-source-${a.id}`,children:a.source})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx(d,{variant:"outline",size:"sm",className:"flex-1 border-gray-300 dark:border-gray-600","data-testid":`button-contact-lead-${a.id}`,onClick:()=>n({title:"Contact Lead",description:"Lead communication coming soon!"}),children:"Contact"}),e.jsx(d,{size:"sm",className:"flex-1 bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600 text-white","data-testid":`button-convert-lead-${a.id}`,onClick:()=>n({title:"Convert Lead",description:"Lead conversion coming soon!"}),children:"Convert"})]})]})]},a.id))})})]})}),e.jsxs(j,{value:"campaigns",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Marketing Campaigns"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"View and manage integrated marketing campaigns"})]}),e.jsx(g,{href:"/marketing-management",children:e.jsxs(d,{className:"bg-purple-600 hover:bg-purple-700 dark:bg-purple-500 dark:hover:bg-purple-600","data-testid":"button-manage-campaigns",children:[e.jsx(D,{className:"w-4 h-4 mr-2"}),"Manage Campaigns",e.jsx(A,{className:"w-4 h-4 ml-2"})]})})]}),Q?e.jsxs("div",{className:"text-center py-12","data-testid":"loading-campaigns",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-4",children:"Loading campaigns..."})]}):b.length===0?e.jsx(s,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"text-center py-8","data-testid":"empty-campaigns",children:[e.jsx(H,{className:"h-16 w-16 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Campaigns Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Create your first marketing campaign to start generating leads"}),e.jsx(g,{href:"/marketing-management",children:e.jsxs(d,{className:"bg-purple-600 hover:bg-purple-700 dark:bg-purple-500 dark:hover:bg-purple-600",children:[e.jsx(D,{className:"mr-2 h-4 w-4"}),"Create Campaign"]})})]})})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:b.map(a=>e.jsxs(s,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700","data-testid":`card-campaign-${a.id}`,children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(l,{className:"text-gray-900 dark:text-white","data-testid":`text-campaign-name-${a.id}`,children:a.name}),e.jsx(m,{className:"mt-1 capitalize","data-testid":`text-campaign-type-${a.id}`,children:a.campaignType.replace("_"," ")})]}),e.jsx(M,{className:`${a.status==="active"?"bg-green-500 dark:bg-green-600":a.status==="scheduled"?"bg-blue-500 dark:bg-blue-600":"bg-gray-500 dark:bg-gray-600"} text-white`,"data-testid":`badge-campaign-status-${a.id}`,children:a.status})]})}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Budget:"}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white","data-testid":`text-campaign-budget-${a.id}`,children:["$",Number(a.budget).toLocaleString()]})]}),a.actualSpend&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Spend:"}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white","data-testid":`text-campaign-spend-${a.id}`,children:["$",Number(a.actualSpend).toLocaleString()]})]}),a.targetAudience&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Audience:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white","data-testid":`text-campaign-audience-${a.id}`,children:a.targetAudience})]})]})})]},a.id))})]}),e.jsxs(j,{value:"lead-sources",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Lead Sources"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Track lead generation channels and conversion rates"})]}),e.jsx(g,{href:"/marketing-management",children:e.jsxs(d,{className:"bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600","data-testid":"button-manage-lead-sources",children:[e.jsx(B,{className:"w-4 h-4 mr-2"}),"Manage Sources",e.jsx(A,{className:"w-4 h-4 ml-2"})]})})]}),W?e.jsxs("div",{className:"text-center py-12","data-testid":"loading-lead-sources",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-4",children:"Loading lead sources..."})]}):S.length===0?e.jsx(s,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"text-center py-8","data-testid":"empty-lead-sources",children:[e.jsx(B,{className:"h-16 w-16 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Lead Sources Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Add lead sources to track where your customers come from"}),e.jsx(g,{href:"/marketing-management",children:e.jsxs(d,{className:"bg-green-600 hover:bg-green-700 dark:bg-green-500 dark:hover:bg-green-600",children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Add Lead Source"]})})]})})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:S.map(a=>e.jsxs(s,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700","data-testid":`card-lead-source-${a.id}`,children:[e.jsxs(i,{children:[e.jsx(l,{className:"text-gray-900 dark:text-white","data-testid":`text-source-name-${a.id}`,children:a.name}),e.jsx(m,{className:"capitalize","data-testid":`text-source-type-${a.id}`,children:a.sourceType.replace("_"," ")})]}),e.jsx(r,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Total Leads:"}),e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white","data-testid":`text-source-total-${a.id}`,children:a.totalLeads})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Qualified:"}),e.jsx("span",{className:"font-semibold text-green-600 dark:text-green-400","data-testid":`text-source-qualified-${a.id}`,children:a.qualifiedLeads})]}),a.conversionRate&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Conversion:"}),e.jsxs("span",{className:"font-semibold text-blue-600 dark:text-blue-400","data-testid":`text-source-conversion-${a.id}`,children:[parseFloat(a.conversionRate).toFixed(1),"%"]})]})]})})]},a.id))})]}),e.jsxs(j,{value:"partnerships",className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:"Business Partnerships"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Strategic partnerships and business relationships"})]}),e.jsx(g,{href:"/business-development",children:e.jsxs(d,{className:"bg-orange-600 hover:bg-orange-700 dark:bg-orange-500 dark:hover:bg-orange-600","data-testid":"button-manage-partnerships",children:[e.jsx(R,{className:"w-4 h-4 mr-2"}),"Manage Partnerships",e.jsx(A,{className:"w-4 h-4 ml-2"})]})})]}),_?e.jsxs("div",{className:"text-center py-12","data-testid":"loading-partnerships",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full mx-auto"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mt-4",children:"Loading partnerships..."})]}):k.length===0?e.jsx(s,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"text-center py-8","data-testid":"empty-partnerships",children:[e.jsx(R,{className:"h-16 w-16 text-gray-400 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-2",children:"No Partnerships Yet"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Build strategic partnerships to grow your business"}),e.jsx(g,{href:"/business-development",children:e.jsxs(d,{className:"bg-orange-600 hover:bg-orange-700 dark:bg-orange-500 dark:hover:bg-orange-600",children:[e.jsx(F,{className:"mr-2 h-4 w-4"}),"Add Partnership"]})})]})})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:k.map(a=>e.jsxs(s,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700","data-testid":`card-partnership-${a.id}`,children:[e.jsx(i,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(l,{className:"text-gray-900 dark:text-white","data-testid":`text-partnership-name-${a.id}`,children:a.partnerName}),e.jsx(m,{className:"mt-1 capitalize","data-testid":`text-partnership-type-${a.id}`,children:a.partnerType.replace("_"," ")})]}),e.jsx(M,{className:`${a.status==="active"?"bg-green-500 dark:bg-green-600":a.status==="negotiating"?"bg-yellow-500 dark:bg-yellow-600":"bg-gray-500 dark:bg-gray-600"} text-white`,"data-testid":`badge-partnership-status-${a.id}`,children:a.status})]})}),e.jsx(r,{children:a.contractValue&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-400",children:"Contract Value:"}),e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-white","data-testid":`text-partnership-value-${a.id}`,children:["$",Number(a.contractValue).toLocaleString()]})]})})]},a.id))})]}),e.jsxs(j,{value:"analytics",className:"space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-4",children:"CRM Analytics"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs(s,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700","data-testid":"card-lead-sources-chart",children:[e.jsxs(i,{children:[e.jsx(l,{className:"text-gray-900 dark:text-white",children:"Lead Sources Performance"}),e.jsx(m,{className:"text-gray-600 dark:text-gray-400",children:"Leads by source with conversion rates"})]}),e.jsx(r,{children:q.length>0?e.jsx(K,{width:"100%",height:300,"data-testid":"chart-lead-sources",children:e.jsxs(Y,{data:q,children:[e.jsx(E,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),e.jsx(O,{dataKey:"name",stroke:"#6b7280",tick:{fill:"#6b7280",fontSize:12}}),e.jsx(I,{stroke:"#6b7280",tick:{fill:"#6b7280",fontSize:12}}),e.jsx(V,{content:e.jsx(J,{})}),e.jsx(U,{wrapperStyle:{color:"#6b7280",fontSize:12}}),e.jsx(v,{dataKey:"total",fill:w[0],name:"Total Leads"}),e.jsx(v,{dataKey:"qualified",fill:w[1],name:"Qualified"})]})}):e.jsx("div",{className:"h-[300px] flex items-center justify-center text-gray-500 dark:text-gray-400","data-testid":"empty-lead-sources-chart",children:"No lead source data available"})})]}),e.jsxs(s,{className:"bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700","data-testid":"card-campaign-performance-chart",children:[e.jsxs(i,{children:[e.jsx(l,{className:"text-gray-900 dark:text-white",children:"Campaign Budget vs. Spend"}),e.jsx(m,{className:"text-gray-600 dark:text-gray-400",children:"Marketing campaign financial performance"})]}),e.jsx(r,{children:z.length>0?e.jsx(K,{width:"100%",height:300,"data-testid":"chart-campaign-performance",children:e.jsxs(Y,{data:z,children:[e.jsx(E,{strokeDasharray:"3 3",stroke:"#374151",opacity:.1}),e.jsx(O,{dataKey:"name",stroke:"#6b7280",tick:{fill:"#6b7280",fontSize:12}}),e.jsx(I,{stroke:"#6b7280",tick:{fill:"#6b7280",fontSize:12}}),e.jsx(V,{content:e.jsx(J,{})}),e.jsx(U,{wrapperStyle:{color:"#6b7280",fontSize:12}}),e.jsx(v,{dataKey:"budget",fill:w[4],name:"Budget"}),e.jsx(v,{dataKey:"spend",fill:w[3],name:"Actual Spend"})]})}):e.jsx("div",{className:"h-[300px] flex items-center justify-center text-gray-500 dark:text-gray-400","data-testid":"empty-campaign-performance-chart",children:"No campaign data available"})})]})]})]})]})]})})}export{_e as default};
