import{c as E,r as i,j as e,C as N,e as y,f as w,b as v,m as S,a as C,d as b,Z as z,a6 as ne,a7 as he,V as fe,a8 as pe,o as je,l as K,n as Q,z as ge,F as Z,X as ve,g as U,i as ie,a4 as be,J as Ne,K as ye,N as B,S as we,O as V,a1 as ke}from"./index-aBzEQGYq.js";import{D as R,b as D,c as I,d as _,e as $,f as Ce,a as Se}from"./dialog-23jdk0P0.js";import{P as L}from"./progress-XR5_hdtt.js";import{A as O}from"./activity-Bt7QQFFp.js";import{H as Te}from"./hard-drive-BEK1FG92.js";import{C as re}from"./clock-Dcf5yqqC.js";import{M as ee,a as W}from"./mic-DTFJf1um.js";import{V as Me}from"./volume-2-vS4RWH9x.js";import{F as q,C as H}from"./fingerprint-DIrK1d7n.js";import{E as te}from"./eye-BznRa7X0.js";import{S as Ee,C as Ae}from"./shield-check-DrJu6eCf.js";import{C as Pe}from"./circle-check-big-DoRqGQom.js";import{S as ce}from"./star-Bqtboh28.js";import{C as Le}from"./calendar-B5qd1N74.js";import{M as G}from"./map-pin-D49hIz5W.js";import{T as Oe}from"./target-kE2L6cy0.js";import{A as Re}from"./award-DPr5G0__.js";import{T as De}from"./trending-up-EJ-1Wo56.js";import"./index-r-q9YERm.js";import"./Combination-D-0K7YMg.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=E("BatteryLow",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}],["line",{x1:"6",x2:"6",y1:"11",y2:"13",key:"1wd6dw"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=E("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=E("CameraOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16",key:"qmtpty"}],["path",{d:"M9.5 4h5L17 7h3a2 2 0 0 1 2 2v7.5",key:"1ufyfc"}],["path",{d:"M14.121 15.121A3 3 0 1 1 9.88 10.88",key:"11zox6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=E("ChartNoAxesColumnIncreasing",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=E("ShieldX",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _e=E("SwitchCamera",[["path",{d:"M11 19H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h5",key:"mtk2lu"}],["path",{d:"M13 5h7a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-5",key:"120jsl"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["path",{d:"m18 22-3-3 3-3",key:"kgdoj7"}],["path",{d:"m6 2 3 3-3 3",key:"1fnbkv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $e=E("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=E("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]),oe=i.createContext(null);function He({children:t}){const[c,n]=i.useState({isVoiceControlActive:!1,isCameraOpen:!1,isNotificationsPanelOpen:!1,isBiometricSetupOpen:!1,currentVoiceCommand:null,mobileFeatureErrors:[]}),s=i.useCallback(()=>{n(h=>({...h,isVoiceControlActive:!h.isVoiceControlActive}))},[]),a=i.useCallback(()=>{n(h=>({...h,isCameraOpen:!0}))},[]),l=i.useCallback(()=>{n(h=>({...h,isCameraOpen:!1}))},[]),o=i.useCallback(()=>{n(h=>({...h,isNotificationsPanelOpen:!0}))},[]),m=i.useCallback(()=>{n(h=>({...h,isNotificationsPanelOpen:!1}))},[]),r=i.useCallback(()=>{n(h=>({...h,isBiometricSetupOpen:!0}))},[]),u=i.useCallback(()=>{n(h=>({...h,isBiometricSetupOpen:!1}))},[]),d=i.useCallback(h=>{n(j=>({...j,currentVoiceCommand:h})),setTimeout(()=>{n(j=>({...j,currentVoiceCommand:null}))},100)},[]),x=i.useCallback(h=>{n(j=>({...j,mobileFeatureErrors:[...j.mobileFeatureErrors,h]}))},[]),p=i.useCallback(()=>{n(h=>({...h,mobileFeatureErrors:[]}))},[]),f={...c,toggleVoiceControl:s,openCamera:a,closeCamera:l,openNotifications:o,closeNotifications:m,openBiometricSetup:r,closeBiometricSetup:u,executeVoiceCommand:d,addError:x,clearErrors:p};return e.jsx(oe.Provider,{value:f,children:t})}function J(){const t=i.useContext(oe);if(!t)throw new Error("useMobileIntegration must be used within a MobileIntegrationProvider");return t}function Ue(){const{currentVoiceCommand:t,openCamera:c,openNotifications:n,openBiometricSetup:s,addError:a}=J(),[l,o]=i.useState(!1);i.useEffect(()=>{t&&!l&&m(t)},[t,l]);const m=i.useCallback(async r=>{o(!0);try{switch(r){case"open_camera":case"take_photo":case"capture_image":c();break;case"show_notifications":case"view_notifications":case"open_notifications":n();break;case"biometric_setup":case"setup_fingerprint":case"setup_biometric":s();break;case"clock_in":window.dispatchEvent(new CustomEvent("mobile-clock-action",{detail:{action:"in"}}));break;case"clock_out":window.dispatchEvent(new CustomEvent("mobile-clock-action",{detail:{action:"out"}}));break;case"show_jobs":case"navigate_jobs":window.location.href="/jobs";break;case"show_schedule":case"navigate_schedule":window.location.href="/schedule";break;case"navigate_dashboard":case"go_home":window.location.href="/";break;default:a(`Voice command not recognized: ${r}`)}}catch(u){console.error("Voice command execution error:",u),a(`Failed to execute voice command: ${r}`)}finally{o(!1)}},[c,n,s,a]);return{isProcessing:l,handleVoiceCommand:m}}function Ye(){const[t,c]=i.useState({isListening:!1,isSupported:!1,transcript:"",confidence:0,lastCommand:null}),n=i.useRef(null);i.useEffect(()=>{const m=window.SpeechRecognition||window.webkitSpeechRecognition;return c(r=>({...r,isSupported:!!m})),()=>{n.current&&(n.current.stop(),n.current=null)}},[]);const s=i.useCallback(()=>{const m=window.SpeechRecognition||window.webkitSpeechRecognition;if(!m||n.current)return;const r=new m;r.continuous=!1,r.interimResults=!0,r.lang="en-US",r.onstart=()=>{c(u=>({...u,isListening:!0}))},r.onresult=u=>{const d=u.results[u.results.length-1],x=d[0].transcript,p=d[0].confidence;if(c(f=>({...f,transcript:x,confidence:p})),d.isFinal){const f=l(x);c(h=>({...h,lastCommand:f}))}},r.onerror=u=>{console.error("Speech recognition error:",u.error),c(d=>({...d,isListening:!1})),n.current=null},r.onend=()=>{c(u=>({...u,isListening:!1})),n.current=null},n.current=r,r.start()},[]),a=i.useCallback(()=>{n.current&&(n.current.stop(),n.current.abort(),n.current=null),c(m=>({...m,isListening:!1}))},[]),l=m=>{const r=m.toLowerCase().trim(),u=[{pattern:/clock in|start work|begin shift/,action:"clock_in"},{pattern:/clock out|end work|finish shift/,action:"clock_out"},{pattern:/show jobs|find jobs|view jobs/,action:"show_jobs"},{pattern:/show schedule|view schedule|my schedule/,action:"show_schedule"},{pattern:/navigate to dashboard|go to dashboard/,action:"navigate_dashboard"},{pattern:/take photo|capture image|open camera/,action:"open_camera"},{pattern:/show notifications|view notifications/,action:"show_notifications"}];for(const d of u)if(d.pattern.test(r))return{command:r,action:d.action,confidence:.8};return null},o=i.useCallback(m=>{if("speechSynthesis"in window){const r=new SpeechSynthesisUtterance(m);r.rate=1,r.pitch=1,r.volume=1,speechSynthesis.speak(r)}},[]);return{...t,startListening:s,stopListening:a,speak:o}}function Xe(){const[t,c]=i.useState({isOpen:!1,stream:null,isSupported:!1,facingMode:"environment"});i.useEffect(()=>{const o=!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia);c(m=>({...m,isSupported:o}))},[]);const n=i.useCallback(async(o="environment")=>{if(!t.isSupported)return!1;try{const m={video:{facingMode:o,width:{ideal:1920},height:{ideal:1080}},audio:!1},r=await navigator.mediaDevices.getUserMedia(m);return c(u=>({...u,isOpen:!0,stream:r,facingMode:o})),!0}catch(m){return console.error("Camera access error:",m),!1}},[t.isSupported]),s=i.useCallback(()=>{t.stream&&t.stream.getTracks().forEach(o=>o.stop()),c(o=>({...o,isOpen:!1,stream:null}))},[t.stream]),a=i.useCallback(()=>new Promise(o=>{if(!t.stream){o(null);return}const m=document.createElement("video");m.srcObject=t.stream,m.play(),m.onloadedmetadata=()=>{const r=document.createElement("canvas");r.width=m.videoWidth,r.height=m.videoHeight;const u=r.getContext("2d");u?(u.drawImage(m,0,0),r.toBlob(d=>{o(d)},"image/jpeg",.8)):o(null)}}),[t.stream]),l=i.useCallback(()=>{const o=t.facingMode==="user"?"environment":"user";s(),setTimeout(()=>n(o),100)},[t.facingMode,s,n]);return{...t,openCamera:n,closeCamera:s,capturePhoto:a,switchCamera:l}}function qe(){const[t,c]=i.useState({isSupported:!1,isEnrolled:!1,type:"none"});i.useEffect(()=>{n()},[]);const n=i.useCallback(async()=>{if("credentials"in navigator&&"create"in navigator.credentials)try{const l=await navigator.credentials.create({publicKey:{challenge:new Uint8Array(32),rp:{name:"Kin2 Workforce"},user:{id:new Uint8Array(16),name:"test@example.com",displayName:"Test User"},pubKeyCredParams:[{alg:-7,type:"public-key"}],timeout:6e4,attestation:"direct",authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required"}}});c({isSupported:!0,isEnrolled:!!l,type:"fingerprint"})}catch(l){const o=l.name!=="NotSupportedError";c({isSupported:o,isEnrolled:!1,type:o?"fingerprint":"none"})}},[]),s=i.useCallback(async()=>{if(!t.isSupported)return!1;try{return!!await navigator.credentials.get({publicKey:{challenge:new Uint8Array(32),timeout:6e4,userVerification:"required"}})}catch(l){return console.error("Biometric authentication failed:",l),!1}},[t.isSupported]),a=i.useCallback(async()=>{if(!t.isSupported)return!1;try{return await navigator.credentials.create({publicKey:{challenge:new Uint8Array(32),rp:{name:"Kin2 Workforce"},user:{id:new Uint8Array(16),name:"user@example.com",displayName:"User"},pubKeyCredParams:[{alg:-7,type:"public-key"}],timeout:6e4,authenticatorSelection:{authenticatorAttachment:"platform",userVerification:"required"}}})?(c(o=>({...o,isEnrolled:!0})),!0):!1}catch(l){return console.error("Biometric enrollment failed:",l),!1}},[t.isSupported]);return{...t,authenticate:s,enroll:a}}function Ge(){const[t,c]=i.useState({hasVibration:!1,hasBattery:!1,hasOrientation:!1,hasMotion:!1,hasProximity:!1,hasAmbientLight:!1,connectionType:"unknown",deviceMemory:0,hardwareConcurrency:0});return i.useEffect(()=>{(()=>{var a;const s={hasVibration:"vibrate"in navigator,hasBattery:"getBattery"in navigator,hasOrientation:"orientation"in screen,hasMotion:"DeviceMotionEvent"in window,hasProximity:"ProximitySensor"in window,hasAmbientLight:"AmbientLightSensor"in window,connectionType:((a=navigator.connection)==null?void 0:a.effectiveType)||"unknown",deviceMemory:navigator.deviceMemory||0,hardwareConcurrency:navigator.hardwareConcurrency||0};c(s)})()},[]),t}function M(){const t=i.useCallback(o=>{"vibrate"in navigator&&navigator.vibrate(o)},[]),c=i.useCallback(()=>t(50),[t]),n=i.useCallback(()=>t([50,100,50]),[t]),s=i.useCallback(()=>t(200),[t]),a=i.useCallback(()=>t([100,50,100]),[t]),l=i.useCallback(()=>t([200,100,200,100,200]),[t]);return{vibrate:t,lightTap:c,doubleTap:n,longPress:s,success:a,error:l}}function Ke(){const[t,c]=i.useState({acceleration:{x:0,y:0,z:0},rotationRate:{alpha:0,beta:0,gamma:0},orientation:{alpha:0,beta:0,gamma:0},isSupported:!1});return i.useEffect(()=>{const n=a=>{a.acceleration&&c(l=>{var o,m,r,u,d,x;return{...l,acceleration:{x:((o=a.acceleration)==null?void 0:o.x)||0,y:((m=a.acceleration)==null?void 0:m.y)||0,z:((r=a.acceleration)==null?void 0:r.z)||0},rotationRate:{alpha:((u=a.rotationRate)==null?void 0:u.alpha)||0,beta:((d=a.rotationRate)==null?void 0:d.beta)||0,gamma:((x=a.rotationRate)==null?void 0:x.gamma)||0},isSupported:!0}})},s=a=>{c(l=>({...l,orientation:{alpha:a.alpha||0,beta:a.beta||0,gamma:a.gamma||0}}))};return"DeviceMotionEvent"in window&&window.addEventListener("devicemotion",n),"DeviceOrientationEvent"in window&&window.addEventListener("deviceorientation",s),()=>{window.removeEventListener("devicemotion",n),window.removeEventListener("deviceorientation",s)}},[]),t}function Qe({children:t,onSwipeLeft:c,onSwipeRight:n,onSwipeUp:s,onSwipeDown:a,threshold:l=50,className:o=""}){const[m,r]=i.useState({startX:0,startY:0,currentX:0,currentY:0,deltaX:0,deltaY:0,isActive:!1,velocity:0,direction:null}),{lightTap:u}=M(),d=i.useRef(null),x=h=>{const j=h.touches[0];r({startX:j.clientX,startY:j.clientY,currentX:j.clientX,currentY:j.clientY,deltaX:0,deltaY:0,isActive:!0,velocity:0,direction:null})},p=h=>{if(!m.isActive)return;const j=h.touches[0],g=j.clientX-m.startX,T=j.clientY-m.startY;r(A=>({...A,currentX:j.clientX,currentY:j.clientY,deltaX:g,deltaY:T}))},f=()=>{if(!m.isActive)return;const h=Math.abs(m.deltaX),j=Math.abs(m.deltaY);(h>l||j>l)&&(u(),h>j?m.deltaX>0?n==null||n():c==null||c():m.deltaY>0?a==null||a():s==null||s()),r(g=>({...g,isActive:!1}))};return e.jsx("div",{ref:d,className:o,onTouchStart:x,onTouchMove:p,onTouchEnd:f,style:{touchAction:"pan-y"},children:t})}function Je({children:t,onRefresh:c,refreshThreshold:n=80,className:s=""}){const[a,l]=i.useState(!1),[o,m]=i.useState(0),[r,u]=i.useState(0),d=i.useRef(null),{success:x}=M(),p=g=>{var T;((T=d.current)==null?void 0:T.scrollTop)===0&&u(g.touches[0].clientY)},f=g=>{var T;if(r&&((T=d.current)==null?void 0:T.scrollTop)===0&&!a){const A=g.touches[0].clientY,P=Math.max(0,A-r);m(P),P>0&&g.preventDefault()}},h=async()=>{if(o>n&&!a){l(!0),x();try{await c()}finally{l(!1),m(0),u(0)}}else m(0),u(0)},j=Math.min(o/n,1);return e.jsxs("div",{ref:d,className:`relative overflow-auto ${s}`,onTouchStart:p,onTouchMove:f,onTouchEnd:h,children:[(o>0||a)&&e.jsx("div",{className:"absolute top-0 left-0 right-0 flex items-center justify-center z-10 bg-primary/10 transition-all duration-200",style:{height:Math.max(o*.8,a?60:0),transform:`translateY(${a?0:-20}px)`},children:e.jsx("div",{className:"flex items-center space-x-2 text-primary",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-primary border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-sm font-medium",children:"Refreshing..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-primary rounded-full transition-transform",style:{transform:`rotate(${j*180}deg)`,borderTopColor:j>=1?"transparent":"currentColor"}}),e.jsx("span",{className:"text-sm font-medium",children:j>=1?"Release to refresh":"Pull to refresh"})]})})}),e.jsx("div",{style:{transform:`translateY(${Math.min(o*.5,40)}px)`,transition:a?"transform 0.2s ease-out":"none"},children:t})]})}function F({children:t,onDoubleTap:c,delay:n=300,className:s=""}){const[a,l]=i.useState(0),{doubleTap:o}=M(),m=()=>{const r=Date.now();r-a<n&&(o(),c()),l(r)};return e.jsx("div",{className:s,onClick:m,children:t})}function Ze(){const[t,c]=i.useState({memoryUsage:0,connectionSpeed:0,batteryLevel:0,isCharging:!1,loadTime:0,renderTime:0,apiLatency:0,cacheHitRate:0}),[n,s]=i.useState({effectiveType:"unknown",downlink:0,rtt:0,saveData:!1}),[a,l]=i.useState(!1);Ge(),i.useEffect(()=>{const u=async()=>{try{if("memory"in performance){const x=performance.memory,p=x.usedJSHeapSize/x.jsHeapSizeLimit*100;c(f=>({...f,memoryUsage:p}))}if("getBattery"in navigator){const x=await navigator.getBattery();c(p=>({...p,batteryLevel:Math.round(x.level*100),isCharging:x.charging}))}if("connection"in navigator){const x=navigator.connection;s({effectiveType:x.effectiveType||"unknown",downlink:x.downlink||0,rtt:x.rtt||0,saveData:x.saveData||!1})}const d=performance.now();try{await fetch("/api/health");const x=performance.now();c(p=>({...p,apiLatency:x-d}))}catch(x){console.error("API latency test failed:",x)}"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"GET_CACHE_STATS"})}catch(d){console.error("Performance monitoring error:",d)}};if(a){u();const d=setInterval(u,5e3);return()=>clearInterval(d)}},[a]),i.useEffect(()=>{const u=d=>{d.data.type==="CACHE_STATS"&&c(x=>({...x,cacheHitRate:d.data.hitRate||0}))};if("serviceWorker"in navigator)return navigator.serviceWorker.addEventListener("message",u),()=>{navigator.serviceWorker.removeEventListener("message",u)}},[]);const o=i.useCallback(async()=>{if("caches"in window){const d=(await caches.keys()).filter(x=>!x.includes("kin2-workforce")||x.includes("old")||x.includes("temp"));await Promise.all(d.map(x=>caches.delete(x)))}"gc"in window&&window.gc(),a&&setTimeout(()=>window.location.reload(),1e3)},[a]),r=(()=>{const u=[Math.max(0,100-t.memoryUsage),t.apiLatency<100?100:Math.max(0,100-(t.apiLatency-100)/10),t.cacheHitRate,n.effectiveType==="4g"?100:n.effectiveType==="3g"?60:30];return Math.round(u.reduce((d,x)=>d+x,0)/u.length)})();return e.jsxs(N,{children:[e.jsxs(y,{children:[e.jsxs(w,{className:"text-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"w-5 h-5 mr-2"}),"Performance Monitor"]}),e.jsxs(v,{variant:r>=80?"default":r>=60?"secondary":"destructive",children:["Score: ",r]})]}),e.jsx(S,{children:"Real-time mobile app performance metrics"})]}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Monitoring"}),e.jsx(b,{size:"sm",variant:a?"destructive":"default",onClick:()=>l(!a),"data-testid":"button-toggle-monitoring",children:a?"Stop":"Start"})]}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Te,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:"Memory Usage"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.memoryUsage.toFixed(1),"%"]})]}),e.jsx(L,{value:t.memoryUsage,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[t.batteryLevel<20?e.jsx(Be,{className:"w-4 h-4 mr-2 text-red-500"}):e.jsx(Ve,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:"Battery"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[t.isCharging&&e.jsx(z,{className:"w-3 h-3 text-green-500"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.batteryLevel,"%"]})]})]}),e.jsx(L,{value:t.batteryLevel,className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[navigator.onLine?e.jsx(ne,{className:"w-4 h-4 mr-2 text-green-500"}):e.jsx(he,{className:"w-4 h-4 mr-2 text-red-500"}),e.jsx("span",{className:"text-sm",children:"Network"})]}),e.jsx(v,{variant:"outline",className:"text-xs",children:n.effectiveType.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"Downlink:"}),e.jsxs("span",{children:[n.downlink," Mbps"]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-muted-foreground",children:"RTT:"}),e.jsxs("span",{children:[n.rtt," ms"]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(re,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:"API Latency"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.apiLatency.toFixed(1)," ms"]})]}),e.jsx(L,{value:Math.min(100,(200-t.apiLatency)/2),className:"h-2"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(fe,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"text-sm",children:"Cache Hit Rate"})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.cacheHitRate.toFixed(1),"%"]})]}),e.jsx(L,{value:t.cacheHitRate,className:"h-2"})]}),e.jsx("div",{className:"pt-4 border-t",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs(b,{size:"sm",variant:"outline",onClick:o,"data-testid":"button-optimize-performance",children:[e.jsx(z,{className:"w-4 h-4 mr-2"}),"Optimize"]}),e.jsxs(b,{size:"sm",variant:"outline",onClick:()=>window.location.reload(),"data-testid":"button-refresh-app",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Refresh"]})]})})]})]})]})}function et(){const[t,c]=i.useState({dataSaver:!1,preloadEnabled:!0,compressionEnabled:!0}),n=i.useCallback(()=>{const s=!t.dataSaver;c(a=>({...a,dataSaver:s})),s?document.documentElement.classList.add("data-saver"):document.documentElement.classList.remove("data-saver"),localStorage.setItem("mobile-data-saver",s.toString())},[t.dataSaver]);return i.useEffect(()=>{const s=localStorage.getItem("mobile-data-saver")==="true";c(a=>({...a,dataSaver:s})),s&&document.documentElement.classList.add("data-saver")},[]),e.jsxs(N,{children:[e.jsxs(y,{children:[e.jsxs(w,{className:"text-lg flex items-center",children:[e.jsx(ne,{className:"w-5 h-5 mr-2"}),"Network Optimization"]}),e.jsx(S,{children:"Optimize app performance for your connection"})]}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Data Saver Mode"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Reduce data usage and improve performance"})]}),e.jsx(b,{size:"sm",variant:t.dataSaver?"default":"outline",onClick:n,"data-testid":"button-toggle-data-saver",children:t.dataSaver?"On":"Off"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Image Compression"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Compress images for faster loading"})]}),e.jsx(v,{variant:"secondary",children:"Auto"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Preload Critical Resources"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Load important content in advance"})]}),e.jsx(v,{variant:"default",children:"Enabled"})]})]}),t.dataSaver&&e.jsx("div",{className:"p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-200",children:"Data Saver mode is active. Images and videos will be compressed, and background updates will be reduced."})})]})]})}function tt(){const[,t]=pe(),c=je(),{isListening:n,isSupported:s,transcript:a,lastCommand:l,startListening:o,stopListening:m,speak:r}=Ye(),{executeVoiceCommand:u}=J();Ue();const[d,x]=i.useState(!1),p=K({mutationFn:async g=>Q("POST","/api/mobile/clock",{action:g}),onSuccess:()=>{c.invalidateQueries({queryKey:["/api/mobile/data"]})}});i.useEffect(()=>{const g=T=>{const{action:A}=T.detail;p.mutate(A)};return window.addEventListener("mobile-clock-action",g),()=>{window.removeEventListener("mobile-clock-action",g)}},[p]),i.useEffect(()=>{l&&d&&(u(l.action),f(l.action))},[l,d,u]);const f=async g=>{switch(g){case"clock_in":r("Clocking you in now"),await p.mutateAsync("in"),r("Successfully clocked in");break;case"clock_out":r("Clocking you out now"),await p.mutateAsync("out"),r("Successfully clocked out");break;case"show_jobs":r("Navigating to jobs page"),t("/jobs");break;case"show_schedule":r("Showing your schedule"),t("/schedule");break;case"navigate_dashboard":r("Going to dashboard"),t("/");break;case"open_camera":r("Opening camera for photo capture");break;case"show_notifications":r("Showing notifications");break;default:r("Command not recognized")}},h=()=>{n?m():o()},j=()=>{x(!d),r(d?"Voice control disabled":"Voice control enabled")};return s?e.jsxs(N,{children:[e.jsxs(y,{children:[e.jsxs(w,{className:"text-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"w-5 h-5 mr-2"}),"Voice Control"]}),e.jsx(v,{variant:d?"default":"secondary",children:d?"Enabled":"Disabled"})]}),e.jsx(S,{children:"Control the app with voice commands"})]}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs(b,{onClick:j,variant:d?"default":"outline",className:"flex-1","data-testid":"button-toggle-voice-control",children:[d?e.jsx(Me,{className:"w-4 h-4 mr-2"}):e.jsx(We,{className:"w-4 h-4 mr-2"}),d?"Disable":"Enable"]}),d&&e.jsx(b,{onClick:h,variant:n?"destructive":"secondary",disabled:!d,"data-testid":"button-voice-listen",children:n?e.jsx(ee,{className:"w-4 h-4"}):e.jsx(W,{className:"w-4 h-4"})})]}),d&&e.jsxs(e.Fragment,{children:[n&&e.jsxs("div",{className:"p-3 bg-blue-50 dark:bg-blue-950 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-800 dark:text-blue-200",children:"Listening..."}),e.jsx("div",{className:"flex space-x-1",children:[1,2,3].map(g=>e.jsx("div",{className:"w-1 h-4 bg-blue-500 rounded animate-pulse",style:{animationDelay:`${g*.2}s`}},g))})]}),a&&e.jsxs("p",{className:"text-sm text-blue-700 dark:text-blue-300",children:['"',a,'"']})]}),l&&e.jsxs("div",{className:"p-3 bg-green-50 dark:bg-green-950 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Last Command"}),e.jsxs(v,{variant:"secondary",children:[Math.round(l.confidence*100),"% confident"]})]}),e.jsxs("p",{className:"text-sm text-green-700 dark:text-green-300 mt-1",children:['"',l.command,'" â†’ ',l.action.replace("_"," ")]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Available Commands:"}),e.jsxs("div",{className:"grid grid-cols-1 gap-2 text-xs text-muted-foreground",children:[e.jsx("div",{children:'"Clock in" or "Start work"'}),e.jsx("div",{children:'"Clock out" or "End work"'}),e.jsx("div",{children:'"Show jobs" or "View jobs"'}),e.jsx("div",{children:'"Show schedule" or "My schedule"'}),e.jsx("div",{children:'"Go to dashboard"'}),e.jsx("div",{children:'"Take photo" or "Open camera"'}),e.jsx("div",{children:'"Show notifications"'})]})]})]})]})]}):e.jsx(N,{children:e.jsxs(y,{children:[e.jsxs(w,{className:"text-lg flex items-center",children:[e.jsx(ee,{className:"w-5 h-5 mr-2"}),"Voice Control"]}),e.jsx(S,{children:"Voice control is not supported on this device"})]})})}function se(){const[t,c]=i.useState(!1),[n,s]=i.useState(!1),{isSupported:a,isEnrolled:l,type:o,enroll:m}=qe(),{success:r,error:u}=M();i.useEffect(()=>{const f=localStorage.getItem("biometric-auth-enabled");c(f==="true"&&l)},[l]);const d=K({mutationFn:async f=>Q("POST","/api/mobile/biometric",{enabled:f}),onSuccess:()=>{r()},onError:()=>{u()}}),x=async f=>{if(f&&!l){s(!0);return}c(f),localStorage.setItem("biometric-auth-enabled",f.toString()),await d.mutateAsync(f)},p=async()=>{await m()?(c(!0),s(!1),localStorage.setItem("biometric-auth-enabled","true"),await d.mutateAsync(!0),r()):u()};return a?e.jsxs(e.Fragment,{children:[e.jsxs(N,{children:[e.jsxs(y,{children:[e.jsxs(w,{className:"text-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[o==="fingerprint"?e.jsx(q,{className:"w-5 h-5 mr-2"}):e.jsx(te,{className:"w-5 h-5 mr-2"}),"Biometric Authentication"]}),e.jsx(v,{variant:t?"default":"secondary",children:t?"Enabled":"Disabled"})]}),e.jsxs(S,{children:["Use ",o==="fingerprint"?"fingerprint":"face recognition"," to secure your account"]})]}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:"Enable Biometric Login"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:l?"Quick and secure access to your account":"Set up biometric authentication first"})]}),e.jsx(ge,{checked:t,onCheckedChange:x,disabled:d.isPending,"data-testid":"switch-biometric-auth"})]}),!l&&e.jsxs(b,{onClick:()=>s(!0),className:"w-full","data-testid":"button-setup-biometric",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Set Up Biometric Authentication"]}),t&&l&&e.jsx("div",{className:"p-3 bg-green-50 dark:bg-green-950 rounded-lg",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(Ee,{className:"w-5 h-5 text-green-600 mr-2"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800 dark:text-green-200",children:"Biometric Authentication Active"}),e.jsxs("p",{className:"text-xs text-green-600 dark:text-green-400",children:["Your account is protected with ",o," authentication"]})]})]})})]})]}),e.jsx(R,{open:n,onOpenChange:s,children:e.jsxs(D,{children:[e.jsxs(I,{children:[e.jsx(_,{children:"Set Up Biometric Authentication"}),e.jsxs($,{children:["Secure your account with ",o==="fingerprint"?"fingerprint":"face"," authentication"]})]}),e.jsx("div",{className:"py-6",children:e.jsxs("div",{className:"text-center space-y-4",children:[o==="fingerprint"?e.jsx(q,{className:"w-16 h-16 mx-auto text-primary"}):e.jsx(te,{className:"w-16 h-16 mx-auto text-primary"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-medium",children:["Enable ",o==="fingerprint"?"Fingerprint":"Face"," Authentication"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:o==="fingerprint"?"Place your finger on the sensor when prompted":"Look at your device camera when prompted"})]})]})}),e.jsxs(Ce,{children:[e.jsx(b,{variant:"outline",onClick:()=>s(!1),"data-testid":"button-cancel-biometric",children:"Cancel"}),e.jsxs(b,{onClick:p,"data-testid":"button-enroll-biometric",children:[e.jsx(Z,{className:"w-4 h-4 mr-2"}),"Set Up Now"]})]})]})})]}):e.jsx(N,{children:e.jsxs(y,{children:[e.jsxs(w,{className:"text-lg flex items-center",children:[e.jsx(Ie,{className:"w-5 h-5 mr-2"}),"Biometric Authentication"]}),e.jsx(S,{children:"Biometric authentication is not supported on this device"})]})})}function ae({onPhotoCapture:t,jobId:c,shiftId:n}){const s=i.useRef(null),a=i.useRef(null),[l,o]=i.useState(!1),[m,r]=i.useState(null),[u,d]=i.useState(null),{isOpen:x,stream:p,isSupported:f,facingMode:h,openCamera:j,closeCamera:g,capturePhoto:T,switchCamera:A}=Xe(),{lightTap:P,success:le}=M();i.useEffect(()=>{s.current&&p&&(s.current.srcObject=p,s.current.play())},[p]),i.useEffect(()=>{l||(g(),r(null),d(null))},[l,g]);const Y=K({mutationFn:async k=>{const X=c?`/api/jobs/${c}/photo`:n?`/api/shifts/${n}/photo`:"/api/mobile/photo";return Q("POST",X,k)},onSuccess:()=>{le()}}),de=async()=>{P(),await j()||alert("Unable to access camera. Please check permissions.")},me=async()=>{P();const k=await T();if(k){const X=URL.createObjectURL(k);r(X),d(k),t&&t(k)}},ue=async()=>{if(!u)return;const k=new FormData;k.append("photo",u,"captured-photo.jpg"),k.append("jobId",c||""),k.append("shiftId",n||""),k.append("timestamp",new Date().toISOString()),await Y.mutateAsync(k),o(!1)},xe=()=>{P(),r(null),d(null)};return f?e.jsxs(R,{open:l,onOpenChange:o,children:[e.jsx(Se,{asChild:!0,children:e.jsxs(b,{variant:"outline","data-testid":"button-open-camera",children:[e.jsx(H,{className:"w-4 h-4 mr-2"}),"Take Photo"]})}),e.jsxs(D,{className:"max-w-md p-0",children:[e.jsxs(I,{className:"p-4 pb-0",children:[e.jsx(_,{children:"Camera"}),e.jsx($,{children:c||n?"Document your work with a photo":"Capture a photo"})]}),e.jsxs("div",{className:"relative bg-black",children:[!x&&!m&&e.jsx("div",{className:"aspect-video flex items-center justify-center",children:e.jsxs(b,{onClick:de,"data-testid":"button-start-camera",children:[e.jsx(H,{className:"w-6 h-6 mr-2"}),"Start Camera"]})}),x&&!m&&e.jsxs("div",{className:"relative aspect-video",children:[e.jsx("video",{ref:s,className:"w-full h-full object-cover",autoPlay:!0,muted:!0,playsInline:!0}),e.jsxs("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center items-center space-x-4",children:[e.jsx(b,{size:"sm",variant:"secondary",onClick:A,"data-testid":"button-switch-camera",children:e.jsx(_e,{className:"w-4 h-4"})}),e.jsx(b,{size:"lg",className:"rounded-full w-16 h-16 p-0",onClick:me,"data-testid":"button-capture-photo",children:e.jsx("div",{className:"w-12 h-12 border-4 border-white rounded-full"})}),e.jsx(v,{variant:"secondary",className:"bg-black/50 text-white",children:h==="user"?"Front":"Back"})]})]}),m&&e.jsxs("div",{className:"relative aspect-video",children:[e.jsx("img",{src:m,alt:"Captured",className:"w-full h-full object-cover"}),e.jsxs("div",{className:"absolute bottom-4 left-0 right-0 flex justify-center items-center space-x-4",children:[e.jsxs(b,{size:"sm",variant:"destructive",onClick:xe,"data-testid":"button-retake-photo",children:[e.jsx(ve,{className:"w-4 h-4 mr-2"}),"Retake"]}),e.jsxs(b,{size:"sm",onClick:ue,disabled:Y.isPending,"data-testid":"button-save-photo",children:[Y.isPending?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}):e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Save"]})]})]})]}),e.jsx("canvas",{ref:a,className:"hidden"})]})]}):e.jsx(N,{children:e.jsxs(y,{children:[e.jsxs(w,{className:"text-lg flex items-center",children:[e.jsx(Fe,{className:"w-5 h-5 mr-2"}),"Camera"]}),e.jsx(S,{children:"Camera is not supported on this device"})]})})}function st(){const{user:t}=U(),{lightTap:c}=M(),{data:n}=ie({queryKey:["/api/mobile/quick-stats"],enabled:!!t}),s=a=>{c(),console.log(`Viewing details for: ${a}`)};return e.jsxs(N,{children:[e.jsx(y,{className:"pb-3",children:e.jsxs(w,{className:"text-lg flex items-center",children:[e.jsx(ze,{className:"w-5 h-5 mr-2"}),"Quick Stats"]})}),e.jsx(C,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsx(F,{onDoubleTap:()=>s("hours"),children:e.jsxs("div",{className:"text-center p-3 bg-blue-50 dark:bg-blue-950 rounded-lg cursor-pointer transition-transform active:scale-95",onClick:()=>s("hours"),"data-testid":"stat-hours",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(t==null?void 0:t.role)==="worker"?"32.5":"248"}),e.jsx("div",{className:"text-sm text-blue-800 dark:text-blue-200",children:(t==null?void 0:t.role)==="worker"?"Hours This Week":"Total Hours"})]})}),e.jsx(F,{onDoubleTap:()=>s("earnings"),children:e.jsxs("div",{className:"text-center p-3 bg-green-50 dark:bg-green-950 rounded-lg cursor-pointer transition-transform active:scale-95",onClick:()=>s("earnings"),"data-testid":"stat-earnings",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",(t==null?void 0:t.role)==="worker"?"1,280":"24,500"]}),e.jsx("div",{className:"text-sm text-green-800 dark:text-green-200",children:(t==null?void 0:t.role)==="worker"?"This Week":"This Month"})]})}),e.jsx(F,{onDoubleTap:()=>s("rating"),children:e.jsxs("div",{className:"text-center p-3 bg-yellow-50 dark:bg-yellow-950 rounded-lg cursor-pointer transition-transform active:scale-95",onClick:()=>s("rating"),"data-testid":"stat-rating",children:[e.jsxs("div",{className:"text-2xl font-bold text-yellow-600 flex items-center justify-center",children:[e.jsx(ce,{className:"w-6 h-6 mr-1"}),"4.9"]}),e.jsx("div",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"Average Rating"})]})}),e.jsx(F,{onDoubleTap:()=>s("karma"),children:e.jsxs("div",{className:"text-center p-3 bg-purple-50 dark:bg-purple-950 rounded-lg cursor-pointer transition-transform active:scale-95",onClick:()=>s("karma"),"data-testid":"stat-karma",children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600 flex items-center justify-center",children:[e.jsx(z,{className:"w-6 h-6 mr-1"}),(t==null?void 0:t.karmaCoins)||1250]}),e.jsx("div",{className:"text-sm text-purple-800 dark:text-purple-200",children:"Karma Coins"})]})})]})})]})}function at(){const{user:t}=U(),{lightTap:c}=M(),{data:n}=ie({queryKey:["/api/mobile/upcoming-shifts"],enabled:!!t&&t.role==="worker"}),s=n||[{id:"1",title:"Downtown Office Cleaning",startTime:"09:00 AM",endTime:"05:00 PM",date:"Tomorrow",location:"Downtown Office Complex",status:"confirmed"},{id:"2",title:"Warehouse Operations",startTime:"06:00 AM",endTime:"02:00 PM",date:"Wednesday",location:"Industrial District",status:"pending"}];return(t==null?void 0:t.role)!=="worker"?null:e.jsxs(N,{children:[e.jsx(y,{className:"pb-3",children:e.jsxs(w,{className:"text-lg flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(Le,{className:"w-5 h-5 mr-2"}),"Upcoming Shifts"]}),e.jsx(v,{variant:"secondary",children:s.length})]})}),e.jsx(C,{children:e.jsx("div",{className:"space-y-3",children:s.map(a=>e.jsx(Qe,{onSwipeRight:()=>{c(),console.log(`Quick accept shift: ${a.id}`)},onSwipeLeft:()=>{c(),console.log(`View shift details: ${a.id}`)},children:e.jsxs("div",{className:"p-3 border rounded-lg bg-white dark:bg-gray-800 transition-transform active:scale-98","data-testid":`shift-${a.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium text-sm",children:a.title}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center mt-1",children:[e.jsx(re,{className:"w-3 h-3 mr-1"}),a.date," â€¢ ",a.startTime," - ",a.endTime]}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center mt-1",children:[e.jsx(G,{className:"w-3 h-3 mr-1"}),a.location]})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-1",children:[e.jsx(v,{variant:a.status==="confirmed"?"default":"secondary",children:a.status}),e.jsx(Ae,{className:"w-4 h-4 text-muted-foreground"})]})]}),e.jsx("div",{className:"mt-2 text-xs text-muted-foreground",children:"ðŸ’¡ Swipe right to accept, left for details"})]})},a.id))})})]})}function nt(){U();const{lightTap:t}=M(),c=[{id:"weekly-hours",title:"Weekly Hours Goal",current:32.5,target:40,unit:"hrs",color:"blue"},{id:"monthly-earnings",title:"Monthly Earnings",current:2850,target:4e3,unit:"$",color:"green"},{id:"skill-courses",title:"Skill Courses",current:3,target:5,unit:"courses",color:"purple"}],n=s=>{t(),console.log(`Viewing goal details: ${s}`)};return e.jsxs(N,{children:[e.jsxs(y,{className:"pb-3",children:[e.jsxs(w,{className:"text-lg flex items-center",children:[e.jsx(Oe,{className:"w-5 h-5 mr-2"}),"Goals Progress"]}),e.jsx(S,{children:"Track your progress this month"})]}),e.jsx(C,{className:"space-y-4",children:c.map(s=>{const a=s.current/s.target*100,l=a>=100;return e.jsxs("div",{className:"space-y-2 cursor-pointer transition-transform active:scale-98",onClick:()=>n(s.id),"data-testid":`goal-${s.id}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:s.title}),e.jsxs("div",{className:"flex items-center space-x-2",children:[l&&e.jsx(Re,{className:"w-4 h-4 text-yellow-500"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[s.unit==="$"?"$":"",s.current,s.unit==="$"?"":` ${s.unit}`," / ",s.unit==="$"?"$":"",s.target,s.unit==="$"?"":` ${s.unit}`]})]})]}),e.jsx(L,{value:Math.min(a,100),className:`h-2 ${s.color==="blue"?"bg-blue-100":s.color==="green"?"bg-green-100":"bg-purple-100"}`}),l&&e.jsx("div",{className:"text-xs text-green-600 font-medium",children:"ðŸŽ‰ Goal completed!"})]},s.id)})})]})}function it(){const[t,c]=i.useState({temperature:72,condition:"Sunny",location:"San Francisco, CA",humidity:65,windSpeed:8}),[n,s]=i.useState(null),{lightTap:a}=M();i.useEffect(()=>{navigator.geolocation&&navigator.geolocation.getCurrentPosition(o=>{s({lat:o.coords.latitude,lng:o.coords.longitude}),c(m=>({...m,location:`${o.coords.latitude.toFixed(2)}Â°, ${o.coords.longitude.toFixed(2)}Â°`}))},o=>console.error("Location error:",o))},[]);const l=()=>{a(),console.log("Opening weather details")};return e.jsxs(N,{children:[e.jsx(y,{className:"pb-3",children:e.jsxs(w,{className:"text-lg flex items-center",children:[e.jsx(G,{className:"w-5 h-5 mr-2"}),"Weather & Location"]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-3 cursor-pointer transition-transform active:scale-98",onClick:l,"data-testid":"weather-widget",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[t.temperature,"Â°F"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.condition})]}),e.jsx("div",{className:"text-4xl",children:"â˜€ï¸"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Humidity: "}),e.jsxs("span",{children:[t.humidity,"%"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Wind: "}),e.jsxs("span",{children:[t.windSpeed," mph"]})]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center",children:[e.jsx(G,{className:"w-3 h-3 mr-1"}),n?t.location:"Location not available"]})]})})]})}function rt(){const t=Ke(),{lightTap:c}=M(),[n,s]=i.useState(3247),[a,l]=i.useState(!1);i.useEffect(()=>{Math.sqrt(t.acceleration.x**2+t.acceleration.y**2+t.acceleration.z**2)>12&&(l(!0),s(r=>r+1),setTimeout(()=>l(!1),1e3))},[t.acceleration]);const o=()=>{c(),console.log("Opening activity details")};return t.isSupported?e.jsxs(N,{children:[e.jsx(y,{className:"pb-3",children:e.jsxs(w,{className:"text-lg flex items-center",children:[e.jsx(O,{className:"w-5 h-5 mr-2"}),"Activity Tracker"]})}),e.jsx(C,{children:e.jsxs("div",{className:"space-y-3 cursor-pointer transition-transform active:scale-98",onClick:o,"data-testid":"activity-widget",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.toLocaleString()}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Steps Today"})]}),e.jsx("div",{className:`text-2xl transition-transform ${a?"scale-110":""}`,children:"ðŸš¶â€â™‚ï¸"})]}),e.jsx(L,{value:n/1e4*100,className:"h-2"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Goal: 10,000 steps â€¢ ",Math.max(0,1e4-n).toLocaleString()," remaining"]}),t.isSupported&&e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",children:t.acceleration.x.toFixed(1)}),e.jsx("div",{className:"text-muted-foreground",children:"X"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",children:t.acceleration.y.toFixed(1)}),e.jsx("div",{className:"text-muted-foreground",children:"Y"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"font-medium",children:t.acceleration.z.toFixed(1)}),e.jsx("div",{className:"text-muted-foreground",children:"Z"})]})]})]})})]}):null}function ct(){const[t,c]=i.useState(!1),[n,s]=i.useState(0),{lightTap:a,success:l}=M();i.useEffect(()=>{let d;return t&&(d=setInterval(()=>{s(x=>x+1)},1e3)),()=>clearInterval(d)},[t]);const o=d=>{const x=Math.floor(d/3600),p=Math.floor(d%3600/60),f=d%60;return x>0?`${x}:${p.toString().padStart(2,"0")}:${f.toString().padStart(2,"0")}`:`${p}:${f.toString().padStart(2,"0")}`},m=()=>{a(),c(!0)},r=()=>{a(),c(!1)},u=()=>{l(),c(!1),s(0)};return e.jsxs(N,{children:[e.jsxs(y,{className:"pb-3",children:[e.jsxs(w,{className:"text-lg flex items-center",children:[e.jsx($e,{className:"w-5 h-5 mr-2"}),"Work Timer"]}),e.jsx(S,{children:"Track your work session"})]}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-mono font-bold mb-2",children:o(n)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t?"Timer running...":"Timer stopped"})]}),e.jsxs("div",{className:"flex justify-center space-x-2",children:[t?e.jsx(b,{onClick:r,variant:"outline","data-testid":"button-pause-timer",children:"Pause"}):e.jsx(b,{onClick:m,"data-testid":"button-start-timer",children:"Start"}),e.jsx(b,{onClick:u,variant:"outline","data-testid":"button-reset-timer",children:"Reset"})]})]})]})}function ot(){const{user:t}=U(),[c,n]=i.useState(!1),{isCameraOpen:s,isNotificationsPanelOpen:a,isBiometricSetupOpen:l,closeCamera:o,closeNotifications:m,closeBiometricSetup:r}=J(),u=async()=>{n(!0),await new Promise(d=>setTimeout(d,1500)),n(!1)};return t?e.jsxs(e.Fragment,{children:[e.jsx(R,{open:s,onOpenChange:o,children:e.jsxs(D,{className:"max-w-md p-0",children:[e.jsxs(I,{className:"p-4",children:[e.jsx(_,{children:"Camera"}),e.jsx($,{children:"Capture photos for job documentation"})]}),e.jsx(ae,{})]})}),e.jsx(R,{open:a,onOpenChange:m,children:e.jsxs(D,{children:[e.jsxs(I,{children:[e.jsx(_,{children:"Notifications"}),e.jsx($,{children:"Recent updates and alerts"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:"New shift assigned"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Downtown Office - Tomorrow 9:00 AM"})]}),e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("p",{className:"font-medium text-sm",children:"Payment processed"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"$1,280 deposited to your account"})]})]})]})}),e.jsx(R,{open:l,onOpenChange:r,children:e.jsx(D,{children:e.jsx(se,{})})}),e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[e.jsx("div",{className:"bg-white shadow-sm border-b sticky top-0 z-10",children:e.jsx("div",{className:"px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Mobile Hub"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Enhanced mobile experience"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(v,{variant:"secondary",className:"bg-blue-100 text-blue-800",children:[e.jsx(be,{className:"w-3 h-3 mr-1"}),"PWA"]})})]})})}),e.jsx(Je,{onRefresh:u,className:"px-4",children:e.jsxs(Ne,{defaultValue:"dashboard",className:"w-full mt-4",children:[e.jsxs(ye,{className:"grid w-full grid-cols-4 mb-4",children:[e.jsxs(B,{value:"dashboard",className:"text-xs",children:[e.jsx(De,{className:"w-4 h-4 mr-1"}),"Dashboard"]}),e.jsxs(B,{value:"features",className:"text-xs",children:[e.jsx(z,{className:"w-4 h-4 mr-1"}),"Features"]}),e.jsxs(B,{value:"tools",className:"text-xs",children:[e.jsx(O,{className:"w-4 h-4 mr-1"}),"Tools"]}),e.jsxs(B,{value:"settings",className:"text-xs",children:[e.jsx(we,{className:"w-4 h-4 mr-1"}),"Settings"]})]}),e.jsxs(V,{value:"dashboard",className:"space-y-4",children:[e.jsx(st,{}),(t==null?void 0:t.role)==="worker"&&e.jsx(at,{}),e.jsx(nt,{}),e.jsx(it,{}),e.jsx(rt,{})]}),e.jsx(V,{value:"features",className:"space-y-4",children:e.jsxs(N,{children:[e.jsxs(y,{children:[e.jsxs(w,{className:"text-lg flex items-center",children:[e.jsx(ce,{className:"w-5 h-5 mr-2"}),"Advanced Mobile Features"]}),e.jsx(S,{children:"Next-generation mobile capabilities for workforce management"})]}),e.jsx(C,{children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(W,{className:"w-5 h-5 text-blue-500 mr-2"}),e.jsx("span",{className:"font-medium",children:"Voice Control"})]}),e.jsx(v,{variant:"default",children:"Active"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:'Control the app with voice commands like "Clock in" or "Show jobs"'}),e.jsx(tt,{})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(H,{className:"w-5 h-5 text-green-500 mr-2"}),e.jsx("span",{className:"font-medium",children:"Camera Integration"})]}),e.jsx(v,{variant:"default",children:"Ready"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Capture photos for job documentation and timesheet verification"}),e.jsx(ae,{})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{className:"w-5 h-5 text-purple-500 mr-2"}),e.jsx("span",{className:"font-medium",children:"Biometric Security"})]}),e.jsx(v,{variant:"secondary",children:"Setup"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Secure your account with fingerprint or face recognition"}),e.jsx(se,{})]})]})})]})}),e.jsxs(V,{value:"tools",className:"space-y-4",children:[e.jsx(ct,{}),e.jsxs(N,{children:[e.jsxs(y,{children:[e.jsxs(w,{className:"text-lg flex items-center",children:[e.jsx(O,{className:"w-5 h-5 mr-2"}),"Mobile Tools"]}),e.jsx(S,{children:"Productivity tools for mobile workers"})]}),e.jsx(C,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(H,{className:"w-8 h-8 mx-auto mb-2 text-blue-500"}),e.jsx("div",{className:"text-sm font-medium",children:"Photo Capture"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Job documentation"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(W,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),e.jsx("div",{className:"text-sm font-medium",children:"Voice Notes"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Audio recording"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(O,{className:"w-8 h-8 mx-auto mb-2 text-purple-500"}),e.jsx("div",{className:"text-sm font-medium",children:"Activity Tracker"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Motion sensors"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg",children:[e.jsx(ke,{className:"w-8 h-8 mx-auto mb-2 text-orange-500"}),e.jsx("div",{className:"text-sm font-medium",children:"Performance"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"System monitor"})]})]})})]})]}),e.jsxs(V,{value:"settings",className:"space-y-4",children:[e.jsx(Ze,{}),e.jsx(et,{}),e.jsxs(N,{children:[e.jsxs(y,{children:[e.jsx(w,{className:"text-lg",children:"Mobile Preferences"}),e.jsx(S,{children:"Customize your mobile experience"})]}),e.jsx(C,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Haptic Feedback"}),e.jsx(v,{variant:"default",children:"Enabled"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Dark Mode Auto"}),e.jsx(v,{variant:"secondary",children:"System"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Location Services"}),e.jsx(v,{variant:"default",children:"High Accuracy"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Background Sync"}),e.jsx(v,{variant:"default",children:"Enabled"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Battery Optimization"}),e.jsx(v,{variant:"secondary",children:"Auto"})]})]})})]})]})]})})]})]}):e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Authentication Required"}),e.jsx("p",{className:"text-muted-foreground",children:"Please log in to access mobile features."})]})})}function Et(){return e.jsx(He,{children:e.jsx(ot,{})})}export{Et as default};
