import{c as x,u as p,g as f,r as j,j as e,d as o,V as g,C as s,e as r,f as n,a,J as b,K as N,N as c,O as m,b as v}from"./index-aBzEQGYq.js";import{A as y}from"./app-layout-DNSppN_P.js";import{M as u}from"./map-pin-D49hIz5W.js";import{U as w}from"./users-DQHjr_4E.js";import{R as k}from"./route-D986IuhQ.js";import{C as M}from"./clock-Dcf5yqqC.js";import{P as C}from"./plus-BIW1JAb4.js";import"./avatar-B73pXDWb.js";import"./target-kE2L6cy0.js";import"./calendar-B5qd1N74.js";import"./building-DW2XR0jT.js";import"./handshake-DxRR1pa7.js";import"./credit-card-CxGwdsfA.js";import"./calculator-Ch1wpyY6.js";import"./crown-J1RsCPzy.js";import"./pound-sterling-DvDjXgI4.js";import"./trending-up-EJ-1Wo56.js";import"./message-square-CV5BlX6z.js";import"./file-text-DGolt20j.js";import"./shield-check-DrJu6eCf.js";import"./Combination-D-0K7YMg.js";import"./index-oqkmxxPa.js";import"./scroll-area-Dsz05QRK.js";import"./alert-dialog-CGu9Do5w.js";import"./index-r-q9YERm.js";import"./dialog-23jdk0P0.js";import"./send-DOYPj-_D.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=x("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=x("Satellite",[["path",{d:"M13 7 9 3 5 7l4 4",key:"vyckw6"}],["path",{d:"m17 11 4 4-4 4-4-4",key:"rchckc"}],["path",{d:"m8 12 4 4 6-6-4-4Z",key:"1sshf7"}],["path",{d:"m16 8 3-3",key:"x428zp"}],["path",{d:"M9 21a6 6 0 0 0-6-6",key:"1iajcf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=x("Shapes",[["path",{d:"M8.3 10a.7.7 0 0 1-.626-1.079L11.4 3a.7.7 0 0 1 1.198-.043L16.3 8.9a.7.7 0 0 1-.572 1.1Z",key:"1bo67w"}],["rect",{x:"3",y:"14",width:"7",height:"7",rx:"1",key:"1bkyp8"}],["circle",{cx:"17.5",cy:"17.5",r:"3.5",key:"w3z12y"}]]);function ae(){const{toast:i}=p(),{isAuthenticated:d,isLoading:l}=f();if(j.useEffect(()=>{if(!l&&!d){i({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}},[d,l,i]),l||!d)return e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})});const h=[{id:"1",name:"Sarah Wilson",location:"London Office",status:"active",lastUpdate:"2 mins ago"},{id:"2",name:"Mike Johnson",location:"Manchester Site",status:"on_route",lastUpdate:"5 mins ago"},{id:"3",name:"Emma Thompson",location:"Birmingham Hub",status:"break",lastUpdate:"15 mins ago"}];return e.jsx(y,{title:"Map Tracking",breadcrumbs:[{label:"Operations",href:"/operations-management"},{label:"Map Tracking"}],children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:"Location Tracking"}),e.jsx("p",{className:"text-muted-foreground",children:"Real-time worker location and route monitoring"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(o,{variant:"outline","data-testid":"button-export-routes",onClick:()=>i({title:"Export",description:"Route export feature coming soon!"}),children:[e.jsx(g,{className:"mr-2 h-4 w-4"}),"Export Routes"]}),e.jsxs(o,{"data-testid":"button-live-tracking",onClick:()=>i({title:"Live Tracking",description:"Real-time GPS tracking coming soon!"}),children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Enable Live Tracking"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs(s,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Active Workers"}),e.jsx(w,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:"127"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently tracked"})]})]}),e.jsxs(s,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"On Route"}),e.jsx(k,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:"23"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Between locations"})]})]}),e.jsxs(s,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"Avg Response Time"}),e.jsx(M,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:"2.4m"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Emergency response"})]})]}),e.jsxs(s,{children:[e.jsxs(r,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(n,{className:"text-sm font-medium",children:"GPS Accuracy"}),e.jsx(L,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(a,{children:[e.jsx("div",{className:"text-2xl font-bold text-foreground",children:"98.7%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Location precision"})]})]})]}),e.jsxs(b,{defaultValue:"live-map",className:"w-full",children:[e.jsxs(N,{className:"grid w-full grid-cols-3",children:[e.jsx(c,{value:"live-map","data-testid":"tab-live-map",children:"Live Map"}),e.jsx(c,{value:"routes","data-testid":"tab-routes",children:"Routes"}),e.jsx(c,{value:"geofences","data-testid":"tab-geofences",children:"Geofences"})]}),e.jsx(m,{value:"live-map",children:e.jsx(s,{children:e.jsx(a,{className:"p-6",children:e.jsx("div",{className:"h-96 bg-muted/30 rounded-lg flex items-center justify-center border-2 border-dashed border-muted-foreground/25",children:e.jsxs("div",{className:"text-center",children:[e.jsx(T,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Interactive Map"}),e.jsx("p",{className:"text-muted-foreground",children:"Real-time worker locations will appear here"}),e.jsxs(o,{className:"mt-4",onClick:()=>i({title:"Map Integration",description:"Google Maps integration coming soon!"}),children:[e.jsx(u,{className:"mr-2 h-4 w-4"}),"Initialize Map"]})]})})})})}),e.jsx(m,{value:"routes",children:e.jsxs(s,{children:[e.jsx(r,{children:e.jsx(n,{children:"Active Routes"})}),e.jsx(a,{children:e.jsx("div",{className:"space-y-4",children:h.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg","data-testid":`route-worker-${t.id}`,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${t.status==="active"?"bg-green-500":t.status==="on_route"?"bg-yellow-500":"bg-gray-500"}`}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-foreground","data-testid":`worker-name-${t.id}`,children:t.name}),e.jsx("p",{className:"text-sm text-muted-foreground","data-testid":`worker-location-${t.id}`,children:t.location})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(v,{variant:t.status==="active"?"default":"secondary","data-testid":`worker-status-${t.id}`,children:t.status.replace("_"," ")}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1","data-testid":`worker-update-${t.id}`,children:t.lastUpdate})]})]},t.id))})})]})}),e.jsx(m,{value:"geofences",children:e.jsxs(s,{children:[e.jsx(r,{children:e.jsx(n,{children:"Geofence Management"})}),e.jsx(a,{children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(R,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:"Geofence Setup"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Create virtual boundaries for automatic attendance tracking"}),e.jsxs(o,{onClick:()=>i({title:"Geofences",description:"Geofencing feature coming soon!"}),children:[e.jsx(C,{className:"mr-2 h-4 w-4"}),"Create Geofence"]})]})})]})})]})]})})}export{ae as default};
