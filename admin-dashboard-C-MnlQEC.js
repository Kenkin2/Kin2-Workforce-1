import{c as Y,r as Z,u as G,o as V,i as j,l as $,j as e,d as F,aE as _,Z as N,J as M,K as ee,N as x,O as m,C as d,e as i,f as l,a as n,W as D,m as o,b as y,S as se,T as te,F as ae,n as P}from"./index-aBzEQGYq.js";import{A as re}from"./activity-Bt7QQFFp.js";import{R as B,a as O,X as E,Y as H,T as U,B as z,L as de}from"./generateCategoricalChart-CE2-CpqZ.js";import{L as ie,a as le}from"./LineChart-BohXwQCU.js";import{B as ne}from"./BarChart-DkFQbd_9.js";import{C as ce}from"./circle-check-big-DoRqGQom.js";import{C as oe}from"./circle-x-pQhUaXCr.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=Y("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);function ve(){var b,w,T,k,C,R,A,S,I,K,q,L;const[W,X]=Z.useState("overview"),{toast:u}=G(),f=V(),{data:t,isLoading:J}=j({queryKey:["/api/analytics/system-metrics"],refetchInterval:3e4}),{data:g}=j({queryKey:["/api/integrations/health"],refetchInterval:6e4}),{data:c}=j({queryKey:["/api/workflows/executions"]}),{data:a}=j({queryKey:["/api/deployment/status"]}),{data:h}=j({queryKey:["/api/testing/health-check"],refetchInterval:3e5}),p=$({mutationFn:()=>P("POST","/api/testing/run-all"),onSuccess:()=>{u({title:"Tests Completed",description:"All system tests have been executed successfully"}),f.invalidateQueries({queryKey:["/api/testing/health-check"]})},onError:()=>{u({title:"Test Failed",description:"Some tests failed to execute",variant:"destructive"})}}),v=$({mutationFn:()=>P("POST","/api/integrations/test"),onSuccess:()=>{u({title:"Integration Tests Completed",description:"All integration tests have been executed"}),f.invalidateQueries({queryKey:["/api/integrations/health"]})}});return J?e.jsx("div",{className:"flex items-center justify-center h-screen","data-testid":"loading-admin-dashboard",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6","data-testid":"admin-dashboard",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white","data-testid":"title-dashboard",children:"System Administration"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400","data-testid":"text-dashboard-description",children:"Comprehensive platform management and monitoring"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(F,{onClick:()=>p.mutate(),disabled:p.isPending,variant:"outline","data-testid":"button-run-tests",children:[e.jsx(_,{className:"w-4 h-4 mr-2"}),p.isPending?"Running...":"Run Tests"]}),e.jsxs(F,{onClick:()=>v.mutate(),disabled:v.isPending,"data-testid":"button-test-integrations",children:[e.jsx(N,{className:"w-4 h-4 mr-2"}),v.isPending?"Testing...":"Test Integrations"]})]})]}),e.jsxs(M,{value:W,onValueChange:X,className:"w-full",children:[e.jsxs(ee,{className:"grid w-full grid-cols-6",children:[e.jsx(x,{value:"overview","data-testid":"tab-overview",children:"Overview"}),e.jsx(x,{value:"analytics","data-testid":"tab-analytics",children:"Analytics"}),e.jsx(x,{value:"integrations","data-testid":"tab-integrations",children:"Integrations"}),e.jsx(x,{value:"workflows","data-testid":"tab-workflows",children:"Automation"}),e.jsx(x,{value:"testing","data-testid":"tab-testing",children:"Testing"}),e.jsx(x,{value:"deployment","data-testid":"tab-deployment",children:"Deployment"})]}),e.jsxs(m,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(d,{"data-testid":"card-system-health",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"System Health"}),e.jsx(Q,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600","data-testid":"text-system-status",children:"Healthy"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Uptime: ",Math.floor((((b=t==null?void 0:t.performance)==null?void 0:b.uptime)||0)/3600),"h"]})]})]}),e.jsxs(d,{"data-testid":"card-integrations-status",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Integrations"}),e.jsx(N,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"text-2xl font-bold","data-testid":"text-integrations-healthy",children:[((w=t==null?void 0:t.integrations)==null?void 0:w.healthyCount)||0,"/",((T=t==null?void 0:t.integrations)==null?void 0:T.totalActive)||0]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Healthy integrations"})]})]}),e.jsxs(d,{"data-testid":"card-active-users",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Active Users"}),e.jsx(re,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(n,{children:[e.jsx("div",{className:"text-2xl font-bold","data-testid":"text-active-users-count",children:((k=t==null?void 0:t.users)==null?void 0:k.activeUsers)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Total: ",((C=t==null?void 0:t.users)==null?void 0:C.totalUsers)||0]})]})]}),e.jsxs(d,{"data-testid":"card-response-time",children:[e.jsxs(i,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(l,{className:"text-sm font-medium",children:"Response Time"}),e.jsx(D,{className:"h-4 w-4 text-orange-600"})]}),e.jsxs(n,{children:[e.jsxs("div",{className:"text-2xl font-bold","data-testid":"text-avg-response-time",children:[((R=t==null?void 0:t.performance)==null?void 0:R.avgResponseTime)||0,"ms"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average response time"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(d,{"data-testid":"card-response-time-chart",children:[e.jsxs(i,{children:[e.jsx(l,{children:"Response Time Trend"}),e.jsx(o,{children:"Last 24 hours performance"})]}),e.jsx(n,{children:e.jsx(B,{width:"100%",height:200,children:e.jsxs(ie,{data:((A=t==null?void 0:t.performance)==null?void 0:A.responseTimeHistory)||[],children:[e.jsx(O,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(E,{dataKey:"time",stroke:"hsl(var(--muted-foreground))"}),e.jsx(H,{stroke:"hsl(var(--muted-foreground))"}),e.jsx(U,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),e.jsx(le,{type:"monotone",dataKey:"responseTime",stroke:"#3b82f6",strokeWidth:2})]})})})]}),e.jsxs(d,{"data-testid":"card-memory-usage-chart",children:[e.jsxs(i,{children:[e.jsx(l,{children:"Memory Usage"}),e.jsx(o,{children:"System memory utilization"})]}),e.jsx(n,{children:e.jsx(B,{width:"100%",height:200,children:e.jsxs(ne,{data:((S=t==null?void 0:t.performance)==null?void 0:S.memoryHistory)||[],children:[e.jsx(O,{strokeDasharray:"3 3",stroke:"hsl(var(--border))"}),e.jsx(E,{dataKey:"time",stroke:"hsl(var(--muted-foreground))"}),e.jsx(H,{stroke:"hsl(var(--muted-foreground))"}),e.jsx(U,{contentStyle:{backgroundColor:"hsl(var(--background))",border:"1px solid hsl(var(--border))",borderRadius:"6px"}}),e.jsx(z,{dataKey:"used",fill:"#ef4444",name:"Used"}),e.jsx(z,{dataKey:"free",fill:"#10b981",name:"Free"}),e.jsx(de,{})]})})})]})]})]}),e.jsx(m,{value:"analytics",className:"space-y-6",children:e.jsxs(d,{"data-testid":"card-advanced-analytics",children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(D,{className:"w-5 h-5"}),"Advanced Analytics"]}),e.jsx(o,{children:"Comprehensive business intelligence and insights"})]}),e.jsx(n,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg","data-testid":"metric-total-revenue",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"$24,580"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Revenue"}),e.jsx("div",{className:"text-xs text-green-600",children:"+12.5% vs last month"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg","data-testid":"metric-worker-satisfaction",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"92%"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Worker Satisfaction"}),e.jsx("div",{className:"text-xs text-blue-600",children:"+3.2% improvement"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg","data-testid":"metric-job-completion",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"89%"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Job Completion Rate"}),e.jsx("div",{className:"text-xs text-purple-600",children:"On-time delivery"})]})]})})]})}),e.jsx(m,{value:"integrations",className:"space-y-6",children:e.jsxs(d,{"data-testid":"card-integration-health",children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5"}),"Integration Health Monitor"]}),e.jsx(o,{children:"Real-time status of all external service connections"})]}),e.jsx(n,{className:"space-y-4",children:g==null?void 0:g.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg","data-testid":`integration-${s.id}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.status==="healthy"?"#22c55e":s.status==="degraded"?"#f59e0b":"#ef4444"}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium","data-testid":`text-integration-name-${s.id}`,children:s.name}),e.jsxs("div",{className:"text-sm text-gray-600","data-testid":`text-integration-status-${s.id}`,children:[s.status," • Response: ",s.responseTime,"ms"]})]})]}),e.jsx(y,{variant:s.status==="healthy"?"default":"destructive",children:s.status})]},s.id))})]})}),e.jsx(m,{value:"workflows",className:"space-y-6",children:e.jsxs(d,{"data-testid":"card-workflow-automation",children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5"}),"Workflow Automation"]}),e.jsx(o,{children:"Automated business processes and rules"})]}),e.jsxs(n,{className:"space-y-4",children:[(c==null?void 0:c.stats)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-3 border rounded-lg","data-testid":"metric-total-executions",children:[e.jsx("div",{className:"text-xl font-bold",children:c.stats.total}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Executions"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg","data-testid":"metric-success-rate",children:[e.jsxs("div",{className:"text-xl font-bold text-green-600",children:[c.stats.successRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Success Rate"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg","data-testid":"metric-avg-duration",children:[e.jsxs("div",{className:"text-xl font-bold",children:[c.stats.averageDuration.toFixed(0),"ms"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Duration"})]}),e.jsxs("div",{className:"text-center p-3 border rounded-lg","data-testid":"metric-failed-executions",children:[e.jsx("div",{className:"text-xl font-bold text-red-600",children:c.stats.failed}),e.jsx("div",{className:"text-sm text-gray-600",children:"Failed"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Active Workflow Rules"}),(I=c==null?void 0:c.executions)==null?void 0:I.slice(0,5).map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg","data-testid":`workflow-execution-${r}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s.result==="success"?e.jsx(ce,{className:"w-5 h-5 text-green-600"}):s.result==="partial"?e.jsx(te,{className:"w-5 h-5 text-orange-600"}):e.jsx(oe,{className:"w-5 h-5 text-red-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium","data-testid":`text-execution-rule-${r}`,children:s.ruleId}),e.jsxs("div",{className:"text-sm text-gray-600","data-testid":`text-execution-time-${r}`,children:[new Date(s.timestamp).toLocaleString()," • ",s.duration,"ms"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-medium",children:[s.executedActions.length," actions"]}),s.errors&&e.jsxs("div",{className:"text-xs text-red-600",children:[s.errors.length," errors"]})]})]},s.id))]})]})]})}),e.jsx(m,{value:"testing",className:"space-y-6",children:e.jsxs(d,{"data-testid":"card-testing-dashboard",children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5"}),"Testing & Quality Assurance"]}),e.jsx(o,{children:"Automated testing results and quality metrics"})]}),e.jsx(n,{className:"space-y-4",children:h&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 border rounded-lg","data-testid":"metric-database-test",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:(K=h.database)!=null&&K.success?"✓":"✗"}),e.jsx("div",{className:"text-sm",children:"Database"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg","data-testid":"metric-storage-test",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:(q=h.storage)!=null&&q.success?"✓":"✗"}),e.jsx("div",{className:"text-sm",children:"Storage"})]}),e.jsxs("div",{className:"text-center p-4 border rounded-lg","data-testid":"metric-stripe-test",children:[e.jsx("div",{className:"text-lg font-bold text-green-600",children:(L=h.stripe)!=null&&L.success?"✓":"✗"}),e.jsx("div",{className:"text-sm",children:"Stripe"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-semibold",children:"Test Results"}),Object.entries(h).map(([s,r])=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded","data-testid":`test-result-${s}`,children:[e.jsx("span",{className:"capitalize",children:s}),e.jsx(y,{variant:r.success?"default":"destructive",children:r.success?"PASS":"FAIL"})]},s))]})]})})]})}),e.jsx(m,{value:"deployment",className:"space-y-6",children:e.jsxs(d,{"data-testid":"card-deployment-status",children:[e.jsxs(i,{children:[e.jsxs(l,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5"}),"Deployment Configuration"]}),e.jsx(o,{children:"Production readiness and deployment options"})]}),e.jsx(n,{className:"space-y-4",children:(a==null?void 0:a.readiness)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${a.readiness.ready?"bg-green-500":"bg-red-500"}`}),e.jsx("span",{className:"font-semibold","data-testid":"text-deployment-ready",children:a.readiness.ready?"Ready for deployment":"Not ready for deployment"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(a.readiness.checks).map(([s,r])=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded","data-testid":`deployment-check-${s}`,children:[e.jsx("span",{className:"capitalize",children:s}),e.jsx(y,{variant:r?"default":"destructive",children:r?"Ready":"Not Ready"})]},s))}),a.readiness.errors&&a.readiness.errors.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-semibold text-red-600 mb-2",children:"Deployment Issues:"}),e.jsx("ul",{className:"space-y-1",children:a.readiness.errors.map((s,r)=>e.jsxs("li",{className:"text-sm text-red-600","data-testid":`deployment-error-${r}`,children:["• ",s]},r))})]}),a.report&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-50 dark:bg-gray-800 rounded-lg",children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Deployment Report"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{"data-testid":"deployment-environment",children:[e.jsx("strong",{children:"Environment:"})," ",a.report.environment]}),e.jsxs("div",{"data-testid":"deployment-resources",children:[e.jsx("strong",{children:"Resources:"})," ",a.report.estimatedResources.cpu,", ",a.report.estimatedResources.memory]})]}),a.report.recommendations&&e.jsxs("div",{className:"mt-3",children:[e.jsx("strong",{children:"Recommendations:"}),e.jsx("ul",{className:"mt-1 space-y-1",children:a.report.recommendations.map((s,r)=>e.jsxs("li",{className:"text-xs text-gray-600","data-testid":`deployment-recommendation-${r}`,children:["• ",s]},r))})]})]})]})})]})})]})]})}export{ve as default};
