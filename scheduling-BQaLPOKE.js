import{r as g,j as e,C as o,e as m,f as x,d as l,Q as p,I as v,a as h,k as w,u as U,g as W,V as O,m as z,U as L,b as P}from"./index-aBzEQGYq.js";import{A as V,C as Y}from"./app-layout-DNSppN_P.js";import{D as B,a as R,b as H,c as X,d as Q,e as Z}from"./dialog-23jdk0P0.js";import{S as q,a as G,b as K,c as _,d as y}from"./select-L0woBkk0.js";import{S as ee,A as se}from"./ai-insights-DPnmX-ry.js";import{C as te}from"./calendar-days-4jemmO5l.js";import{U as re}from"./users-DQHjr_4E.js";import{C as ie}from"./circle-check-big-DoRqGQom.js";import{C as ae}from"./clock-Dcf5yqqC.js";import{P as ne}from"./pencil-NTBry3l3.js";import"./avatar-B73pXDWb.js";import"./target-kE2L6cy0.js";import"./calendar-B5qd1N74.js";import"./building-DW2XR0jT.js";import"./handshake-DxRR1pa7.js";import"./credit-card-CxGwdsfA.js";import"./calculator-Ch1wpyY6.js";import"./crown-J1RsCPzy.js";import"./map-pin-D49hIz5W.js";import"./pound-sterling-DvDjXgI4.js";import"./trending-up-EJ-1Wo56.js";import"./message-square-CV5BlX6z.js";import"./file-text-DGolt20j.js";import"./shield-check-DrJu6eCf.js";import"./Combination-D-0K7YMg.js";import"./index-oqkmxxPa.js";import"./scroll-area-Dsz05QRK.js";import"./alert-dialog-CGu9Do5w.js";import"./index-r-q9YERm.js";import"./send-DOYPj-_D.js";import"./star-Bqtboh28.js";function de(){const[c,u]=g.useState(new Date),[j,a]=g.useState(null),[D,N]=g.useState(!1),[S,le]=g.useState([{id:"1",title:"Morning Shift",worker:"John Smith",startTime:"09:00",endTime:"17:00",date:"2024-01-15",status:"confirmed",color:"bg-blue-500"},{id:"2",title:"Evening Shift",worker:"Sarah Wilson",startTime:"17:00",endTime:"23:00",date:"2024-01-15",status:"scheduled",color:"bg-green-500"},{id:"3",title:"Night Shift",worker:"Mike Johnson",startTime:"23:00",endTime:"07:00",date:"2024-01-16",status:"completed",color:"bg-purple-500"}]),k=s=>{const t=s.getFullYear(),r=s.getMonth(),$=new Date(t,r,1),F=new Date(t,r+1,0).getDate(),J=$.getDay(),f=[],A=new Date(t,r-1,0);for(let i=J-1;i>=0;i--){const n=A.getDate()-i,d=`${t}-${String(r).padStart(2,"0")}-${String(n).padStart(2,"0")}`;f.push({date:d,day:n,isCurrentMonth:!1,isToday:!1,shifts:S.filter(b=>b.date===d)})}for(let i=1;i<=F;i++){const n=`${t}-${String(r+1).padStart(2,"0")}-${String(i).padStart(2,"0")}`,d=new Date,b=t===d.getFullYear()&&r===d.getMonth()&&i===d.getDate();f.push({date:n,day:i,isCurrentMonth:!0,isToday:b,shifts:S.filter(I=>I.date===n)})}const E=42-f.length;for(let i=1;i<=E;i++){const n=`${t}-${String(r+2).padStart(2,"0")}-${String(i).padStart(2,"0")}`;f.push({date:n,day:i,isCurrentMonth:!1,isToday:!1,shifts:S.filter(d=>d.date===n)})}return f},C=s=>{const t=new Date(c);s==="prev"?t.setMonth(t.getMonth()-1):t.setMonth(t.getMonth()+1),u(t)},T=k(c),M=["January","February","March","April","May","June","July","August","September","October","November","December"];return e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(x,{className:"flex items-center space-x-2",children:[e.jsx("i",{className:"fas fa-calendar-alt"}),e.jsx("span",{children:"Shift Calendar"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>C("prev"),children:e.jsx("i",{className:"fas fa-chevron-left"})}),e.jsxs("span",{className:"font-medium min-w-[140px] text-center",children:[M[c.getMonth()]," ",c.getFullYear()]}),e.jsx(l,{variant:"outline",size:"sm",onClick:()=>C("next"),children:e.jsx("i",{className:"fas fa-chevron-right"})})]}),e.jsxs(B,{open:D,onOpenChange:N,children:[e.jsx(R,{asChild:!0,children:e.jsxs(l,{size:"sm","data-testid":"button-add-shift",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Add Shift"]})}),e.jsxs(H,{children:[e.jsxs(X,{children:[e.jsx(Q,{children:"Schedule New Shift"}),e.jsx(Z,{children:"Create a new shift assignment for a worker"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"shift-date",children:"Date"}),e.jsx(v,{id:"shift-date",type:"date",defaultValue:j||new Date().toISOString().split("T")[0]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"shift-worker",children:"Worker"}),e.jsxs(q,{children:[e.jsx(G,{children:e.jsx(K,{placeholder:"Select worker"})}),e.jsxs(_,{children:[e.jsx(y,{value:"john",children:"John Smith"}),e.jsx(y,{value:"sarah",children:"Sarah Wilson"}),e.jsx(y,{value:"mike",children:"Mike Johnson"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"start-time",children:"Start Time"}),e.jsx(v,{id:"start-time",type:"time",defaultValue:"09:00"})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"end-time",children:"End Time"}),e.jsx(v,{id:"end-time",type:"time",defaultValue:"17:00"})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"shift-title",children:"Shift Title"}),e.jsx(v,{id:"shift-title",placeholder:"e.g., Morning Shift, Evening Shift"})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(l,{variant:"outline",onClick:()=>N(!1),children:"Cancel"}),e.jsx(l,{children:"Schedule Shift"})]})]})]})]})]})}),e.jsxs(h,{children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-7 gap-1 text-center text-sm font-medium text-muted-foreground",children:[e.jsx("div",{children:"Sun"}),e.jsx("div",{children:"Mon"}),e.jsx("div",{children:"Tue"}),e.jsx("div",{children:"Wed"}),e.jsx("div",{children:"Thu"}),e.jsx("div",{children:"Fri"}),e.jsx("div",{children:"Sat"})]}),e.jsx("div",{className:"grid grid-cols-7 gap-1",children:T.map((s,t)=>e.jsxs("div",{className:w("min-h-[100px] p-1 border border-border rounded-md cursor-pointer transition-colors hover:bg-muted/50",s.isCurrentMonth?"bg-background":"bg-muted/20",s.isToday&&"ring-2 ring-primary ring-offset-2"),onClick:()=>{a(s.date),N(!0)},"data-testid":`calendar-day-${s.date}`,children:[e.jsx("div",{className:w("text-sm font-medium mb-1",s.isCurrentMonth?"text-foreground":"text-muted-foreground",s.isToday&&"text-primary font-bold"),children:s.day}),e.jsxs("div",{className:"space-y-1",children:[s.shifts.slice(0,2).map(r=>e.jsx("div",{className:w("text-xs p-1 rounded text-white truncate",r.color),title:`${r.worker}: ${r.startTime}-${r.endTime}`,children:r.worker},r.id)),s.shifts.length>2&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["+",s.shifts.length-2," more"]})]})]},t))})]}),e.jsx("div",{className:"mt-6 pt-4 border-t border-border",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Shift Status"}),e.jsxs("div",{className:"flex items-center space-x-4 text-xs",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded"}),e.jsx("span",{children:"Scheduled"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded"}),e.jsx("span",{children:"Confirmed"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded"}),e.jsx("span",{children:"Completed"})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded"}),e.jsx("span",{children:"Cancelled"})]})]})]})})]})]})}function Pe(){const{toast:c}=U(),{isAuthenticated:u,isLoading:j}=W();return g.useEffect(()=>{if(!j&&!u){c({title:"Unauthorized",description:"You are logged out. Logging in again...",variant:"destructive"}),setTimeout(()=>{window.location.href="/api/login"},500);return}},[u,j,c]),j||!u?e.jsx("div",{className:"h-screen flex items-center justify-center",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-primary border-t-transparent rounded-full"})}):e.jsx(V,{title:"Scheduling",breadcrumbs:[{label:"Management",href:"/dashboard"},{label:"Scheduling"}],children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold text-foreground",children:"Shift Scheduling"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage worker schedules and shift assignments"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(l,{variant:"outline","data-testid":"button-export-schedule",children:[e.jsx(O,{className:"w-4 h-4 mr-2"}),"Export Schedule"]}),e.jsxs(l,{"data-testid":"button-bulk-schedule",children:[e.jsx(Y,{className:"w-4 h-4 mr-2"}),"Bulk Schedule"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs(o,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"This Week"}),e.jsx(te,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"24"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Shifts scheduled"})]})]}),e.jsxs(o,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Available Workers"}),e.jsx(re,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"12"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Ready for shifts"})]})]}),e.jsxs(o,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Coverage Rate"}),e.jsx(ie,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"94%"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Shifts covered"})]})]}),e.jsxs(o,{children:[e.jsxs(m,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(x,{className:"text-sm font-medium",children:"Pending Confirmations"}),e.jsx(ae,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs(h,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"6"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Awaiting response"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(ee,{})}),e.jsx("div",{children:e.jsx(se,{})})]}),e.jsx(de,{}),e.jsxs(o,{children:[e.jsxs(m,{children:[e.jsx(x,{children:"Upcoming Shifts"}),e.jsx(z,{children:"Next 7 days scheduled shifts"})]}),e.jsx(h,{children:e.jsx("div",{className:"space-y-4",children:[{id:"1",worker:"John Smith",job:"Senior Frontend Developer",date:"Jan 15, 2024",time:"09:00 - 17:00",status:"confirmed",client:"TechCorp Ltd"},{id:"2",worker:"Sarah Wilson",job:"UI/UX Designer",date:"Jan 15, 2024",time:"17:00 - 23:00",status:"pending",client:"StartupXYZ"},{id:"3",worker:"Mike Johnson",job:"Full Stack Developer",date:"Jan 16, 2024",time:"23:00 - 07:00",status:"confirmed",client:"Enterprise Corp"}].map(a=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-primary/10 rounded-full flex items-center justify-center",children:e.jsx(L,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:a.worker}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.job," • ",a.client]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.date," • ",a.time]})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(P,{variant:a.status==="confirmed"?"default":"secondary",className:a.status==="confirmed"?"bg-green-100 text-green-800 dark:bg-green-900/20 dark:text-green-400":"",children:a.status==="confirmed"?"Confirmed":"Pending"}),e.jsxs(l,{variant:"outline",size:"sm",children:[e.jsx(ne,{className:"w-4 h-4 mr-2"}),"Edit"]})]})]},a.id))})})]})]})})}export{Pe as default};
