var En=Object.defineProperty;var Qn=(i,e,r)=>e in i?En(i,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[e]=r;var s=(i,e,r)=>Qn(i,typeof e!="symbol"?e+"":e,r);import{z as T}from"./index-Bc3Dxx3z.js";const o=Symbol.for("drizzle:entityKind");function C(i,e){if(!i||typeof i!="object")return!1;if(i instanceof e)return!0;if(!Object.prototype.hasOwnProperty.call(e,o))throw new Error(`Class "${e.name??"<unknown>"}" doesn't look like a Drizzle entity. If this is incorrect and the class is provided by Drizzle, please report this as a bug.`);let r=Object.getPrototypeOf(i).constructor;if(r)for(;r;){if(o in r&&r[o]===e[o])return!0;r=Object.getPrototypeOf(r)}return!1}var le;le=o;class M{constructor(e,r){s(this,"name");s(this,"keyAsName");s(this,"primary");s(this,"notNull");s(this,"default");s(this,"defaultFn");s(this,"onUpdateFn");s(this,"hasDefault");s(this,"isUnique");s(this,"uniqueName");s(this,"uniqueType");s(this,"dataType");s(this,"columnType");s(this,"enumValues");s(this,"generated");s(this,"generatedIdentity");s(this,"config");this.table=e,this.config=r,this.name=r.name,this.keyAsName=r.keyAsName,this.notNull=r.notNull,this.default=r.default,this.defaultFn=r.defaultFn,this.onUpdateFn=r.onUpdateFn,this.hasDefault=r.hasDefault,this.primary=r.primaryKey,this.isUnique=r.isUnique,this.uniqueName=r.uniqueName,this.uniqueType=r.uniqueType,this.dataType=r.dataType,this.columnType=r.columnType,this.generated=r.generated,this.generatedIdentity=r.generatedIdentity}mapFromDriverValue(e){return e}mapToDriverValue(e){return e}shouldDisableInsert(){return this.config.generated!==void 0&&this.config.generated.type!=="byDefault"}}s(M,le,"Column");var ce;ce=o;class Wr{constructor(e,r,a){s(this,"config");s(this,"$default",this.$defaultFn);s(this,"$onUpdate",this.$onUpdateFn);this.config={name:e,keyAsName:e==="",notNull:!1,default:void 0,hasDefault:!1,primaryKey:!1,isUnique:!1,uniqueName:void 0,uniqueType:void 0,dataType:r,columnType:a,generated:void 0}}$type(){return this}notNull(){return this.config.notNull=!0,this}default(e){return this.config.default=e,this.config.hasDefault=!0,this}$defaultFn(e){return this.config.defaultFn=e,this.config.hasDefault=!0,this}$onUpdateFn(e){return this.config.onUpdateFn=e,this.config.hasDefault=!0,this}primaryKey(){return this.config.primaryKey=!0,this.config.notNull=!0,this}setName(e){this.config.name===""&&(this.config.name=e)}}s(Wr,ce,"ColumnBuilder");const L=Symbol.for("drizzle:Name");var me;me=o;class Hr{constructor(e,r){s(this,"reference");s(this,"_onUpdate","no action");s(this,"_onDelete","no action");this.reference=()=>{const{name:a,columns:d,foreignColumns:c}=e();return{name:a,columns:d,foreignTable:c[0].table,foreignColumns:c}},r&&(this._onUpdate=r.onUpdate,this._onDelete=r.onDelete)}onUpdate(e){return this._onUpdate=e===void 0?"no action":e,this}onDelete(e){return this._onDelete=e===void 0?"no action":e,this}build(e){return new Yr(e,this)}}s(Hr,me,"PgForeignKeyBuilder");var pe;pe=o;class Yr{constructor(e,r){s(this,"reference");s(this,"onUpdate");s(this,"onDelete");this.table=e,this.reference=r.reference,this.onUpdate=r._onUpdate,this.onDelete=r._onDelete}getName(){const{name:e,columns:r,foreignColumns:a}=this.reference(),d=r.map(v=>v.name),c=a.map(v=>v.name),h=[this.table[L],...d,a[0].table[L],...c];return e??`${h.join("_")}_fk`}}s(Yr,pe,"PgForeignKey");function Un(i,...e){return i(...e)}function On(i,e){return`${i[L]}_${e.join("_")}_unique`}function re(i,e,r){for(let a=e;a<i.length;a++){const d=i[a];if(d==="\\"){a++;continue}if(d==='"')return[i.slice(e,a).replace(/\\/g,""),a+1];if(!r&&(d===","||d==="}"))return[i.slice(e,a).replace(/\\/g,""),a]}return[i.slice(e).replace(/\\/g,""),i.length]}function Zr(i,e=0){const r=[];let a=e,d=!1;for(;a<i.length;){const c=i[a];if(c===","){(d||a===e)&&r.push(""),d=!0,a++;continue}if(d=!1,c==="\\"){a+=2;continue}if(c==='"'){const[A,I]=re(i,a+1,!0);r.push(A),a=I;continue}if(c==="}")return[r,a+1];if(c==="{"){const[A,I]=Zr(i,a+1);r.push(A),a=I;continue}const[h,v]=re(i,a,!1);r.push(h),a=v}return[r,a]}function $n(i){const[e]=Zr(i,1);return e}function ea(i){return`{${i.map(e=>Array.isArray(e)?ea(e):typeof e=="string"?`"${e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`:`${e}`).join(",")}}`}var _e,fe;class b extends(fe=Wr,_e=o,fe){constructor(){super(...arguments);s(this,"foreignKeyConfigs",[])}array(r){return new ia(this.config.name,this,r)}references(r,a={}){return this.foreignKeyConfigs.push({ref:r,actions:a}),this}unique(r,a){return this.config.isUnique=!0,this.config.uniqueName=r,this.config.uniqueType=a==null?void 0:a.nulls,this}generatedAlwaysAs(r){return this.config.generated={as:r,type:"always",mode:"stored"},this}buildForeignKeys(r,a){return this.foreignKeyConfigs.map(({ref:d,actions:c})=>Un((h,v)=>{const A=new Hr(()=>{const I=h();return{columns:[r],foreignColumns:[I]}});return v.onUpdate&&A.onUpdate(v.onUpdate),v.onDelete&&A.onDelete(v.onDelete),A.build(a)},d,c))}buildExtraConfigColumn(r){return new ta(r,this.config)}}s(b,_e,"PgColumnBuilder");var ge,ye;class w extends(ye=M,ge=o,ye){constructor(e,r){r.uniqueName||(r.uniqueName=On(e,[r.name])),super(e,r),this.table=e}}s(w,ge,"PgColumn");var Ne,he;class ta extends(he=w,Ne=o,he){constructor(){super(...arguments);s(this,"indexConfig",{order:this.config.order??"asc",nulls:this.config.nulls??"last",opClass:this.config.opClass});s(this,"defaultConfig",{order:"asc",nulls:"last",opClass:void 0})}getSQLType(){return this.getSQLType()}asc(){return this.indexConfig.order="asc",this}desc(){return this.indexConfig.order="desc",this}nullsFirst(){return this.indexConfig.nulls="first",this}nullsLast(){return this.indexConfig.nulls="last",this}op(r){return this.indexConfig.opClass=r,this}}s(ta,Ne,"ExtraConfigColumn");var we;we=o;class U{constructor(e,r,a,d){s(this,"name");s(this,"keyAsName");s(this,"type");s(this,"indexConfig");this.name=e,this.keyAsName=r,this.type=a,this.indexConfig=d}}s(U,we,"IndexedColumn");var be,Ae;class ia extends(Ae=b,be=o,Ae){constructor(e,r,a){super(e,"array","PgArray"),this.config.baseBuilder=r,this.config.size=a}build(e){const r=this.config.baseBuilder.build(e);return new Z(e,this.config,r)}}s(ia,be,"PgArrayBuilder");var ve,Se;const J=class J extends(Se=w,ve=o,Se){constructor(r,a,d,c){super(r,a);s(this,"size");this.baseColumn=d,this.range=c,this.size=a.size}getSQLType(){return`${this.baseColumn.getSQLType()}[${typeof this.size=="number"?this.size:""}]`}mapFromDriverValue(r){return typeof r=="string"&&(r=$n(r)),r.map(a=>this.baseColumn.mapFromDriverValue(a))}mapToDriverValue(r,a=!1){const d=r.map(c=>c===null?null:C(this.baseColumn,J)?this.baseColumn.mapToDriverValue(c,!0):this.baseColumn.mapToDriverValue(c));return a?d:ea(d)}};s(J,ve,"PgArray");let Z=J;const ae=Symbol.for("drizzle:isPgEnum");function Xn(i){return!!i&&typeof i=="function"&&ae in i&&i[ae]===!0}var Ie;Ie=o;class te{constructor(e,r,a,d=!1){this._={brand:"Subquery",sql:e,selectedFields:r,alias:a,isWith:d}}}s(te,Ie,"Subquery");const Gn={startActiveSpan(i,e){return e()}},j=Symbol.for("drizzle:ViewBaseConfig"),W=Symbol.for("drizzle:Schema"),ne=Symbol.for("drizzle:Columns"),se=Symbol.for("drizzle:ExtraConfigColumns"),H=Symbol.for("drizzle:OriginalName"),Y=Symbol.for("drizzle:BaseName"),$=Symbol.for("drizzle:IsAlias"),oe=Symbol.for("drizzle:ExtraConfigBuilder"),ra=Symbol.for("drizzle:IsDrizzleTable");var Pe,Te,xe,De,Ce,qe,ze,Be,ke,Ve;Ve=o,ke=L,Be=H,ze=W,qe=ne,Ce=se,De=Y,xe=$,Te=ra,Pe=oe;class B{constructor(e,r,a){s(this,ke);s(this,Be);s(this,ze);s(this,qe);s(this,Ce);s(this,De);s(this,xe,!1);s(this,Te,!0);s(this,Pe);this[L]=this[H]=e,this[W]=r,this[Y]=a}}s(B,Ve,"Table"),s(B,"Symbol",{Name:L,Schema:W,OriginalName:H,Columns:ne,ExtraConfigColumns:se,BaseName:Y,IsAlias:$,ExtraConfigBuilder:oe});function aa(i){return typeof i=="object"&&i!==null&&ra in i}function Jn(i){return i!=null&&typeof i.getSQL=="function"}function Wn(i){var r;const e={sql:"",params:[]};for(const a of i)e.sql+=a.sql,e.params.push(...a.params),(r=a.typings)!=null&&r.length&&(e.typings||(e.typings=[]),e.typings.push(...a.typings));return e}var Fe;Fe=o;class V{constructor(e){s(this,"value");this.value=Array.isArray(e)?e:[e]}getSQL(){return new x([this])}}s(V,Fe,"StringChunk");var Ke;Ke=o;const K=class K{constructor(e){s(this,"decoder",na);s(this,"shouldInlineParams",!1);this.queryChunks=e}append(e){return this.queryChunks.push(...e.queryChunks),this}toQuery(e){return Gn.startActiveSpan("drizzle.buildSQL",r=>{const a=this.buildQueryFromSourceParams(this.queryChunks,e);return r==null||r.setAttributes({"drizzle.query.text":a.sql,"drizzle.query.params":JSON.stringify(a.params)}),a})}buildQueryFromSourceParams(e,r){const a=Object.assign({},r,{inlineParams:r.inlineParams||this.shouldInlineParams,paramStartIndex:r.paramStartIndex||{value:0}}),{casing:d,escapeName:c,escapeParam:h,prepareTyping:v,inlineParams:A,paramStartIndex:I}=a;return Wn(e.map(f=>{var F;if(C(f,V))return{sql:f.value.join(""),params:[]};if(C(f,X))return{sql:c(f.value),params:[]};if(f===void 0)return{sql:"",params:[]};if(Array.isArray(f)){const S=[new V("(")];for(const[q,Rn]of f.entries())S.push(Rn),q<f.length-1&&S.push(new V(", "));return S.push(new V(")")),this.buildQueryFromSourceParams(S,a)}if(C(f,K))return this.buildQueryFromSourceParams(f.queryChunks,{...a,inlineParams:A||f.shouldInlineParams});if(C(f,B)){const S=f[B.Symbol.Schema],q=f[B.Symbol.Name];return{sql:S===void 0||f[$]?c(q):c(S)+"."+c(q),params:[]}}if(C(f,M)){const S=d.getColumnCasing(f);if(r.invokeSource==="indexes")return{sql:c(S),params:[]};const q=f.table[B.Symbol.Schema];return{sql:f.table[$]||q===void 0?c(f.table[B.Symbol.Name])+"."+c(S):c(q)+"."+c(f.table[B.Symbol.Name])+"."+c(S),params:[]}}if(C(f,da)){const S=f[j].schema,q=f[j].name;return{sql:S===void 0||f[j].isAlias?c(q):c(S)+"."+c(q),params:[]}}if(C(f,ie)){if(C(f.value,G))return{sql:h(I.value++,f),params:[f],typings:["none"]};const S=f.value===null?null:f.encoder.mapToDriverValue(f.value);if(C(S,K))return this.buildQueryFromSourceParams([S],a);if(A)return{sql:this.mapInlineParam(S,a),params:[]};let q=["none"];return v&&(q=[v(f.encoder)]),{sql:h(I.value++,S),params:[S],typings:q}}return C(f,G)?{sql:h(I.value++,f),params:[f],typings:["none"]}:C(f,K.Aliased)&&f.fieldAlias!==void 0?{sql:c(f.fieldAlias),params:[]}:C(f,te)?f._.isWith?{sql:c(f._.alias),params:[]}:this.buildQueryFromSourceParams([new V("("),f._.sql,new V(") "),new X(f._.alias)],a):Xn(f)?f.schema?{sql:c(f.schema)+"."+c(f.enumName),params:[]}:{sql:c(f.enumName),params:[]}:Jn(f)?(F=f.shouldOmitSQLParens)!=null&&F.call(f)?this.buildQueryFromSourceParams([f.getSQL()],a):this.buildQueryFromSourceParams([new V("("),f.getSQL(),new V(")")],a):A?{sql:this.mapInlineParam(f,a),params:[]}:{sql:h(I.value++,f),params:[f],typings:["none"]}}))}mapInlineParam(e,{escapeString:r}){if(e===null)return"null";if(typeof e=="number"||typeof e=="boolean")return e.toString();if(typeof e=="string")return r(e);if(typeof e=="object"){const a=e.toString();return r(a==="[object Object]"?JSON.stringify(e):a)}throw new Error("Unexpected param value: "+e)}getSQL(){return this}as(e){return e===void 0?this:new K.Aliased(this,e)}mapWith(e){return this.decoder=typeof e=="function"?{mapFromDriverValue:e}:e,this}inlineParams(){return this.shouldInlineParams=!0,this}if(e){return e?this:void 0}};s(K,Ke,"SQL");let x=K;var Le;Le=o;class X{constructor(e){s(this,"brand");this.value=e}getSQL(){return new x([this])}}s(X,Le,"Name");const na={mapFromDriverValue:i=>i},sa={mapToDriverValue:i=>i};({...na,...sa});var je;je=o;class ie{constructor(e,r=sa){s(this,"brand");this.value=e,this.encoder=r}getSQL(){return new x([this])}}s(ie,je,"Param");function m(i,...e){const r=[];(e.length>0||i.length>0&&i[0]!=="")&&r.push(new V(i[0]));for(const[a,d]of e.entries())r.push(d,new V(i[a+1]));return new x(r)}(i=>{function e(){return new x([])}i.empty=e;function r(A){return new x(A)}i.fromList=r;function a(A){return new x([new V(A)])}i.raw=a;function d(A,I){const f=[];for(const[F,S]of A.entries())F>0&&I!==void 0&&f.push(I),f.push(S);return new x(f)}i.join=d;function c(A){return new X(A)}i.identifier=c;function h(A){return new G(A)}i.placeholder=h;function v(A,I){return new ie(A,I)}i.param=v})(m||(m={}));(i=>{var r;r=o;const a=class a{constructor(c,h){s(this,"isSelectionField",!1);this.sql=c,this.fieldAlias=h}getSQL(){return this.sql}clone(){return new a(this.sql,this.fieldAlias)}};s(a,r,"SQL.Aliased");let e=a;i.Aliased=e})(x||(x={}));var Me;Me=o;class G{constructor(e){this.name=e}getSQL(){return new x([this])}}s(G,Me,"Placeholder");const oa=Symbol.for("drizzle:IsDrizzleView");var Re,Ee,Qe;Qe=o,Ee=j,Re=oa;class da{constructor({name:e,schema:r,selectedFields:a,query:d}){s(this,Ee);s(this,Re,!0);this[j]={name:e,originalName:e,schema:r,selectedFields:a,query:d,isExisting:!d,isAlias:!1}}getSQL(){return new x([this])}}s(da,Qe,"View");function Hn(i){return typeof i=="object"&&i!==null&&oa in i}M.prototype.getSQL=function(){return new x([this])};B.prototype.getSQL=function(){return new x([this])};te.prototype.getSQL=function(){return new x([this])};function Yn(i){return i[B.Symbol.Columns]}function Zn(i){return i[j].selectedFields}function z(i,e){return{name:typeof i=="string"&&i.length>0?i:"",config:typeof i=="object"?i:e}}var Ue,Oe;class Q extends(Oe=b,Ue=o,Oe){generatedAlwaysAsIdentity(e){if(e){const{name:r,...a}=e;this.config.generatedIdentity={type:"always",sequenceName:r,sequenceOptions:a}}else this.config.generatedIdentity={type:"always"};return this.config.hasDefault=!0,this.config.notNull=!0,this}generatedByDefaultAsIdentity(e){if(e){const{name:r,...a}=e;this.config.generatedIdentity={type:"byDefault",sequenceName:r,sequenceOptions:a}}else this.config.generatedIdentity={type:"byDefault"};return this.config.hasDefault=!0,this.config.notNull=!0,this}}s(Q,Ue,"PgIntColumnBaseBuilder");var $e,Xe;class ua extends(Xe=Q,$e=o,Xe){constructor(e){super(e,"number","PgBigInt53")}build(e){return new la(e,this.config)}}s(ua,$e,"PgBigInt53Builder");var Ge,Je;class la extends(Je=w,Ge=o,Je){getSQLType(){return"bigint"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(la,Ge,"PgBigInt53");var We,He;class ca extends(He=Q,We=o,He){constructor(e){super(e,"bigint","PgBigInt64")}build(e){return new ma(e,this.config)}}s(ca,We,"PgBigInt64Builder");var Ye,Ze;class ma extends(Ze=w,Ye=o,Ze){getSQLType(){return"bigint"}mapFromDriverValue(e){return BigInt(e)}}s(ma,Ye,"PgBigInt64");function es(i,e){const{name:r,config:a}=z(i,e);return a.mode==="number"?new ua(r):new ca(r)}var et,tt;class pa extends(tt=b,et=o,tt){constructor(e){super(e,"number","PgBigSerial53"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new _a(e,this.config)}}s(pa,et,"PgBigSerial53Builder");var it,rt;class _a extends(rt=w,it=o,rt){getSQLType(){return"bigserial"}mapFromDriverValue(e){return typeof e=="number"?e:Number(e)}}s(_a,it,"PgBigSerial53");var at,nt;class fa extends(nt=b,at=o,nt){constructor(e){super(e,"bigint","PgBigSerial64"),this.config.hasDefault=!0}build(e){return new ga(e,this.config)}}s(fa,at,"PgBigSerial64Builder");var st,ot;class ga extends(ot=w,st=o,ot){getSQLType(){return"bigserial"}mapFromDriverValue(e){return BigInt(e)}}s(ga,st,"PgBigSerial64");function ts(i,e){const{name:r,config:a}=z(i,e);return a.mode==="number"?new pa(r):new fa(r)}var dt,ut;class ya extends(ut=b,dt=o,ut){constructor(e){super(e,"boolean","PgBoolean")}build(e){return new Na(e,this.config)}}s(ya,dt,"PgBooleanBuilder");var lt,ct;class Na extends(ct=w,lt=o,ct){getSQLType(){return"boolean"}}s(Na,lt,"PgBoolean");function N(i){return new ya(i??"")}var mt,pt;class ha extends(pt=b,mt=o,pt){constructor(e,r){super(e,"string","PgChar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new wa(e,this.config)}}s(ha,mt,"PgCharBuilder");var _t,ft;class wa extends(ft=w,_t=o,ft){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"char":`char(${this.length})`}}s(wa,_t,"PgChar");function is(i,e={}){const{name:r,config:a}=z(i,e);return new ha(r,a)}var gt,yt;class ba extends(yt=b,gt=o,yt){constructor(e){super(e,"string","PgCidr")}build(e){return new Aa(e,this.config)}}s(ba,gt,"PgCidrBuilder");var Nt,ht;class Aa extends(ht=w,Nt=o,ht){getSQLType(){return"cidr"}}s(Aa,Nt,"PgCidr");function rs(i){return new ba(i??"")}var wt,bt;class va extends(bt=b,wt=o,bt){constructor(e,r,a){super(e,"custom","PgCustomColumn"),this.config.fieldConfig=r,this.config.customTypeParams=a}build(e){return new Sa(e,this.config)}}s(va,wt,"PgCustomColumnBuilder");var At,vt;class Sa extends(vt=w,At=o,vt){constructor(r,a){super(r,a);s(this,"sqlName");s(this,"mapTo");s(this,"mapFrom");this.sqlName=a.customTypeParams.dataType(a.fieldConfig),this.mapTo=a.customTypeParams.toDriver,this.mapFrom=a.customTypeParams.fromDriver}getSQLType(){return this.sqlName}mapFromDriverValue(r){return typeof this.mapFrom=="function"?this.mapFrom(r):r}mapToDriverValue(r){return typeof this.mapTo=="function"?this.mapTo(r):r}}s(Sa,At,"PgCustomColumn");function as(i){return(e,r)=>{const{name:a,config:d}=z(e,r);return new va(a,d,i)}}var St,It;class R extends(It=b,St=o,It){defaultNow(){return this.default(m`now()`)}}s(R,St,"PgDateColumnBaseBuilder");var Pt,Tt;class Ia extends(Tt=R,Pt=o,Tt){constructor(e){super(e,"date","PgDate")}build(e){return new Pa(e,this.config)}}s(Ia,Pt,"PgDateBuilder");var xt,Dt;class Pa extends(Dt=w,xt=o,Dt){getSQLType(){return"date"}mapFromDriverValue(e){return new Date(e)}mapToDriverValue(e){return e.toISOString()}}s(Pa,xt,"PgDate");var Ct,qt;class Ta extends(qt=R,Ct=o,qt){constructor(e){super(e,"string","PgDateString")}build(e){return new xa(e,this.config)}}s(Ta,Ct,"PgDateStringBuilder");var zt,Bt;class xa extends(Bt=w,zt=o,Bt){getSQLType(){return"date"}}s(xa,zt,"PgDateString");function ns(i,e){const{name:r,config:a}=z(i,e);return(a==null?void 0:a.mode)==="date"?new Ia(r):new Ta(r)}var kt,Vt;class Da extends(Vt=b,kt=o,Vt){constructor(e){super(e,"number","PgDoublePrecision")}build(e){return new Ca(e,this.config)}}s(Da,kt,"PgDoublePrecisionBuilder");var Ft,Kt;class Ca extends(Kt=w,Ft=o,Kt){getSQLType(){return"double precision"}mapFromDriverValue(e){return typeof e=="string"?Number.parseFloat(e):e}}s(Ca,Ft,"PgDoublePrecision");function ss(i){return new Da(i??"")}var Lt,jt;class qa extends(jt=b,Lt=o,jt){constructor(e){super(e,"string","PgInet")}build(e){return new za(e,this.config)}}s(qa,Lt,"PgInetBuilder");var Mt,Rt;class za extends(Rt=w,Mt=o,Rt){getSQLType(){return"inet"}}s(za,Mt,"PgInet");function os(i){return new qa(i??"")}var Et,Qt;class Ba extends(Qt=Q,Et=o,Qt){constructor(e){super(e,"number","PgInteger")}build(e){return new ka(e,this.config)}}s(Ba,Et,"PgIntegerBuilder");var Ut,Ot;class ka extends(Ot=w,Ut=o,Ot){getSQLType(){return"integer"}mapFromDriverValue(e){return typeof e=="string"?Number.parseInt(e):e}}s(ka,Ut,"PgInteger");function u(i){return new Ba(i??"")}var $t,Xt;class Va extends(Xt=b,$t=o,Xt){constructor(e,r){super(e,"string","PgInterval"),this.config.intervalConfig=r}build(e){return new Fa(e,this.config)}}s(Va,$t,"PgIntervalBuilder");var Gt,Jt;class Fa extends(Jt=w,Gt=o,Jt){constructor(){super(...arguments);s(this,"fields",this.config.intervalConfig.fields);s(this,"precision",this.config.intervalConfig.precision)}getSQLType(){const r=this.fields?` ${this.fields}`:"",a=this.precision?`(${this.precision})`:"";return`interval${r}${a}`}}s(Fa,Gt,"PgInterval");function ds(i,e={}){const{name:r,config:a}=z(i,e);return new Va(r,a)}var Wt,Ht;class Ka extends(Ht=b,Wt=o,Ht){constructor(e){super(e,"json","PgJson")}build(e){return new La(e,this.config)}}s(Ka,Wt,"PgJsonBuilder");var Yt,Zt;class La extends(Zt=w,Yt=o,Zt){constructor(e,r){super(e,r)}getSQLType(){return"json"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(La,Yt,"PgJson");function us(i){return new Ka(i??"")}var ei,ti;class ja extends(ti=b,ei=o,ti){constructor(e){super(e,"json","PgJsonb")}build(e){return new Ma(e,this.config)}}s(ja,ei,"PgJsonbBuilder");var ii,ri;class Ma extends(ri=w,ii=o,ri){constructor(e,r){super(e,r)}getSQLType(){return"jsonb"}mapToDriverValue(e){return JSON.stringify(e)}mapFromDriverValue(e){if(typeof e=="string")try{return JSON.parse(e)}catch{return e}return e}}s(Ma,ii,"PgJsonb");function p(i){return new ja(i??"")}var ai,ni;class Ra extends(ni=b,ai=o,ni){constructor(e){super(e,"array","PgLine")}build(e){return new Ea(e,this.config)}}s(Ra,ai,"PgLineBuilder");var si,oi;class Ea extends(oi=w,si=o,oi){getSQLType(){return"line"}mapFromDriverValue(e){const[r,a,d]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(a),Number.parseFloat(d)]}mapToDriverValue(e){return`{${e[0]},${e[1]},${e[2]}}`}}s(Ea,si,"PgLine");var di,ui;class Qa extends(ui=b,di=o,ui){constructor(e){super(e,"json","PgLineABC")}build(e){return new Ua(e,this.config)}}s(Qa,di,"PgLineABCBuilder");var li,ci;class Ua extends(ci=w,li=o,ci){getSQLType(){return"line"}mapFromDriverValue(e){const[r,a,d]=e.slice(1,-1).split(",");return{a:Number.parseFloat(r),b:Number.parseFloat(a),c:Number.parseFloat(d)}}mapToDriverValue(e){return`{${e.a},${e.b},${e.c}}`}}s(Ua,li,"PgLineABC");function ls(i,e){const{name:r,config:a}=z(i,e);return!(a!=null&&a.mode)||a.mode==="tuple"?new Ra(r):new Qa(r)}var mi,pi;class Oa extends(pi=b,mi=o,pi){constructor(e){super(e,"string","PgMacaddr")}build(e){return new $a(e,this.config)}}s(Oa,mi,"PgMacaddrBuilder");var _i,fi;class $a extends(fi=w,_i=o,fi){getSQLType(){return"macaddr"}}s($a,_i,"PgMacaddr");function cs(i){return new Oa(i??"")}var gi,yi;class Xa extends(yi=b,gi=o,yi){constructor(e){super(e,"string","PgMacaddr8")}build(e){return new Ga(e,this.config)}}s(Xa,gi,"PgMacaddr8Builder");var Ni,hi;class Ga extends(hi=w,Ni=o,hi){getSQLType(){return"macaddr8"}}s(Ga,Ni,"PgMacaddr8");function ms(i){return new Xa(i??"")}var wi,bi;class Ja extends(bi=b,wi=o,bi){constructor(e,r,a){super(e,"string","PgNumeric"),this.config.precision=r,this.config.scale=a}build(e){return new Wa(e,this.config)}}s(Ja,wi,"PgNumericBuilder");var Ai,vi;class Wa extends(vi=w,Ai=o,vi){constructor(r,a){super(r,a);s(this,"precision");s(this,"scale");this.precision=a.precision,this.scale=a.scale}getSQLType(){return this.precision!==void 0&&this.scale!==void 0?`numeric(${this.precision}, ${this.scale})`:this.precision===void 0?"numeric":`numeric(${this.precision})`}}s(Wa,Ai,"PgNumeric");function Ha(i,e){const{name:r,config:a}=z(i,e);return new Ja(r,a==null?void 0:a.precision,a==null?void 0:a.scale)}const y=Ha;var Si,Ii;class Ya extends(Ii=b,Si=o,Ii){constructor(e){super(e,"array","PgPointTuple")}build(e){return new Za(e,this.config)}}s(Ya,Si,"PgPointTupleBuilder");var Pi,Ti;class Za extends(Ti=w,Pi=o,Ti){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,a]=e.slice(1,-1).split(",");return[Number.parseFloat(r),Number.parseFloat(a)]}return[e.x,e.y]}mapToDriverValue(e){return`(${e[0]},${e[1]})`}}s(Za,Pi,"PgPointTuple");var xi,Di;class en extends(Di=b,xi=o,Di){constructor(e){super(e,"json","PgPointObject")}build(e){return new tn(e,this.config)}}s(en,xi,"PgPointObjectBuilder");var Ci,qi;class tn extends(qi=w,Ci=o,qi){getSQLType(){return"point"}mapFromDriverValue(e){if(typeof e=="string"){const[r,a]=e.slice(1,-1).split(",");return{x:Number.parseFloat(r),y:Number.parseFloat(a)}}return e}mapToDriverValue(e){return`(${e.x},${e.y})`}}s(tn,Ci,"PgPointObject");function ps(i,e){const{name:r,config:a}=z(i,e);return!(a!=null&&a.mode)||a.mode==="tuple"?new Ya(r):new en(r)}function _s(i){const e=[];for(let r=0;r<i.length;r+=2)e.push(Number.parseInt(i.slice(r,r+2),16));return new Uint8Array(e)}function de(i,e){const r=new ArrayBuffer(8),a=new DataView(r);for(let d=0;d<8;d++)a.setUint8(d,i[e+d]);return a.getFloat64(0,!0)}function rn(i){const e=_s(i);let r=0;const a=e[r];r+=1;const d=new DataView(e.buffer),c=d.getUint32(r,a===1);if(r+=4,c&536870912&&(d.getUint32(r,a===1),r+=4),(c&65535)===1){const h=de(e,r);r+=8;const v=de(e,r);return r+=8,[h,v]}throw new Error("Unsupported geometry type")}var zi,Bi;class an extends(Bi=b,zi=o,Bi){constructor(e){super(e,"array","PgGeometry")}build(e){return new nn(e,this.config)}}s(an,zi,"PgGeometryBuilder");var ki,Vi;class nn extends(Vi=w,ki=o,Vi){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){return rn(e)}mapToDriverValue(e){return`point(${e[0]} ${e[1]})`}}s(nn,ki,"PgGeometry");var Fi,Ki;class sn extends(Ki=b,Fi=o,Ki){constructor(e){super(e,"json","PgGeometryObject")}build(e){return new on(e,this.config)}}s(sn,Fi,"PgGeometryObjectBuilder");var Li,ji;class on extends(ji=w,Li=o,ji){getSQLType(){return"geometry(point)"}mapFromDriverValue(e){const r=rn(e);return{x:r[0],y:r[1]}}mapToDriverValue(e){return`point(${e.x} ${e.y})`}}s(on,Li,"PgGeometryObject");function fs(i,e){const{name:r,config:a}=z(i,e);return!(a!=null&&a.mode)||a.mode==="tuple"?new an(r):new sn(r)}var Mi,Ri;class dn extends(Ri=b,Mi=o,Ri){constructor(e,r){super(e,"number","PgReal"),this.config.length=r}build(e){return new un(e,this.config)}}s(dn,Mi,"PgRealBuilder");var Ei,Qi;class un extends(Qi=w,Ei=o,Qi){constructor(r,a){super(r,a);s(this,"mapFromDriverValue",r=>typeof r=="string"?Number.parseFloat(r):r)}getSQLType(){return"real"}}s(un,Ei,"PgReal");function gs(i){return new dn(i??"")}var Ui,Oi;class ln extends(Oi=b,Ui=o,Oi){constructor(e){super(e,"number","PgSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new cn(e,this.config)}}s(ln,Ui,"PgSerialBuilder");var $i,Xi;class cn extends(Xi=w,$i=o,Xi){getSQLType(){return"serial"}}s(cn,$i,"PgSerial");function ys(i){return new ln(i??"")}var Gi,Ji;class mn extends(Ji=Q,Gi=o,Ji){constructor(e){super(e,"number","PgSmallInt")}build(e){return new pn(e,this.config)}}s(mn,Gi,"PgSmallIntBuilder");var Wi,Hi;class pn extends(Hi=w,Wi=o,Hi){constructor(){super(...arguments);s(this,"mapFromDriverValue",r=>typeof r=="string"?Number(r):r)}getSQLType(){return"smallint"}}s(pn,Wi,"PgSmallInt");function Ns(i){return new mn(i??"")}var Yi,Zi;class _n extends(Zi=b,Yi=o,Zi){constructor(e){super(e,"number","PgSmallSerial"),this.config.hasDefault=!0,this.config.notNull=!0}build(e){return new fn(e,this.config)}}s(_n,Yi,"PgSmallSerialBuilder");var er,tr;class fn extends(tr=w,er=o,tr){getSQLType(){return"smallserial"}}s(fn,er,"PgSmallSerial");function hs(i){return new _n(i??"")}var ir,rr;class gn extends(rr=b,ir=o,rr){constructor(e,r){super(e,"string","PgText"),this.config.enumValues=r.enum}build(e){return new yn(e,this.config)}}s(gn,ir,"PgTextBuilder");var ar,nr;class yn extends(nr=w,ar=o,nr){constructor(){super(...arguments);s(this,"enumValues",this.config.enumValues)}getSQLType(){return"text"}}s(yn,ar,"PgText");function l(i,e={}){const{name:r,config:a}=z(i,e);return new gn(r,a)}var sr,or;class Nn extends(or=R,sr=o,or){constructor(e,r,a){super(e,"string","PgTime"),this.withTimezone=r,this.precision=a,this.config.withTimezone=r,this.config.precision=a}build(e){return new hn(e,this.config)}}s(Nn,sr,"PgTimeBuilder");var dr,ur;class hn extends(ur=w,dr=o,ur){constructor(r,a){super(r,a);s(this,"withTimezone");s(this,"precision");this.withTimezone=a.withTimezone,this.precision=a.precision}getSQLType(){return`time${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(hn,dr,"PgTime");function ws(i,e={}){const{name:r,config:a}=z(i,e);return new Nn(r,a.withTimezone??!1,a.precision)}var lr,cr;class wn extends(cr=R,lr=o,cr){constructor(e,r,a){super(e,"date","PgTimestamp"),this.config.withTimezone=r,this.config.precision=a}build(e){return new bn(e,this.config)}}s(wn,lr,"PgTimestampBuilder");var mr,pr;class bn extends(pr=w,mr=o,pr){constructor(r,a){super(r,a);s(this,"withTimezone");s(this,"precision");s(this,"mapFromDriverValue",r=>new Date(this.withTimezone?r:r+"+0000"));s(this,"mapToDriverValue",r=>r.toISOString());this.withTimezone=a.withTimezone,this.precision=a.precision}getSQLType(){return`timestamp${this.precision===void 0?"":` (${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(bn,mr,"PgTimestamp");var _r,fr;class An extends(fr=R,_r=o,fr){constructor(e,r,a){super(e,"string","PgTimestampString"),this.config.withTimezone=r,this.config.precision=a}build(e){return new vn(e,this.config)}}s(An,_r,"PgTimestampStringBuilder");var gr,yr;class vn extends(yr=w,gr=o,yr){constructor(r,a){super(r,a);s(this,"withTimezone");s(this,"precision");this.withTimezone=a.withTimezone,this.precision=a.precision}getSQLType(){return`timestamp${this.precision===void 0?"":`(${this.precision})`}${this.withTimezone?" with time zone":""}`}}s(vn,gr,"PgTimestampString");function n(i,e={}){const{name:r,config:a}=z(i,e);return(a==null?void 0:a.mode)==="string"?new An(r,a.withTimezone??!1,a.precision):new wn(r,(a==null?void 0:a.withTimezone)??!1,a==null?void 0:a.precision)}var Nr,hr;class Sn extends(hr=b,Nr=o,hr){constructor(e){super(e,"string","PgUUID")}defaultRandom(){return this.default(m`gen_random_uuid()`)}build(e){return new In(e,this.config)}}s(Sn,Nr,"PgUUIDBuilder");var wr,br;class In extends(br=w,wr=o,br){getSQLType(){return"uuid"}}s(In,wr,"PgUUID");function bs(i){return new Sn(i??"")}var Ar,vr;class Pn extends(vr=b,Ar=o,vr){constructor(e,r){super(e,"string","PgVarchar"),this.config.length=r.length,this.config.enumValues=r.enum}build(e){return new Tn(e,this.config)}}s(Pn,Ar,"PgVarcharBuilder");var Sr,Ir;class Tn extends(Ir=w,Sr=o,Ir){constructor(){super(...arguments);s(this,"length",this.config.length);s(this,"enumValues",this.config.enumValues)}getSQLType(){return this.length===void 0?"varchar":`varchar(${this.length})`}}s(Tn,Sr,"PgVarchar");function t(i,e={}){const{name:r,config:a}=z(i,e);return new Pn(r,a)}var Pr,Tr;class xn extends(Tr=b,Pr=o,Tr){constructor(e,r){super(e,"string","PgBinaryVector"),this.config.dimensions=r.dimensions}build(e){return new Dn(e,this.config)}}s(xn,Pr,"PgBinaryVectorBuilder");var xr,Dr;class Dn extends(Dr=w,xr=o,Dr){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`bit(${this.dimensions})`}}s(Dn,xr,"PgBinaryVector");function As(i,e){const{name:r,config:a}=z(i,e);return new xn(r,a)}var Cr,qr;class Cn extends(qr=b,Cr=o,qr){constructor(e,r){super(e,"array","PgHalfVector"),this.config.dimensions=r.dimensions}build(e){return new qn(e,this.config)}}s(Cn,Cr,"PgHalfVectorBuilder");var zr,Br;class qn extends(Br=w,zr=o,Br){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`halfvec(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}s(qn,zr,"PgHalfVector");function vs(i,e){const{name:r,config:a}=z(i,e);return new Cn(r,a)}var kr,Vr;class zn extends(Vr=b,kr=o,Vr){constructor(e,r){super(e,"string","PgSparseVector"),this.config.dimensions=r.dimensions}build(e){return new Bn(e,this.config)}}s(zn,kr,"PgSparseVectorBuilder");var Fr,Kr;class Bn extends(Kr=w,Fr=o,Kr){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`sparsevec(${this.dimensions})`}}s(Bn,Fr,"PgSparseVector");function Ss(i,e){const{name:r,config:a}=z(i,e);return new zn(r,a)}var Lr,jr;class kn extends(jr=b,Lr=o,jr){constructor(e,r){super(e,"array","PgVector"),this.config.dimensions=r.dimensions}build(e){return new Vn(e,this.config)}}s(kn,Lr,"PgVectorBuilder");var Mr,Rr;class Vn extends(Rr=w,Mr=o,Rr){constructor(){super(...arguments);s(this,"dimensions",this.config.dimensions)}getSQLType(){return`vector(${this.dimensions})`}mapToDriverValue(r){return JSON.stringify(r)}mapFromDriverValue(r){return r.slice(1,-1).split(",").map(a=>Number.parseFloat(a))}}s(Vn,Mr,"PgVector");function Is(i,e){const{name:r,config:a}=z(i,e);return new kn(r,a)}function Ps(){return{bigint:es,bigserial:ts,boolean:N,char:is,cidr:rs,customType:as,date:ns,doublePrecision:ss,inet:os,integer:u,interval:ds,json:us,jsonb:p,line:ls,macaddr:cs,macaddr8:ms,numeric:Ha,point:ps,geometry:fs,real:gs,serial:ys,smallint:Ns,smallserial:hs,text:l,time:ws,timestamp:n,uuid:bs,varchar:t,bit:As,halfvec:vs,sparsevec:Ss,vector:Is}}const ee=Symbol.for("drizzle:PgInlineForeignKeys"),ue=Symbol.for("drizzle:EnableRLS");var Er,Qr,Ur,Or,$r;class E extends($r=B,Or=o,Ur=ee,Qr=ue,Er=B.Symbol.ExtraConfigBuilder,$r){constructor(){super(...arguments);s(this,Ur,[]);s(this,Qr,!1);s(this,Er)}}s(E,Or,"PgTable"),s(E,"Symbol",Object.assign({},B.Symbol,{InlineForeignKeys:ee,EnableRLS:ue}));function Ts(i,e,r,a,d=i){const c=new E(i,a,d),h=typeof e=="function"?e(Ps()):e,v=Object.fromEntries(Object.entries(h).map(([f,F])=>{const S=F;S.setName(f);const q=S.build(c);return c[ee].push(...S.buildForeignKeys(q,c)),[f,q]})),A=Object.fromEntries(Object.entries(h).map(([f,F])=>{const S=F;S.setName(f);const q=S.buildExtraConfigColumn(c);return[f,q]})),I=Object.assign(c,v);return I[B.Symbol.Columns]=v,I[B.Symbol.ExtraConfigColumns]=A,r&&(I[E.Symbol.ExtraConfigBuilder]=r),Object.assign(I,{enableRLS:()=>(I[E.Symbol.EnableRLS]=!0,I)})}const _=(i,e,r)=>Ts(i,e,r,void 0);var Xr;Xr=o;class Fn{constructor(e,r){this.unique=e,this.name=r}on(...e){return new O(e.map(r=>{if(C(r,x))return r;r=r;const a=new U(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=JSON.parse(JSON.stringify(r.defaultConfig)),a}),this.unique,!1,this.name)}onOnly(...e){return new O(e.map(r=>{if(C(r,x))return r;r=r;const a=new U(r.name,!!r.keyAsName,r.columnType,r.indexConfig);return r.indexConfig=r.defaultConfig,a}),this.unique,!0,this.name)}using(e,...r){return new O(r.map(a=>{if(C(a,x))return a;a=a;const d=new U(a.name,!!a.keyAsName,a.columnType,a.indexConfig);return a.indexConfig=JSON.parse(JSON.stringify(a.defaultConfig)),d}),this.unique,!0,this.name,e)}}s(Fn,Xr,"PgIndexBuilderOn");var Gr;Gr=o;class O{constructor(e,r,a,d,c="btree"){s(this,"config");this.config={name:d,columns:e,unique:r,only:a,method:c}}concurrently(){return this.config.concurrently=!0,this}with(e){return this.config.with=e,this}where(e){return this.config.where=e,this}build(e){return new Kn(this.config,e)}}s(O,Gr,"PgIndexBuilder");var Jr;Jr=o;class Kn{constructor(e,r){s(this,"config");this.config={...e,table:r}}}s(Kn,Jr,"PgIndex");function k(i){return new Fn(!1,i)}const P={INT8_MIN:-128,INT8_MAX:127,INT8_UNSIGNED_MAX:255,INT16_MIN:-32768,INT16_MAX:32767,INT16_UNSIGNED_MAX:65535,INT24_MIN:-8388608,INT24_MAX:8388607,INT24_UNSIGNED_MAX:16777215,INT32_MIN:-2147483648,INT32_MAX:2147483647,INT32_UNSIGNED_MAX:4294967295,INT48_MIN:-0x800000000000,INT48_MAX:0x7fffffffffff,INT48_UNSIGNED_MAX:0xffffffffffff,INT64_MIN:-9223372036854775808n,INT64_MAX:9223372036854775807n,INT64_UNSIGNED_MAX:18446744073709551615n};function D(i,e){return e.includes(i.columnType)}function xs(i){return"enumValues"in i&&Array.isArray(i.enumValues)&&i.enumValues.length>0}const Ds=T.union([T.string(),T.number(),T.boolean(),T.null()]),Cs=T.union([Ds,T.record(T.any()),T.array(T.any())]),qs=T.custom(i=>i instanceof Buffer);function Ln(i,e){const r=(e==null?void 0:e.zodInstance)??T,a=(e==null?void 0:e.coerce)??{};let d;return xs(i)&&(d=i.enumValues.length?r.enum(i.enumValues):r.string()),d||(D(i,["PgGeometry","PgPointTuple"])?d=r.tuple([r.number(),r.number()]):D(i,["PgGeometryObject","PgPointObject"])?d=r.object({x:r.number(),y:r.number()}):D(i,["PgHalfVector","PgVector"])?(d=r.array(r.number()),d=i.dimensions?d.length(i.dimensions):d):D(i,["PgLine"])?d=r.tuple([r.number(),r.number(),r.number()]):D(i,["PgLineABC"])?d=r.object({a:r.number(),b:r.number(),c:r.number()}):D(i,["PgArray"])?(d=r.array(Ln(i.baseColumn,r)),d=i.size?d.length(i.size):d):i.dataType==="array"?d=r.array(r.any()):i.dataType==="number"?d=zs(i,r,a):i.dataType==="bigint"?d=Bs(i,r,a):i.dataType==="boolean"?d=a===!0||a.boolean?r.coerce.boolean():r.boolean():i.dataType==="date"?d=a===!0||a.date?r.coerce.date():r.date():i.dataType==="string"?d=ks(i,r,a):i.dataType==="json"?d=Cs:i.dataType==="custom"?d=r.any():i.dataType==="buffer"&&(d=qs)),d||(d=r.any()),d}function zs(i,e,r){let a=i.getSQLType().includes("unsigned"),d,c,h=!1;D(i,["MySqlTinyInt","SingleStoreTinyInt"])?(d=a?0:P.INT8_MIN,c=a?P.INT8_UNSIGNED_MAX:P.INT8_MAX,h=!0):D(i,["PgSmallInt","PgSmallSerial","MySqlSmallInt","SingleStoreSmallInt"])?(d=a?0:P.INT16_MIN,c=a?P.INT16_UNSIGNED_MAX:P.INT16_MAX,h=!0):D(i,["PgReal","MySqlFloat","MySqlMediumInt","SingleStoreMediumInt","SingleStoreFloat"])?(d=a?0:P.INT24_MIN,c=a?P.INT24_UNSIGNED_MAX:P.INT24_MAX,h=D(i,["MySqlMediumInt","SingleStoreMediumInt"])):D(i,["PgInteger","PgSerial","MySqlInt","SingleStoreInt"])?(d=a?0:P.INT32_MIN,c=a?P.INT32_UNSIGNED_MAX:P.INT32_MAX,h=!0):D(i,["PgDoublePrecision","MySqlReal","MySqlDouble","SingleStoreReal","SingleStoreDouble","SQLiteReal"])?(d=a?0:P.INT48_MIN,c=a?P.INT48_UNSIGNED_MAX:P.INT48_MAX):D(i,["PgBigInt53","PgBigSerial53","MySqlBigInt53","MySqlSerial","SingleStoreBigInt53","SingleStoreSerial","SQLiteInteger"])?(a=a||D(i,["MySqlSerial","SingleStoreSerial"]),d=a?0:Number.MIN_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER,h=!0):D(i,["MySqlYear","SingleStoreYear"])?(d=1901,c=2155,h=!0):(d=Number.MIN_SAFE_INTEGER,c=Number.MAX_SAFE_INTEGER);let v=r===!0||r!=null&&r.number?e.coerce.number():e.number();return v=v.min(d).max(c),h?v.int():v}function Bs(i,e,r){const a=i.getSQLType().includes("unsigned"),d=a?0n:P.INT64_MIN,c=a?P.INT64_UNSIGNED_MAX:P.INT64_MAX;return(r===!0||r!=null&&r.bigint?e.coerce.bigint():e.bigint()).min(d).max(c)}function ks(i,e,r){if(D(i,["PgUUID"]))return e.string().uuid();let a,d,c=!1;D(i,["PgVarchar","SQLiteText"])?a=i.length:D(i,["MySqlVarChar","SingleStoreVarChar"])?a=i.length??P.INT16_UNSIGNED_MAX:D(i,["MySqlText","SingleStoreText"])&&(i.textType==="longtext"?a=P.INT32_UNSIGNED_MAX:i.textType==="mediumtext"?a=P.INT24_UNSIGNED_MAX:i.textType==="text"?a=P.INT16_UNSIGNED_MAX:a=P.INT8_UNSIGNED_MAX),D(i,["PgChar","MySqlChar","SingleStoreChar"])&&(a=i.length,c=!0),D(i,["PgBinaryVector"])&&(d=/^[01]+$/,a=i.dimensions);let h=r===!0||r!=null&&r.string?e.coerce.string():e.string();return h=d?h.regex(d):h,a&&c?h.length(a):a?h.max(a):h}function jn(i){return aa(i)?Yn(i):Zn(i)}function Mn(i,e,r,a){const d={};for(const[c,h]of Object.entries(i)){if(!C(h,M)&&!C(h,x)&&!C(h,x.Aliased)&&typeof h=="object"){const F=aa(h)||Hn(h)?jn(h):h;d[c]=Mn(F,e[c]??{},r,a);continue}const v=e[c];if(v!==void 0&&typeof v!="function"){d[c]=v;continue}const A=C(h,M)?h:void 0,I=A?Ln(A,a):T.any(),f=typeof v=="function"?v(I):I;r.never(A)||(d[c]=f,A&&(r.nullable(A)&&(d[c]=d[c].nullable()),r.optional(A)&&(d[c]=d[c].optional())))}return T.object(d)}const Vs={never:i=>{var e,r;return((e=i==null?void 0:i.generated)==null?void 0:e.type)==="always"||((r=i==null?void 0:i.generatedIdentity)==null?void 0:r.type)==="always"},optional:i=>!i.notNull||i.notNull&&i.hasDefault,nullable:i=>!i.notNull},g=(i,e)=>{const r=jn(i);return Mn(r,{},Vs)};_("sessions",{sid:t("sid").primaryKey(),sess:p("sess").notNull(),expire:n("expire").notNull()},i=>[k("IDX_session_expire").on(i.expire)]);const Fs=_("users",{id:t("id").primaryKey().default(m`gen_random_uuid()`),email:t("email").unique(),password:t("password"),firstName:t("first_name"),lastName:t("last_name"),profileImageUrl:t("profile_image_url"),role:t("role",{enum:["admin","client","worker"]}).notNull().default("worker"),karmaCoins:u("karma_coins").notNull().default(0),stripeCustomerId:t("stripe_customer_id"),stripeSubscriptionId:t("stripe_subscription_id"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Ks=_("organizations",{id:t("id").primaryKey().default(m`gen_random_uuid()`),name:t("name").notNull(),description:l("description"),ownerId:t("owner_id").notNull(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Ls=_("gdpr_consents",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),consentType:t("consent_type",{enum:["necessary","analytics","marketing","functional","data_processing"]}).notNull(),granted:N("granted").notNull(),grantedAt:n("granted_at").defaultNow(),revokedAt:n("revoked_at"),ipAddress:t("ip_address"),userAgent:l("user_agent"),legalBasis:t("legal_basis",{enum:["consent","contract","legal_obligation","vital_interests","public_task","legitimate_interests"]}).notNull(),purpose:l("purpose").notNull(),dataCategories:l("data_categories").array(),retentionPeriod:u("retention_period_days"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),js=_("gdpr_data_processing_logs",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),activity:t("activity",{enum:["data_access","data_export","data_deletion","data_rectification","data_processing","data_transfer"]}).notNull(),dataTypes:l("data_types").array(),purpose:l("purpose").notNull(),legalBasis:t("legal_basis").notNull(),processingLocation:t("processing_location"),thirdPartyRecipients:l("third_party_recipients").array(),retentionPeriod:u("retention_period_days"),automatedDecisionMaking:N("automated_decision_making").default(!1),ipAddress:t("ip_address"),userAgent:l("user_agent"),requestedBy:t("requested_by"),completedAt:n("completed_at"),createdAt:n("created_at").defaultNow()}),Ms=_("gdpr_data_requests",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),requestType:t("request_type",{enum:["access","portability","rectification","erasure","restrict_processing","object_processing"]}).notNull(),status:t("status",{enum:["pending","in_progress","completed","rejected","partially_completed"]}).notNull().default("pending"),requestDetails:p("request_details"),responseData:p("response_data"),completedAt:n("completed_at"),dueDate:n("due_date").notNull(),rejectionReason:l("rejection_reason"),verificationMethod:t("verification_method"),verifiedAt:n("verified_at"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Rs=_("gdpr_data_retention",{id:t("id").primaryKey().default(m`gen_random_uuid()`),dataType:t("data_type").notNull(),tableName:t("table_name").notNull(),retentionPeriodDays:u("retention_period_days").notNull(),legalBasis:t("legal_basis").notNull(),purpose:l("purpose").notNull(),autoDelete:N("auto_delete").notNull().default(!0),lastProcessedAt:n("last_processed_at"),isActive:N("is_active").notNull().default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Es=_("gdpr_cookie_consents",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id"),sessionId:t("session_id"),necessary:N("necessary").notNull().default(!0),analytics:N("analytics").notNull().default(!1),marketing:N("marketing").notNull().default(!1),functional:N("functional").notNull().default(!1),ipAddress:t("ip_address"),userAgent:l("user_agent"),consentVersion:t("consent_version").notNull().default("1.0"),expiresAt:n("expires_at"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Qs=_("jobs",{id:t("id").primaryKey().default(m`gen_random_uuid()`),title:t("title").notNull(),description:l("description").notNull(),location:t("location"),salary:y("salary",{precision:10,scale:2}),jobType:t("job_type",{enum:["full-time","part-time","contract","temporary"]}).notNull(),status:t("status",{enum:["active","closed","paused","draft"]}).notNull().default("draft"),clientId:t("client_id").notNull(),organizationId:t("organization_id"),requiredSkills:l("required_skills").array(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()},i=>[k("idx_jobs_status").on(i.status),k("idx_jobs_client_id").on(i.clientId),k("idx_jobs_organization_id").on(i.organizationId)]),Us=_("shifts",{id:t("id").primaryKey().default(m`gen_random_uuid()`),jobId:t("job_id").notNull(),workerId:t("worker_id"),title:t("title").notNull(),startTime:n("start_time").notNull(),endTime:n("end_time").notNull(),status:t("status",{enum:["draft","published","assigned","completed","cancelled"]}).notNull().default("draft"),hourlyRate:y("hourly_rate",{precision:10,scale:2}),location:t("location"),requirements:l("requirements"),notes:l("notes"),recurringShiftId:t("recurring_shift_id"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()},i=>[k("idx_shifts_job_id").on(i.jobId),k("idx_shifts_worker_id").on(i.workerId),k("idx_shifts_status").on(i.status),k("idx_shifts_start_time").on(i.startTime)]);_("recurring_shifts",{id:t("id").primaryKey().default(m`gen_random_uuid()`),jobId:t("job_id").notNull(),title:t("title").notNull(),startTime:t("start_time").notNull(),endTime:t("end_time").notNull(),daysOfWeek:u("days_of_week").array().notNull(),hourlyRate:y("hourly_rate",{precision:10,scale:2}),location:t("location"),requirements:l("requirements"),isActive:N("is_active").notNull().default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});_("worker_availability",{id:t("id").primaryKey().default(m`gen_random_uuid()`),workerId:t("worker_id").notNull(),dayOfWeek:u("day_of_week").notNull(),startTime:t("start_time").notNull(),endTime:t("end_time").notNull(),isAvailable:N("is_available").notNull().default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});_("shift_templates",{id:t("id").primaryKey().default(m`gen_random_uuid()`),name:t("name").notNull(),duration:u("duration").notNull(),hourlyRate:y("hourly_rate",{precision:10,scale:2}),requirements:l("requirements"),description:l("description"),isActive:N("is_active").notNull().default(!0),createdAt:n("created_at").defaultNow()});const Os=_("timesheets",{id:t("id").primaryKey().default(m`gen_random_uuid()`),shiftId:t("shift_id").notNull(),workerId:t("worker_id").notNull(),clockIn:n("clock_in"),clockOut:n("clock_out"),hoursWorked:y("hours_worked",{precision:10,scale:2}),breakDuration:u("break_duration").default(0),status:t("status",{enum:["pending","approved","rejected"]}).notNull().default("pending"),approvedBy:t("approved_by"),notes:l("notes"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()},i=>[k("idx_timesheets_worker_id").on(i.workerId),k("idx_timesheets_shift_id").on(i.shiftId),k("idx_timesheets_status").on(i.status)]),$s=_("payments",{id:t("id").primaryKey().default(m`gen_random_uuid()`),workerId:t("worker_id").notNull(),timesheetId:t("timesheet_id"),amount:y("amount",{precision:10,scale:2}).notNull(),platformFee:y("platform_fee",{precision:10,scale:2}).notNull().default("0"),status:t("status",{enum:["pending","processing","completed","failed"]}).notNull().default("pending"),stripePaymentIntentId:t("stripe_payment_intent_id"),processedAt:n("processed_at"),createdAt:n("created_at").defaultNow()},i=>[k("idx_payments_worker_id").on(i.workerId),k("idx_payments_status").on(i.status),k("idx_payments_timesheet_id").on(i.timesheetId)]),Xs=_("courses",{id:t("id").primaryKey().default(m`gen_random_uuid()`),title:t("title").notNull(),description:l("description"),content:l("content"),karmaReward:u("karma_reward").notNull().default(50),duration:u("duration"),difficulty:t("difficulty",{enum:["beginner","intermediate","advanced"]}).notNull().default("beginner"),isActive:N("is_active").notNull().default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Gs=_("course_completions",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),courseId:t("course_id").notNull(),completedAt:n("completed_at").defaultNow(),score:u("score"),certificateUrl:t("certificate_url")}),Js=_("qualifications",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),qualificationType:t("qualification_type",{enum:["gcse","a_level","btec","nvq","degree","masters","phd","apprenticeship","professional_certification","government_scheme"]}).notNull(),qualificationName:t("qualification_name").notNull(),institutionName:t("institution_name").notNull(),subjectArea:t("subject_area"),level:u("level"),grade:t("grade"),startDate:n("start_date"),completionDate:n("completion_date"),expiryDate:n("expiry_date"),certificateNumber:t("certificate_number"),certificateUrl:t("certificate_url"),verificationStatus:t("verification_status",{enum:["pending","verified","failed","expired"]}).notNull().default("pending"),verifiedBy:t("verified_by"),verifiedAt:n("verified_at"),governmentSchemeId:t("government_scheme_id"),isActive:N("is_active").notNull().default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Ws=_("government_programmes",{id:t("id").primaryKey().default(m`gen_random_uuid()`),programmeName:t("programme_name").notNull(),programmeType:t("programme_type",{enum:["apprenticeship","traineeship","kickstart","skills_bootcamp","adult_education_budget","advanced_learner_loan","careers_guidance","sector_work_academy"]}).notNull(),description:l("description"),provider:t("provider").notNull(),fundingBody:t("funding_body",{enum:["education_skills_funding_agency","department_for_work_pensions","department_for_education","local_authority","sector_skills_council"]}).notNull(),eligibilityCriteria:p("eligibility_criteria"),fundingAmount:y("funding_amount",{precision:10,scale:2}),duration:u("duration_weeks"),level:u("level"),sectorArea:t("sector_area"),startDate:n("start_date"),endDate:n("end_date"),applicationDeadline:n("application_deadline"),maxParticipants:u("max_participants"),currentParticipants:u("current_participants").default(0),contactEmail:t("contact_email"),contactPhone:t("contact_phone"),websiteUrl:t("website_url"),applicationUrl:t("application_url"),status:t("status",{enum:["draft","open","closed","full","completed","cancelled"]}).notNull().default("draft"),isActive:N("is_active").notNull().default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Hs=_("programme_participations",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),programmeId:t("programme_id").notNull(),applicationDate:n("application_date").defaultNow(),status:t("status",{enum:["applied","accepted","rejected","waitlisted","in_progress","completed","withdrawn","failed"]}).notNull().default("applied"),startDate:n("start_date"),completionDate:n("completion_date"),progressPercentage:u("progress_percentage").default(0),mentorId:t("mentor_id"),employerId:t("employer_id"),assessmentResults:p("assessment_results"),certificateIssued:N("certificate_issued").default(!1),certificateUrl:t("certificate_url"),fundingReceived:y("funding_received",{precision:10,scale:2}),outcomes:p("outcomes"),feedbackRating:u("feedback_rating"),feedbackComments:l("feedback_comments"),withdrawalReason:l("withdrawal_reason"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Ys=_("skills_framework",{id:t("id").primaryKey().default(m`gen_random_uuid()`),skillName:t("skill_name").notNull(),skillCategory:t("skill_category",{enum:["technical","digital","communication","leadership","problem_solving","teamwork","customer_service","health_safety","compliance"]}).notNull(),description:l("description"),level:u("level"),industryStandard:t("industry_standard"),evidenceRequired:l("evidence_required"),assessmentCriteria:p("assessment_criteria"),renewalPeriod:u("renewal_period_months"),isActive:N("is_active").notNull().default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Zs=_("user_skills",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),skillId:t("skill_id").notNull(),proficiencyLevel:u("proficiency_level").notNull(),assessedBy:t("assessed_by"),assessmentDate:n("assessment_date").defaultNow(),evidenceUrl:t("evidence_url"),endorsedBy:t("endorsed_by"),endorsedAt:n("endorsed_at"),lastReviewDate:n("last_review_date"),nextReviewDate:n("next_review_date"),isVerified:N("is_verified").default(!1),verificationDate:n("verification_date"),notes:l("notes"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),eo=_("development_plans",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),planName:t("plan_name").notNull(),description:l("description"),objectives:p("objectives"),targetCompletionDate:n("target_completion_date"),status:t("status",{enum:["draft","active","on_hold","completed","cancelled"]}).notNull().default("draft"),progressPercentage:u("progress_percentage").default(0),assignedBy:t("assigned_by"),reviewedBy:t("reviewed_by"),lastReviewDate:n("last_review_date"),nextReviewDate:n("next_review_date"),budgetAllocated:y("budget_allocated",{precision:10,scale:2}),budgetSpent:y("budget_spent",{precision:10,scale:2}),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),to=_("learning_pathways",{id:t("id").primaryKey().default(m`gen_random_uuid()`),pathwayName:t("pathway_name").notNull(),description:l("description"),industry:t("industry"),careerLevel:t("career_level",{enum:["entry","junior","mid","senior","lead","executive"]}).notNull(),prerequisites:p("prerequisites"),learningObjectives:p("learning_objectives"),estimatedDuration:u("estimated_duration_weeks"),difficulty:t("difficulty",{enum:["beginner","intermediate","advanced","expert"]}).notNull(),pathwaySteps:p("pathway_steps"),governmentFunding:N("government_funding").default(!1),fundingDetails:p("funding_details"),employmentOutcomes:p("employment_outcomes"),isActive:N("is_active").notNull().default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),io=_("pathway_progress",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),pathwayId:t("pathway_id").notNull(),currentStep:u("current_step").default(1),completedSteps:u("completed_steps").default(0),totalSteps:u("total_steps").notNull(),progressPercentage:u("progress_percentage").default(0),startDate:n("start_date").defaultNow(),estimatedCompletionDate:n("estimated_completion_date"),actualCompletionDate:n("actual_completion_date"),status:t("status",{enum:["not_started","in_progress","on_hold","completed","abandoned"]}).notNull().default("not_started"),mentorId:t("mentor_id"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),ro=_("education_providers",{id:t("id").primaryKey().default(m`gen_random_uuid()`),providerName:t("provider_name").notNull(),providerType:t("provider_type",{enum:["university","college","training_provider","apprenticeship_provider","online_platform","professional_body"]}).notNull(),accreditationBody:t("accreditation_body"),ofstedRating:t("ofsted_rating",{enum:["outstanding","good","requires_improvement","inadequate"]}),contactDetails:p("contact_details"),coursesOffered:p("courses_offered"),apiEndpoint:t("api_endpoint"),apiKey:t("api_key"),integrationStatus:t("integration_status",{enum:["not_integrated","pending","active","suspended","failed"]}).notNull().default("not_integrated"),lastSyncDate:n("last_sync_date"),isActive:N("is_active").notNull().default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),ao=_("activities",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),type:t("type").notNull(),description:l("description").notNull(),metadata:p("metadata"),createdAt:n("created_at").defaultNow()}),no=_("payroll_records",{id:t("id").primaryKey().default(m`gen_random_uuid()`),workerId:t("worker_id").notNull(),payPeriodStart:n("pay_period_start").notNull(),payPeriodEnd:n("pay_period_end").notNull(),grossPay:y("gross_pay",{precision:10,scale:2}).notNull(),taxDeduction:y("tax_deduction",{precision:10,scale:2}).notNull().default("0"),niDeduction:y("ni_deduction",{precision:10,scale:2}).notNull().default("0"),pensionDeduction:y("pension_deduction",{precision:10,scale:2}).notNull().default("0"),otherDeductions:y("other_deductions",{precision:10,scale:2}).notNull().default("0"),netPay:y("net_pay",{precision:10,scale:2}).notNull(),payslipGenerated:N("payslip_generated").notNull().default(!1),payslipUrl:t("payslip_url"),hmrcReported:N("hmrc_reported").notNull().default(!1),hmrcReportedAt:n("hmrc_reported_at"),status:t("status",{enum:["draft","calculated","approved","paid"]}).notNull().default("draft"),processedAt:n("processed_at"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),so=_("worker_tax_info",{id:t("id").primaryKey().default(m`gen_random_uuid()`),workerId:t("worker_id").notNull().unique(),niNumber:t("ni_number"),taxCode:t("tax_code").notNull().default("1257L"),dateOfBirth:n("date_of_birth"),startDate:n("start_date").notNull(),endDate:n("end_date"),address:l("address"),postcode:t("postcode"),gender:t("gender",{enum:["M","F","X"]}),studentLoan:N("student_loan").notNull().default(!1),studentLoanPlan:t("student_loan_plan",{enum:["1","2","4","postgrad"]}),pensionScheme:N("pension_scheme").notNull().default(!1),pensionRate:y("pension_rate",{precision:5,scale:2}).default("3.00"),directorsNi:N("directors_ni").notNull().default(!1),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),oo=_("hmrc_submissions",{id:t("id").primaryKey().default(m`gen_random_uuid()`),submissionType:t("submission_type",{enum:["rti_fps","rti_eps","p45","p60","annual_return"]}).notNull(),taxYear:t("tax_year").notNull(),payPeriod:t("pay_period").notNull(),employerReference:t("employer_reference").notNull(),submissionData:p("submission_data").notNull(),csvData:l("csv_data"),submittedAt:n("submitted_at"),status:t("status",{enum:["draft","ready","submitted","accepted","rejected"]}).notNull().default("draft"),hmrcReference:t("hmrc_reference"),errorDetails:l("error_details"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),uo=_("report_templates",{id:t("id").primaryKey().default(m`gen_random_uuid()`),name:t("name").notNull(),type:t("type",{enum:["payroll","hmrc","timesheet","payments","tax_summary","custom"]}).notNull(),description:l("description"),fields:p("fields").notNull(),filters:p("filters"),formatting:p("formatting"),isActive:N("is_active").notNull().default(!0),createdBy:t("created_by").notNull(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),lo=_("generated_reports",{id:t("id").primaryKey().default(m`gen_random_uuid()`),templateId:t("template_id").notNull(),name:t("name").notNull(),type:t("type",{enum:["csv","pdf","excel","json"]}).notNull().default("csv"),parameters:p("parameters"),fileUrl:t("file_url"),fileSize:u("file_size"),recordCount:u("record_count"),generatedBy:t("generated_by").notNull(),downloadCount:u("download_count").notNull().default(0),expiresAt:n("expires_at"),createdAt:n("created_at").defaultNow()}),co=_("pricing_plans",{id:t("id").primaryKey().default(m`gen_random_uuid()`),name:t("name").notNull(),description:l("description"),basePrice:y("base_price",{precision:10,scale:2}).notNull(),setupFee:y("setup_fee",{precision:10,scale:2}).notNull().default("0"),features:p("features").notNull(),maxEmployees:u("max_employees"),billingCycle:t("billing_cycle",{enum:["monthly","annual"]}).notNull().default("monthly"),discountPercent:y("discount_percent",{precision:5,scale:2}).notNull().default("0"),isActive:N("is_active").notNull().default(!0),stripePriceId:t("stripe_price_id"),sortOrder:u("sort_order").notNull().default(0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),mo=_("organization_subscriptions",{id:t("id").primaryKey().default(m`gen_random_uuid()`),organizationId:t("organization_id").notNull(),planId:t("plan_id").notNull(),stripeSubscriptionId:t("stripe_subscription_id"),stripeCustomerId:t("stripe_customer_id"),status:t("status",{enum:["trial","active","past_due","cancelled","unpaid","incomplete"]}).notNull().default("trial"),currentPeriodStart:n("current_period_start"),currentPeriodEnd:n("current_period_end"),trialStart:n("trial_start"),trialEnd:n("trial_end"),employeeCount:u("employee_count").notNull().default(1),monthlyUsage:p("monthly_usage"),lastBilledAt:n("last_billed_at"),nextBillDate:n("next_bill_date"),autoRenewal:N("auto_renewal").notNull().default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),po=_("usage_metrics",{id:t("id").primaryKey().default(m`gen_random_uuid()`),organizationId:t("organization_id").notNull(),subscriptionId:t("subscription_id").notNull(),metricType:t("metric_type",{enum:["active_employees","time_entries","reports_generated","api_calls","storage_gb"]}).notNull(),metricValue:y("metric_value",{precision:15,scale:2}).notNull(),billingPeriod:t("billing_period").notNull(),recordedAt:n("recorded_at").defaultNow(),createdAt:n("created_at").defaultNow()}),_o=_("pricing_rules",{id:t("id").primaryKey().default(m`gen_random_uuid()`),planId:t("plan_id").notNull(),ruleName:t("rule_name").notNull(),condition:p("condition").notNull(),action:p("action").notNull(),isActive:N("is_active").notNull().default(!0),priority:u("priority").notNull().default(0),validFrom:n("valid_from"),validUntil:n("valid_until"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),fo=_("billing_history",{id:t("id").primaryKey().default(m`gen_random_uuid()`),organizationId:t("organization_id").notNull(),subscriptionId:t("subscription_id").notNull(),planId:t("plan_id").notNull(),billingPeriod:t("billing_period").notNull(),employeeCount:u("employee_count").notNull(),baseAmount:y("base_amount",{precision:10,scale:2}).notNull(),discountAmount:y("discount_amount",{precision:10,scale:2}).notNull().default("0"),taxAmount:y("tax_amount",{precision:10,scale:2}).notNull().default("0"),totalAmount:y("total_amount",{precision:10,scale:2}).notNull(),stripeInvoiceId:t("stripe_invoice_id"),paidAt:n("paid_at"),status:t("status",{enum:["pending","paid","failed","refunded","disputed"]}).notNull().default("pending"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),go=_("universal_credit_clients",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),niNumber:t("ni_number").notNull(),universalCreditNumber:t("uc_number"),claimStatus:t("claim_status",{enum:["active","pending","suspended","closed","under_review"]}).notNull().default("pending"),workCoachName:t("work_coach_name"),workCoachContact:t("work_coach_contact"),jobCentreOffice:t("job_centre_office"),claimStartDate:n("claim_start_date"),monthlyEntitlement:y("monthly_entitlement",{precision:10,scale:2}),workAllowance:y("work_allowance",{precision:10,scale:2}),earnings:y("earnings",{precision:10,scale:2}).notNull().default("0"),workingTaxCredit:y("working_tax_credit",{precision:10,scale:2}).notNull().default("0"),housingCosts:y("housing_costs",{precision:10,scale:2}).notNull().default("0"),childcareSupport:y("childcare_support",{precision:10,scale:2}).notNull().default("0"),conditionsAndCommitments:p("conditions_commitments"),lastAssessmentDate:n("last_assessment_date"),nextAssessmentDate:n("next_assessment_date"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),yo=_("social_benefits_clients",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),benefitType:t("benefit_type",{enum:["universal_credit","housing_benefit","council_tax_support","child_benefit","child_tax_credit","working_tax_credit","pip","esa","jsa","pension_credit","carers_allowance","dla"]}).notNull(),applicationReference:t("application_reference"),claimStatus:t("claim_status",{enum:["active","pending","approved","denied","suspended","under_review","appealing"]}).notNull().default("pending"),weeklyAmount:y("weekly_amount",{precision:10,scale:2}),monthlyAmount:y("monthly_amount",{precision:10,scale:2}),paymentSchedule:t("payment_schedule",{enum:["weekly","fortnightly","monthly"]}),startDate:n("start_date"),endDate:n("end_date"),renewalDate:n("renewal_date"),conditions:p("conditions"),supportingDocuments:p("supporting_documents"),appealDeadline:n("appeal_deadline"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),No=_("benefit_payments",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),benefitType:t("benefit_type").notNull(),claimId:t("claim_id"),paymentReference:t("payment_reference").notNull(),paymentDate:n("payment_date").notNull(),paymentAmount:y("payment_amount",{precision:10,scale:2}).notNull(),paymentMethod:t("payment_method",{enum:["bacs","faster_payment","cheque"]}).notNull().default("bacs"),assessmentPeriod:t("assessment_period"),earningsDeduction:y("earnings_deduction",{precision:10,scale:2}).notNull().default("0"),housingElement:y("housing_element",{precision:10,scale:2}).notNull().default("0"),standardAllowance:y("standard_allowance",{precision:10,scale:2}).notNull().default("0"),childElement:y("child_element",{precision:10,scale:2}).notNull().default("0"),disabilityElement:y("disability_element",{precision:10,scale:2}).notNull().default("0"),carerElement:y("carer_element",{precision:10,scale:2}).notNull().default("0"),workCapabilityElement:y("work_capability_element",{precision:10,scale:2}).notNull().default("0"),deductions:p("deductions"),status:t("status",{enum:["scheduled","paid","failed","returned"]}).notNull().default("scheduled"),createdAt:n("created_at").defaultNow()}),ho=_("work_search_requirements",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),claimId:t("claim_id").notNull(),weeklyHoursRequired:u("weekly_hours_required").notNull().default(35),jobSearchActivities:p("job_search_activities"),skillsTrainingRequired:p("skills_training_required"),workTrialExemptions:p("work_trial_exemptions"),sanctionStatus:t("sanction_status",{enum:["none","warning","sanctioned","appeal_pending"]}).notNull().default("none"),sanctionReason:l("sanction_reason"),sanctionStartDate:n("sanction_start_date"),sanctionEndDate:n("sanction_end_date"),complianceScore:u("compliance_score").notNull().default(100),lastReviewDate:n("last_review_date"),nextReviewDate:n("next_review_date"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),wo=_("government_communications",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),communicationType:t("communication_type",{enum:["uc_decision","benefit_change","appointment_reminder","compliance_warning","sanction_notice","appeal_outcome","payment_notification","review_request","work_coach_message","training_opportunity","job_matching","system_update"]}).notNull(),subject:t("subject").notNull(),message:l("message").notNull(),priority:t("priority",{enum:["low","medium","high","urgent"]}).notNull().default("medium"),channel:t("channel",{enum:["email","sms","post","phone","portal","push_notification"]}).notNull().default("portal"),isRead:N("is_read").notNull().default(!1),requiresAction:N("requires_action").notNull().default(!1),actionDeadline:n("action_deadline"),responseRequired:N("response_required").notNull().default(!1),templateId:t("template_id"),metadata:p("metadata"),sentAt:n("sent_at").defaultNow(),readAt:n("read_at"),respondedAt:n("responded_at"),createdAt:n("created_at").defaultNow()}),bo=_("social_reports",{id:t("id").primaryKey().default(m`gen_random_uuid()`),reportType:t("report_type",{enum:["uc_summary","benefit_breakdown","earnings_impact","compliance_report","payment_history","claim_status","work_search_activity","sanction_report","appeal_tracker","government_correspondence","benefits_forecast","eligibility_check"]}).notNull(),title:t("title").notNull(),description:l("description"),userId:t("user_id"),organizationId:t("organization_id"),reportPeriod:t("report_period"),filters:p("filters"),data:p("data").notNull(),summary:p("summary"),recommendations:p("recommendations"),complianceStatus:t("compliance_status",{enum:["compliant","non_compliant","warning","at_risk"]}),generatedBy:t("generated_by").notNull(),fileUrl:t("file_url"),isShared:N("is_shared").notNull().default(!1),sharedWith:p("shared_with"),expiresAt:n("expires_at"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Ao=_("government_api_logs",{id:t("id").primaryKey().default(m`gen_random_uuid()`),apiEndpoint:t("api_endpoint").notNull(),requestType:t("request_type",{enum:["claim_check","payment_query","benefit_verification","earnings_report","compliance_update"]}).notNull(),userId:t("user_id"),claimReference:t("claim_reference"),requestPayload:p("request_payload"),responseStatus:u("response_status"),responseData:p("response_data"),errorMessage:l("error_message"),processingTime:u("processing_time"),success:N("success").notNull().default(!0),requestedAt:n("requested_at").defaultNow()}),td=g(Fs).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({email:T.string().email({message:"Please enter a valid email address"}).min(1,{message:"Email is required"}),firstName:T.string().min(1,{message:"First name is required"}).max(50,{message:"First name must be 50 characters or less"}),lastName:T.string().min(1,{message:"Last name is required"}).max(50,{message:"Last name must be 50 characters or less"})});g(Ks).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({name:T.string().min(2,{message:"Organization name must be at least 2 characters"}).max(100,{message:"Organization name must be 100 characters or less"})});const id=g(Qs).omit({id:!0,createdAt:!0,updatedAt:!0}).extend({title:T.string().min(3,{message:"Job title must be at least 3 characters"}).max(100,{message:"Job title must be 100 characters or less"}),description:T.string().min(10,{message:"Description must be at least 10 characters"}).max(500,{message:"Description must be 500 characters or less"}),location:T.string().min(2,{message:"Location must be at least 2 characters"}).max(100,{message:"Location must be 100 characters or less"}),salary:T.string().optional().refine(i=>!i||parseFloat(i)>=0&&parseFloat(i)<=1e7,{message:"Salary must be between 0 and 10,000,000"})});g(Us).omit({id:!0,createdAt:!0,updatedAt:!0});g(Os).omit({id:!0,createdAt:!0,updatedAt:!0});g($s).omit({id:!0,createdAt:!0});g(Xs).omit({id:!0,createdAt:!0,updatedAt:!0});g(Gs).omit({id:!0,completedAt:!0});g(ao).omit({id:!0,createdAt:!0});g(Ls).omit({id:!0,createdAt:!0,updatedAt:!0});g(Ms).omit({id:!0,createdAt:!0,updatedAt:!0});g(js).omit({id:!0,createdAt:!0});g(Rs).omit({id:!0,createdAt:!0,updatedAt:!0});g(Es).omit({id:!0,createdAt:!0,updatedAt:!0});g(co).omit({id:!0,createdAt:!0,updatedAt:!0});g(mo).omit({id:!0,createdAt:!0,updatedAt:!0});g(po).omit({id:!0,createdAt:!0});g(_o).omit({id:!0,createdAt:!0,updatedAt:!0});g(fo).omit({id:!0,createdAt:!0,updatedAt:!0});g(no).omit({id:!0,createdAt:!0,updatedAt:!0});g(so).omit({id:!0,createdAt:!0,updatedAt:!0});g(oo).omit({id:!0,createdAt:!0,updatedAt:!0});g(uo).omit({id:!0,createdAt:!0,updatedAt:!0});g(lo).omit({id:!0,createdAt:!0});g(Js).omit({id:!0,createdAt:!0,updatedAt:!0});g(Ws).omit({id:!0,createdAt:!0,updatedAt:!0});g(Hs).omit({id:!0,createdAt:!0,updatedAt:!0});g(Ys).omit({id:!0,createdAt:!0,updatedAt:!0});g(Zs).omit({id:!0,createdAt:!0,updatedAt:!0});g(eo).omit({id:!0,createdAt:!0,updatedAt:!0});g(to).omit({id:!0,createdAt:!0,updatedAt:!0});g(io).omit({id:!0,createdAt:!0,updatedAt:!0});g(ro).omit({id:!0,createdAt:!0,updatedAt:!0});g(go).omit({id:!0,createdAt:!0,updatedAt:!0});g(yo).omit({id:!0,createdAt:!0,updatedAt:!0});g(No).omit({id:!0,createdAt:!0});g(ho).omit({id:!0,createdAt:!0,updatedAt:!0});g(wo).omit({id:!0,createdAt:!0});g(bo).omit({id:!0,createdAt:!0,updatedAt:!0});g(Ao).omit({id:!0});const vo=_("lessons",{id:t("id").primaryKey().default(m`gen_random_uuid()`),courseId:t("course_id").notNull(),title:t("title").notNull(),description:l("description"),content:l("content"),videoUrl:t("video_url"),attachments:p("attachments").default([]),order:u("order").notNull(),estimatedDuration:u("estimated_duration_minutes"),isRequired:N("is_required").notNull().default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),So=_("quizzes",{id:t("id").primaryKey().default(m`gen_random_uuid()`),courseId:t("course_id"),lessonId:t("lesson_id"),title:t("title").notNull(),description:l("description"),timeLimit:u("time_limit_minutes"),passingScore:u("passing_score_percentage").notNull().default(80),maxAttempts:u("max_attempts").default(3),shuffleQuestions:N("shuffle_questions").notNull().default(!1),showCorrectAnswers:N("show_correct_answers").notNull().default(!0),isRequired:N("is_required").notNull().default(!1),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Io=_("quiz_questions",{id:t("id").primaryKey().default(m`gen_random_uuid()`),quizId:t("quiz_id").notNull(),type:t("type",{enum:["multiple_choice","true_false","short_answer","essay","matching","drag_drop"]}).notNull(),question:l("question").notNull(),options:p("options").default([]),correctAnswers:l("correct_answers").array(),explanation:l("explanation"),points:u("points").notNull().default(1),order:u("order").notNull(),imageUrl:t("image_url"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Po=_("course_enrollments",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),courseId:t("course_id").notNull(),enrolledAt:n("enrolled_at").defaultNow(),startedAt:n("started_at"),completedAt:n("completed_at"),progress:u("progress_percentage").notNull().default(0),status:t("status",{enum:["enrolled","in_progress","completed","failed","suspended"]}).notNull().default("enrolled"),finalScore:u("final_score_percentage"),certificateIssuedAt:n("certificate_issued_at"),certificateUrl:t("certificate_url")}),To=_("lesson_progress",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),lessonId:t("lesson_id").notNull(),courseId:t("course_id").notNull(),startedAt:n("started_at").defaultNow(),completedAt:n("completed_at"),timeSpent:u("time_spent_minutes").notNull().default(0),progress:u("progress_percentage").notNull().default(0),isCompleted:N("is_completed").notNull().default(!1)}),xo=_("quiz_attempts",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),quizId:t("quiz_id").notNull(),courseId:t("course_id"),attemptNumber:u("attempt_number").notNull(),startedAt:n("started_at").defaultNow(),completedAt:n("completed_at"),score:u("score_percentage"),totalQuestions:u("total_questions").notNull(),correctAnswers:u("correct_answers").notNull().default(0),timeSpent:u("time_spent_minutes"),isPassed:N("is_passed").notNull().default(!1),answers:p("answers").default({})}),Do=_("learning_achievements",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),type:t("type",{enum:["course_completion","quiz_master","fast_learner","perfect_score","streak","early_bird"]}).notNull(),title:t("title").notNull(),description:l("description"),iconUrl:t("icon_url"),badgeColor:t("badge_color").default("#3B82F6"),pointsAwarded:u("points_awarded").notNull().default(0),courseId:t("course_id"),earnedAt:n("earned_at").defaultNow()}),Co=_("learning_analytics",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),courseId:t("course_id"),sessionDate:n("session_date").defaultNow(),timeSpent:u("time_spent_minutes").notNull(),activitiesCompleted:u("activities_completed").notNull().default(0),questionsAnswered:u("questions_answered").notNull().default(0),correctAnswersCount:u("correct_answers_count").notNull().default(0),engagementScore:u("engagement_score").default(0),deviceType:t("device_type",{enum:["desktop","mobile","tablet"]}),learningPath:l("learning_path")}),qo=_("certificates",{id:t("id").primaryKey().default(m`gen_random_uuid()`),userId:t("user_id").notNull(),courseId:t("course_id").notNull(),certificateNumber:t("certificate_number").notNull().unique(),issuedAt:n("issued_at").defaultNow(),validUntil:n("valid_until"),pdfUrl:t("pdf_url"),verificationCode:t("verification_code").notNull().unique(),template:t("template").notNull().default("standard"),metadata:p("metadata").default({}),isRevoked:N("is_revoked").notNull().default(!1),revokedAt:n("revoked_at"),revokedReason:l("revoked_reason")});g(vo).omit({id:!0,createdAt:!0,updatedAt:!0});g(So).omit({id:!0,createdAt:!0,updatedAt:!0});g(Io).omit({id:!0,createdAt:!0,updatedAt:!0});g(Po).omit({id:!0});g(To).omit({id:!0});g(xo).omit({id:!0});g(Do).omit({id:!0});g(Co).omit({id:!0});g(qo).omit({id:!0});const zo=_("performance_review_cycles",{id:t("id").primaryKey().default(m`gen_random_uuid()`),cycleName:t("cycle_name").notNull(),cycleType:t("cycle_type",{enum:["annual","bi_annual","quarterly","mid_year","probationary"]}).notNull(),startDate:n("start_date").notNull(),endDate:n("end_date").notNull(),reviewDeadline:n("review_deadline").notNull(),status:t("status",{enum:["draft","active","completed","cancelled"]}).notNull().default("draft"),description:l("description"),instructions:l("instructions"),karmaReward:u("karma_reward").notNull().default(100),isActive:N("is_active").notNull().default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Bo=_("performance_reviews",{id:t("id").primaryKey().default(m`gen_random_uuid()`),cycleId:t("cycle_id").notNull(),revieweeId:t("reviewee_id").notNull(),status:t("status",{enum:["not_started","in_progress","pending_approval","completed","overdue"]}).notNull().default("not_started"),selfReviewCompleted:N("self_review_completed").notNull().default(!1),supervisorReviewCompleted:N("supervisor_review_completed").notNull().default(!1),peerReviewsCompleted:u("peer_reviews_completed").notNull().default(0),peerReviewsRequired:u("peer_reviews_required").notNull().default(3),subordinateReviewsCompleted:u("subordinate_reviews_completed").notNull().default(0),subordinateReviewsRequired:u("subordinate_reviews_required").notNull().default(0),overallRating:y("overall_rating",{precision:3,scale:2}),progressPercentage:u("progress_percentage").notNull().default(0),reviewerComments:l("reviewer_comments"),developmentAreas:p("development_areas"),strengths:p("strengths"),goals:p("goals"),actionPlan:l("action_plan"),managerNotes:l("manager_notes"),submittedAt:n("submitted_at"),approvedAt:n("approved_at"),approvedBy:t("approved_by"),karmaEarned:u("karma_earned").notNull().default(0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),ko=_("review_participants",{id:t("id").primaryKey().default(m`gen_random_uuid()`),reviewId:t("review_id").notNull(),participantId:t("participant_id").notNull(),participantType:t("participant_type",{enum:["self","supervisor","peer","subordinate","customer","external"]}).notNull(),invitedAt:n("invited_at").defaultNow(),respondedAt:n("responded_at"),status:t("status",{enum:["invited","in_progress","completed","declined","overdue"]}).notNull().default("invited"),remindersSent:u("reminders_sent").notNull().default(0),lastReminderAt:n("last_reminder_at"),anonymousResponse:N("anonymous_response").notNull().default(!1),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Vo=_("review_competencies",{id:t("id").primaryKey().default(m`gen_random_uuid()`),competencyName:t("competency_name").notNull(),category:t("category",{enum:["technical","leadership","communication","teamwork","innovation","customer_focus","problem_solving","adaptability"]}).notNull(),description:l("description"),behaviorIndicators:p("behavior_indicators"),weight:y("weight",{precision:3,scale:2}).notNull().default("1.00"),isActive:N("is_active").notNull().default(!0),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Fo=_("review_responses",{id:t("id").primaryKey().default(m`gen_random_uuid()`),reviewId:t("review_id").notNull(),participantId:t("participant_id").notNull(),competencyId:t("competency_id").notNull(),rating:u("rating").notNull(),comments:l("comments"),examples:l("examples"),developmentSuggestions:l("development_suggestions"),strengths:l("strengths"),isConfidential:N("is_confidential").notNull().default(!1),submittedAt:n("submitted_at").defaultNow(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Ko=_("review_goals",{id:t("id").primaryKey().default(m`gen_random_uuid()`),reviewId:t("review_id").notNull(),goalTitle:t("goal_title").notNull(),goalDescription:l("goal_description"),goalType:t("goal_type",{enum:["performance","development","behavioral","project","learning"]}).notNull(),priority:t("priority",{enum:["high","medium","low"]}).notNull().default("medium"),targetDate:n("target_date"),progress:u("progress_percentage").notNull().default(0),status:t("status",{enum:["not_started","in_progress","completed","deferred","cancelled"]}).notNull().default("not_started"),successCriteria:l("success_criteria"),supportRequired:l("support_required"),managementNotes:l("management_notes"),selfAssessment:l("self_assessment"),finalOutcome:l("final_outcome"),karmaReward:u("karma_reward").notNull().default(25),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Lo=_("review_analytics",{id:t("id").primaryKey().default(m`gen_random_uuid()`),cycleId:t("cycle_id").notNull(),userId:t("user_id").notNull(),averageRating:y("average_rating",{precision:3,scale:2}),ratingDistribution:p("rating_distribution"),peerFeedbackCount:u("peer_feedback_count").notNull().default(0),strengthsIdentified:p("strengths_identified"),developmentAreasIdentified:p("development_areas_identified"),goalCompletionRate:y("goal_completion_rate",{precision:5,scale:2}),improvementTrends:p("improvement_trends"),benchmarkComparison:p("benchmark_comparison"),actionItemsCreated:u("action_items_created").notNull().default(0),actionItemsCompleted:u("action_items_completed").notNull().default(0),engagementScore:y("engagement_score",{precision:3,scale:2}),lastCalculatedAt:n("last_calculated_at").defaultNow(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),jo=_("marketing_campaigns",{id:t("id").primaryKey().default(m`gen_random_uuid()`),name:t("name").notNull(),description:l("description"),campaignType:t("campaign_type",{enum:["email","social","content","event","webinar","multi_channel"]}).notNull(),status:t("status",{enum:["draft","scheduled","active","paused","completed","cancelled"]}).notNull().default("draft"),targetAudience:p("target_audience"),budget:y("budget",{precision:10,scale:2}),actualSpend:y("actual_spend",{precision:10,scale:2}).default("0"),goals:p("goals"),startDate:n("start_date"),endDate:n("end_date"),createdBy:t("created_by").notNull(),organizationId:t("organization_id"),tags:l("tags").array(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Mo=_("email_templates",{id:t("id").primaryKey().default(m`gen_random_uuid()`),name:t("name").notNull(),subject:t("subject").notNull(),htmlContent:l("html_content").notNull(),textContent:l("text_content"),templateType:t("template_type",{enum:["marketing","transactional","newsletter","announcement","welcome","follow_up"]}).notNull(),variables:p("variables"),organizationId:t("organization_id"),isActive:N("is_active").notNull().default(!0),createdBy:t("created_by").notNull(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Ro=_("email_campaign_sends",{id:t("id").primaryKey().default(m`gen_random_uuid()`),campaignId:t("campaign_id").notNull(),templateId:t("template_id").notNull(),recipientEmail:t("recipient_email").notNull(),recipientName:t("recipient_name"),recipientId:t("recipient_id"),status:t("status",{enum:["queued","sent","delivered","opened","clicked","bounced","failed","unsubscribed"]}).notNull().default("queued"),sendGridMessageId:t("sendgrid_message_id"),sentAt:n("sent_at"),deliveredAt:n("delivered_at"),openedAt:n("opened_at"),clickedAt:n("clicked_at"),bouncedAt:n("bounced_at"),errorMessage:l("error_message"),metadata:p("metadata"),createdAt:n("created_at").defaultNow()}),Eo=_("social_media_posts",{id:t("id").primaryKey().default(m`gen_random_uuid()`),campaignId:t("campaign_id"),platform:t("platform",{enum:["twitter","linkedin","facebook","instagram","youtube"]}).notNull(),content:l("content").notNull(),mediaUrls:l("media_urls").array(),scheduledFor:n("scheduled_for"),status:t("status",{enum:["draft","scheduled","published","failed","deleted"]}).notNull().default("draft"),publishedAt:n("published_at"),platformPostId:t("platform_post_id"),engagementMetrics:p("engagement_metrics"),createdBy:t("created_by").notNull(),organizationId:t("organization_id"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Qo=_("marketing_analytics",{id:t("id").primaryKey().default(m`gen_random_uuid()`),campaignId:t("campaign_id").notNull(),date:n("date").notNull(),impressions:u("impressions").default(0),clicks:u("clicks").default(0),conversions:u("conversions").default(0),revenue:y("revenue",{precision:10,scale:2}).default("0"),cost:y("cost",{precision:10,scale:2}).default("0"),leads:u("leads").default(0),emailsSent:u("emails_sent").default(0),emailsOpened:u("emails_opened").default(0),emailsClicked:u("emails_clicked").default(0),socialEngagements:u("social_engagements").default(0),websiteVisits:u("website_visits").default(0),metadata:p("metadata"),createdAt:n("created_at").defaultNow()}),Uo=_("lead_sources",{id:t("id").primaryKey().default(m`gen_random_uuid()`),name:t("name").notNull(),sourceType:t("source_type",{enum:["organic","paid_ads","referral","social_media","email","content","event","partner","direct","other"]}).notNull(),cost:y("cost",{precision:10,scale:2}),conversionRate:y("conversion_rate",{precision:5,scale:2}),totalLeads:u("total_leads").default(0),qualifiedLeads:u("qualified_leads").default(0),isActive:N("is_active").notNull().default(!0),organizationId:t("organization_id"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Oo=_("partnerships",{id:t("id").primaryKey().default(m`gen_random_uuid()`),partnerName:t("partner_name").notNull(),partnerType:t("partner_type",{enum:["vendor","reseller","technology","strategic","affiliate","channel"]}).notNull(),status:t("status",{enum:["prospecting","negotiating","active","inactive","terminated"]}).notNull().default("prospecting"),contactPerson:t("contact_person"),contactEmail:t("contact_email"),contactPhone:t("contact_phone"),website:t("website"),description:l("description"),contractValue:y("contract_value",{precision:12,scale:2}),contractStartDate:n("contract_start_date"),contractEndDate:n("contract_end_date"),terms:p("terms"),benefits:l("benefits").array(),obligations:l("obligations").array(),performanceMetrics:p("performance_metrics"),organizationId:t("organization_id"),ownerId:t("owner_id").notNull(),tags:l("tags").array(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),$o=_("market_analysis",{id:t("id").primaryKey().default(m`gen_random_uuid()`),title:t("title").notNull(),analysisType:t("analysis_type",{enum:["competitor","industry_trends","customer_segment","market_size","swot","pestel","porters_five"]}).notNull(),description:l("description"),findings:p("findings"),recommendations:l("recommendations").array(),dataSources:l("data_sources").array(),analysisDate:n("analysis_date").defaultNow(),status:t("status",{enum:["draft","in_review","approved","archived"]}).notNull().default("draft"),organizationId:t("organization_id"),createdBy:t("created_by").notNull(),reviewedBy:t("reviewed_by"),tags:l("tags").array(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Xo=_("strategic_plans",{id:t("id").primaryKey().default(m`gen_random_uuid()`),title:t("title").notNull(),description:l("description"),planType:t("plan_type",{enum:["annual","quarterly","product_launch","market_expansion","digital_transformation","cost_optimization"]}).notNull(),status:t("status",{enum:["draft","in_progress","active","completed","on_hold","cancelled"]}).notNull().default("draft"),objectives:p("objectives"),keyResults:p("key_results"),initiatives:p("initiatives"),budget:y("budget",{precision:12,scale:2}),actualSpend:y("actual_spend",{precision:12,scale:2}).default("0"),startDate:n("start_date"),endDate:n("end_date"),progress:u("progress").default(0),milestones:p("milestones"),risks:p("risks"),stakeholders:l("stakeholders").array(),organizationId:t("organization_id"),ownerId:t("owner_id").notNull(),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Go=_("growth_metrics",{id:t("id").primaryKey().default(m`gen_random_uuid()`),metricName:t("metric_name").notNull(),metricType:t("metric_type",{enum:["revenue","customers","users","market_share","product_adoption","engagement","retention","churn"]}).notNull(),value:y("value",{precision:15,scale:2}).notNull(),targetValue:y("target_value",{precision:15,scale:2}),periodStart:n("period_start").notNull(),periodEnd:n("period_end").notNull(),growthRate:y("growth_rate",{precision:6,scale:2}),trend:t("trend",{enum:["up","down","stable"]}),comparisonPeriod:p("comparison_period"),organizationId:t("organization_id"),metadata:p("metadata"),createdAt:n("created_at").defaultNow()}),Jo=_("lead_activities",{id:t("id").primaryKey().default(m`gen_random_uuid()`),leadId:t("lead_id").notNull(),activityType:t("activity_type",{enum:["call","email","meeting","demo","proposal","follow_up","note","status_change"]}).notNull(),subject:t("subject"),description:l("description"),outcome:t("outcome",{enum:["successful","unsuccessful","no_answer","scheduled","pending"]}),scheduledFor:n("scheduled_for"),completedAt:n("completed_at"),assignedTo:t("assigned_to").notNull(),metadata:p("metadata"),createdAt:n("created_at").defaultNow()}),Wo=_("issue_alerts",{id:t("id").primaryKey().default(m`gen_random_uuid()`),title:t("title").notNull(),description:l("description").notNull(),issueType:t("issue_type",{enum:["understaffing","compliance_breach","payment_delay","scheduling_conflict","skill_gap","performance_issue","resource_shortage","budget_overrun","safety_concern","other"]}).notNull(),severity:t("severity",{enum:["critical","high","medium","low"]}).notNull(),status:t("status",{enum:["active","investigating","resolved","dismissed","expired"]}).notNull().default("active"),confidence:y("confidence",{precision:5,scale:2}),affectedModule:t("affected_module",{enum:["jobs","shifts","timesheets","payments","compliance","workers","scheduling","budget","safety","general"]}).notNull(),affectedEntityType:t("affected_entity_type"),affectedEntityId:t("affected_entity_id"),detectionMethod:t("detection_method",{enum:["rule_based","ai_powered","hybrid","manual"]}).notNull(),detectedBy:t("detected_by"),metadata:p("metadata"),expiresAt:n("expires_at"),resolvedAt:n("resolved_at"),resolvedBy:t("resolved_by"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Ho=_("issue_recommendations",{id:t("id").primaryKey().default(m`gen_random_uuid()`),alertId:t("alert_id").notNull(),title:t("title").notNull(),description:l("description").notNull(),recommendationType:t("recommendation_type",{enum:["automated_action","manual_task","policy_change","resource_allocation","workflow_adjustment","training","notification","escalation"]}).notNull(),priority:u("priority").notNull().default(1),confidence:y("confidence",{precision:5,scale:2}),estimatedImpact:t("estimated_impact",{enum:["high","medium","low"]}),requiredPermissions:l("required_permissions").array(),automatable:N("automatable").notNull().default(!1),actionMetadata:p("action_metadata"),prerequisites:p("prerequisites"),estimatedDuration:u("estimated_duration_minutes"),costEstimate:y("cost_estimate",{precision:10,scale:2}),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()}),Yo=_("issue_actions",{id:t("id").primaryKey().default(m`gen_random_uuid()`),alertId:t("alert_id").notNull(),recommendationId:t("recommendation_id"),actionType:t("action_type",{enum:["automated","manual","scheduled","dismissed"]}).notNull(),status:t("status",{enum:["pending","in_progress","completed","failed","cancelled"]}).notNull().default("pending"),initiatedBy:t("initiated_by").notNull(),assignedTo:t("assigned_to"),actionDetails:p("action_details"),result:p("result"),outcomeDescription:l("outcome_description"),startedAt:n("started_at"),completedAt:n("completed_at"),failureReason:l("failure_reason"),createdAt:n("created_at").defaultNow(),updatedAt:n("updated_at").defaultNow()});g(zo).omit({id:!0,createdAt:!0,updatedAt:!0});g(Bo).omit({id:!0,createdAt:!0,updatedAt:!0});g(ko).omit({id:!0,createdAt:!0,updatedAt:!0});g(Vo).omit({id:!0,createdAt:!0,updatedAt:!0});g(Fo).omit({id:!0,createdAt:!0,updatedAt:!0});g(Ko).omit({id:!0,createdAt:!0,updatedAt:!0});g(Lo).omit({id:!0,createdAt:!0,updatedAt:!0});g(Wo).omit({id:!0,createdAt:!0,updatedAt:!0});g(Ho).omit({id:!0,createdAt:!0,updatedAt:!0});g(Yo).omit({id:!0,createdAt:!0,updatedAt:!0});const rd=g(jo).omit({id:!0,createdAt:!0,updatedAt:!0}),ad=g(Mo).omit({id:!0,createdAt:!0,updatedAt:!0});g(Ro).omit({id:!0,createdAt:!0});const nd=g(Eo).omit({id:!0,createdAt:!0,updatedAt:!0});g(Qo).omit({id:!0,createdAt:!0});g(Uo).omit({id:!0,createdAt:!0,updatedAt:!0});const sd=g(Oo).omit({id:!0,createdAt:!0,updatedAt:!0}),od=g($o).omit({id:!0,createdAt:!0,updatedAt:!0}),dd=g(Xo).omit({id:!0,createdAt:!0,updatedAt:!0});g(Go).omit({id:!0,createdAt:!0});g(Jo).omit({id:!0,createdAt:!0});export{td as a,rd as b,ad as c,nd as d,sd as e,od as f,dd as g,id as i};
