import{r as y,u as f,o as v,i,j as e,C as o,e as m,f as u,B as x,a as h,U as w,b as k,d as I,n as g}from"./index-aBzEQGYq.js";import{S}from"./star-Bqtboh28.js";import{C}from"./clock-Dcf5yqqC.js";function B({jobId:r}){const[a,n]=y.useState(r||"");f(),v();const{data:d}=i({queryKey:["/api/jobs"]}),{data:l,isLoading:p}=i({queryKey:["/api/ai/schedule-recommendations",a],queryFn:async()=>a?await g("POST","/api/ai/schedule-recommendations",{jobId:a}):[],enabled:!!a}),{data:c}=i({queryKey:["/api/workers"]}),j=s=>{const t=c==null?void 0:c.find(b=>b.id===s);return t?`${t.firstName} ${t.lastName}`:"Unknown Worker"},N=s=>s>=90?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":s>=80?"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200":s>=70?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";return e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-primary"}),"AI Smart Scheduling"]})}),e.jsxs(h,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Select Job for AI Recommendations"}),e.jsxs("select",{value:a,onChange:s=>n(s.target.value),className:"w-full p-2 border border-input rounded-md bg-background","data-testid":"select-job-ai-scheduling",children:[e.jsx("option",{value:"",children:"Select a job..."}),d==null?void 0:d.map(s=>e.jsxs("option",{value:s.id,children:[s.title," - ",s.location]},s.id))]})]}),a&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-primary"}),"AI Recommendations"]}),p?e.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded animate-pulse w-3/4"})]},s))}):l&&l.length>0?e.jsx("div",{className:"space-y-3",children:l.map((s,t)=>e.jsx("div",{className:"p-3 border rounded-lg hover:bg-muted/50 transition-colors","data-testid":`recommendation-${t}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(w,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:j(s.workerId)}),e.jsxs(k,{className:N(s.score),children:[s.score,"% match"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:s.reasoning})]}),e.jsx(I,{size:"sm",variant:"outline","data-testid":`button-assign-${t}`,children:"Assign"})]})},t))}):a?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(C,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No scheduling recommendations available for this job."})]}):null]})]})]})}function K(){const{data:r,isLoading:a}=i({queryKey:["/api/ai/insights"],queryFn:async()=>await g("GET","/api/ai/insights"),refetchInterval:3e5});return a?e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-primary"}),"AI Insights"]})}),e.jsx(h,{children:e.jsx("div",{className:"space-y-3",children:[1,2,3].map(n=>e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse"},n))})})]}):e.jsxs(o,{children:[e.jsx(m,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[e.jsx(x,{className:"w-5 h-5 text-primary"}),"AI Insights"]})}),e.jsx(h,{children:e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("div",{className:"whitespace-pre-wrap text-sm text-muted-foreground",children:(r==null?void 0:r.insights)||"No insights available at this time."})})})]})}export{K as A,B as S};
