import{r as c,j as e,d as l,J as k,K as C,N as o,O as d,C as a,e as x,z as S,f as p,m as h,b as u,a as r,Q as m,Z as g,S as j,M as _,T as R}from"./index-aBzEQGYq.js";import{A as P}from"./app-layout-DNSppN_P.js";import{P as z}from"./plus-BIW1JAb4.js";import{S as f}from"./square-pen-ajYTr43k.js";import{P as L}from"./play-B7MbPeZR.js";import{C as v}from"./clock-Dcf5yqqC.js";import{T as N}from"./target-kE2L6cy0.js";import{U as W}from"./users-DQHjr_4E.js";import"./avatar-B73pXDWb.js";import"./calendar-B5qd1N74.js";import"./building-DW2XR0jT.js";import"./handshake-DxRR1pa7.js";import"./credit-card-CxGwdsfA.js";import"./calculator-Ch1wpyY6.js";import"./crown-J1RsCPzy.js";import"./map-pin-D49hIz5W.js";import"./pound-sterling-DvDjXgI4.js";import"./trending-up-EJ-1Wo56.js";import"./message-square-CV5BlX6z.js";import"./file-text-DGolt20j.js";import"./shield-check-DrJu6eCf.js";import"./Combination-D-0K7YMg.js";import"./index-oqkmxxPa.js";import"./scroll-area-Dsz05QRK.js";import"./alert-dialog-CGu9Do5w.js";import"./index-r-q9YERm.js";import"./dialog-23jdk0P0.js";import"./send-DOYPj-_D.js";function E(){const[n,y]=c.useState([{id:"1",name:"Auto-assign urgent jobs",description:"Automatically assign high-priority jobs to available top-rated workers",trigger:{type:"event",config:{event:"job_posted",condition:"priority = urgent"}},actions:[{type:"assignment",config:{criteria:"top_rated_available"}},{type:"notification",config:{template:"urgent_job_assigned"}}],isActive:!0,lastTriggered:"2024-08-30T10:30:00Z",executionCount:15},{id:"2",name:"Weekly performance reminder",description:"Send performance summary emails every Friday",trigger:{type:"time",config:{schedule:"weekly",day:"friday",time:"09:00"}},actions:[{type:"email",config:{template:"weekly_performance",recipients:"all_workers"}}],isActive:!0,lastTriggered:"2024-08-30T09:00:00Z",executionCount:4},{id:"3",name:"Overdue timesheet alerts",description:"Alert workers and managers about overdue timesheets",trigger:{type:"condition",config:{check:"timesheet_overdue",threshold:"2_days"}},actions:[{type:"notification",config:{template:"overdue_timesheet_worker"}},{type:"notification",config:{template:"overdue_timesheet_manager"}}],isActive:!0,executionCount:8}]),[I,w]=c.useState(!1),[Z,D]=c.useState({name:"",description:"",triggerType:"event",actionType:"notification"}),b=s=>{y(t=>t.map(i=>i.id===s?{...i,isActive:!i.isActive}:i))},A=s=>{switch(s){case"time":return e.jsx(v,{className:"h-4 w-4"});case"event":return e.jsx(g,{className:"h-4 w-4"});case"condition":return e.jsx(N,{className:"h-4 w-4"});default:return e.jsx(j,{className:"h-4 w-4"})}},T=s=>{switch(s){case"notification":return e.jsx(R,{className:"h-4 w-4"});case"email":return e.jsx(_,{className:"h-4 w-4"});case"assignment":return e.jsx(W,{className:"h-4 w-4"});case"status_change":return e.jsx(f,{className:"h-4 w-4"});default:return e.jsx(j,{className:"h-4 w-4"})}};return e.jsxs("div",{className:"space-y-6","data-testid":"workflow-automation",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold tracking-tight",children:"Workflow Automation"}),e.jsx("p",{className:"text-muted-foreground",children:"Automate repetitive tasks and streamline your workforce management"})]}),e.jsxs(l,{onClick:()=>w(!0),"data-testid":"button-create-automation",children:[e.jsx(z,{className:"h-4 w-4 mr-2"}),"Create Rule"]})]}),e.jsxs(k,{defaultValue:"active",className:"space-y-4",children:[e.jsxs(C,{children:[e.jsx(o,{value:"active",children:"Active Rules"}),e.jsx(o,{value:"templates",children:"Templates"}),e.jsx(o,{value:"analytics",children:"Analytics"})]}),e.jsx(d,{value:"active",className:"space-y-4",children:e.jsx("div",{className:"grid gap-4",children:n.map(s=>e.jsxs(a,{className:s.isActive?"border-green-200":"border-gray-200",children:[e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(S,{checked:s.isActive,onCheckedChange:()=>b(s.id),"data-testid":`switch-rule-${s.id}`}),e.jsxs("div",{children:[e.jsx(p,{className:"text-lg",children:s.name}),e.jsx(h,{children:s.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(u,{variant:s.isActive?"default":"secondary",children:s.isActive?"Active":"Inactive"}),e.jsx(l,{variant:"outline",size:"sm",children:e.jsx(f,{className:"h-4 w-4"})})]})]})}),e.jsx(r,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Trigger"}),e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-muted rounded",children:[A(s.trigger.type),e.jsx("span",{className:"text-sm capitalize",children:s.trigger.type})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(m,{className:"text-sm font-medium",children:["Actions (",s.actions.length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-1",children:s.actions.map((t,i)=>e.jsxs("div",{className:"flex items-center gap-1 p-1 bg-muted rounded text-xs",children:[T(t.type),e.jsx("span",{className:"capitalize",children:t.type.replace("_"," ")})]},i))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(m,{className:"text-sm font-medium",children:"Statistics"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("div",{children:["Executed: ",s.executionCount," times"]}),s.lastTriggered&&e.jsxs("div",{children:["Last: ",new Date(s.lastTriggered).toLocaleDateString()]})]})]})]})})]},s.id))})}),e.jsx(d,{value:"templates",className:"space-y-4",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[{name:"Smart Job Assignment",description:"Automatically assign jobs based on worker skills and availability",category:"Assignment"},{name:"Payment Reminders",description:"Send automated payment status updates to workers",category:"Communication"},{name:"Performance Alerts",description:"Alert managers when worker performance drops",category:"Monitoring"},{name:"Shift Optimization",description:"Automatically optimize shift schedules for efficiency",category:"Scheduling"},{name:"Training Reminders",description:"Remind workers about mandatory training deadlines",category:"Compliance"},{name:"Client Follow-up",description:"Automated follow-up with clients after job completion",category:"Customer Service"}].map((s,t)=>e.jsxs(a,{className:"cursor-pointer hover:shadow-md transition-shadow",children:[e.jsxs(x,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(p,{className:"text-lg",children:s.name}),e.jsx(u,{variant:"outline",children:s.category})]}),e.jsx(h,{children:s.description})]}),e.jsx(r,{children:e.jsx(l,{variant:"outline",className:"w-full",children:"Use Template"})})]},t))})}),e.jsx(d,{value:"analytics",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Active Rules"}),e.jsx("p",{className:"text-2xl font-bold",children:n.filter(s=>s.isActive).length})]}),e.jsx(L,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Total Executions"}),e.jsx("p",{className:"text-2xl font-bold",children:n.reduce((s,t)=>s+t.executionCount,0)})]}),e.jsx(g,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Time Saved"}),e.jsx("p",{className:"text-2xl font-bold",children:"47h"}),e.jsx("p",{className:"text-xs text-green-600",children:"This month"})]}),e.jsx(v,{className:"h-8 w-8 text-purple-600"})]})})}),e.jsx(a,{children:e.jsx(r,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"}),e.jsx("p",{className:"text-2xl font-bold",children:"98.5%"}),e.jsx("p",{className:"text-xs text-green-600",children:"Highly reliable"})]}),e.jsx(N,{className:"h-8 w-8 text-orange-600"})]})})})]})})]})]})}function pe(){return e.jsx(P,{title:"Workflow Automation",breadcrumbs:[{label:"Workflow Automation"}],children:e.jsx(E,{})})}export{pe as default};
